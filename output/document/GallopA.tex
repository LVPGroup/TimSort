%
\begin{isabellebody}%
\setisabellecontext{GallopA}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ GallopA\isanewline
\ \ \isakeyword{imports}\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isacharslash}Simpl{\isacharslash}Vcg{\isachardoublequoteclose}\ Main\ {\isachardoublequoteopen}{\isachartilde}{\isachartilde}{\isacharslash}src{\isacharslash}HOL{\isacharslash}Library{\isacharslash}Code{\isacharunderscore}Target{\isacharunderscore}Numeral{\isachardoublequoteclose}\ {\isachardoublequoteopen}TimSortLemma{\isachardoublequoteclose}\ {\isachardoublequoteopen}TimSortProc{\isachardoublequoteclose}\isanewline
\isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ gallop{\isacharunderscore}left{\isacharunderscore}impl{\isacharparenright}\ gallop{\isacharunderscore}left{\isacharunderscore}modifies{\isacharcolon}\isanewline
\ \ \isakeyword{shows}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasymacute}ret{\isacharcolon}{\isacharequal}{\isacharequal}\ PROC\ gallop{\isacharunderscore}left{\isacharparenleft}{\isasymacute}key{\isacharcomma}\ {\isasymacute}array{\isacharcomma}\ {\isasymacute}base{\isacharcomma}\ {\isasymacute}len{\isacharcomma}\ {\isasymacute}hint{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ t\ may{\isacharunderscore}only{\isacharunderscore}modify{\isacharunderscore}globals\ {\isasymsigma}\ in\ {\isacharbrackleft}{\isacharbrackright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ HoarePartial{\isachardot}ProcRec{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}vcg\ spec{\isacharequal}modifies{\isacharparenright}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ gallop{\isacharunderscore}right{\isacharunderscore}impl{\isacharparenright}\ gallop{\isacharunderscore}right{\isacharunderscore}modifies{\isacharcolon}\isanewline
\ \ \isakeyword{shows}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasymacute}ret{\isacharcolon}{\isacharequal}{\isacharequal}\ PROC\ gallop{\isacharunderscore}right{\isacharparenleft}{\isasymacute}key{\isacharcomma}\ {\isasymacute}array{\isacharcomma}\ {\isasymacute}base{\isacharcomma}\ {\isasymacute}len{\isacharcomma}\ {\isasymacute}hint{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ t\ may{\isacharunderscore}only{\isacharunderscore}modify{\isacharunderscore}globals\ {\isasymsigma}\ in\ {\isacharbrackleft}{\isacharbrackright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ HoarePartial{\isachardot}ProcNoRec{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}vcg\ spec{\isacharequal}modifies{\isacharparenright}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ merge{\isacharunderscore}lo{\isacharunderscore}impl{\isacharparenright}\ merge{\isacharunderscore}lo{\isacharunderscore}modifies{\isacharcolon}\isanewline
\ \ \isakeyword{shows}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ PROC\ merge{\isacharunderscore}lo{\isacharparenleft}{\isasymacute}base{\isadigit{1}}{\isacharcomma}\ {\isasymacute}len{\isadigit{1}}{\isacharcomma}\ {\isasymacute}base{\isadigit{2}}{\isacharcomma}\ {\isasymacute}len{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ t\ may{\isacharunderscore}only{\isacharunderscore}modify{\isacharunderscore}globals\ {\isasymsigma}\ in\ {\isacharbrackleft}a{\isacharbrackright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ HoarePartial{\isachardot}ProcNoRec{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}vcg\ spec{\isacharequal}modifies{\isacharparenright}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ merge{\isacharunderscore}hi{\isacharunderscore}impl{\isacharparenright}\ merge{\isacharunderscore}hi{\isacharunderscore}modifies{\isacharcolon}\isanewline
\ \ \isakeyword{shows}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ PROC\ merge{\isacharunderscore}hi{\isacharparenleft}{\isasymacute}base{\isadigit{1}}{\isacharcomma}\ {\isasymacute}len{\isadigit{1}}{\isacharcomma}\ {\isasymacute}base{\isadigit{2}}{\isacharcomma}\ {\isasymacute}len{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ t\ may{\isacharunderscore}only{\isacharunderscore}modify{\isacharunderscore}globals\ {\isasymsigma}\ in\ {\isacharbrackleft}a{\isacharbrackright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ HoarePartial{\isachardot}ProcNoRec{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}vcg\ spec{\isacharequal}modifies{\isacharparenright}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ gallop{\isacharunderscore}left{\isacharunderscore}impl{\isacharparenright}\ gallop{\isacharunderscore}left{\isacharunderscore}spec{\isacharcolon}\isanewline
\ \ \isakeyword{shows}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isasymlbrace}\ {\isasymsigma}{\isachardot}\ {\isasymacute}array{\isasymnoteq}{\isacharbrackleft}{\isacharbrackright}\ {\isasymand}\ {\isasymacute}base{\isasymge}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}len{\isachargreater}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}hint{\isacharless}{\isasymacute}len\ {\isasymand}\ {\isasymacute}base{\isacharplus}{\isasymacute}len{\isasymle}length\ {\isasymacute}array{\isasymrbrace}\isanewline
\ \ {\isasymacute}ret\ {\isacharcolon}{\isacharequal}{\isacharequal}\ PROC\ gallop{\isacharunderscore}left{\isacharparenleft}{\isasymacute}key{\isacharcomma}\ {\isasymacute}array{\isacharcomma}\ {\isasymacute}base{\isacharcomma}\ {\isasymacute}len{\isacharcomma}\ {\isasymacute}hint{\isacharparenright}\isanewline
\ \ {\isasymlbrace}\ {\isasymacute}ret\ {\isasymge}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}ret\ {\isasymle}{\isasymacute}len\ {\isasymand}\ {\isasymacute}len\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup len{\isasymrbrace}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ HoarePartial{\isachardot}ProcNoRec{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ anno{\isacharequal}{\isachardoublequoteopen}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}last{\isacharunderscore}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isadigit{0}}{\isacharsemicolon}{\isacharsemicolon}\ {\isasymacute}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ IF\ {\isasymacute}array\ {\isacharbang}\ {\isacharparenleft}{\isasymacute}base\ {\isacharplus}\ {\isasymacute}hint{\isacharparenright}\ {\isacharless}\ {\isasymacute}key\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ THEN\ {\isasymacute}max{\isacharunderscore}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}len\ {\isacharminus}\ {\isasymacute}hint{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ WHILE\ {\isasymacute}ofs\ {\isacharless}\ {\isasymacute}max{\isacharunderscore}ofs\ {\isasymand}\ {\isasymacute}array\ {\isacharbang}\ {\isacharparenleft}{\isasymacute}base\ {\isacharplus}\ {\isasymacute}hint\ {\isacharplus}\ {\isasymacute}ofs{\isacharparenright}\ {\isacharless}\ {\isasymacute}key\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ INV\ {\isasymlbrace}\ {\isasymacute}ofs{\isachargreater}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}last{\isacharunderscore}ofs{\isasymge}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}last{\isacharunderscore}ofs{\isacharless}{\isasymacute}ofs\ {\isasymand}\ {\isasymacute}last{\isacharunderscore}ofs{\isacharless}{\isasymacute}max{\isacharunderscore}ofs\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}base\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base\ {\isasymand}\ {\isasymacute}len\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup len\ {\isasymand}\ {\isasymacute}hint\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup hint\ {\isasymand}\ {\isasymacute}hint{\isacharless}{\isasymacute}len\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}max{\isacharunderscore}ofs\ {\isacharequal}\ {\isasymacute}len{\isacharminus}{\isasymacute}hint\ {\isasymrbrace}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ DO\ {\isasymacute}last{\isacharunderscore}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}ofs{\isacharsemicolon}{\isacharsemicolon}\ {\isasymacute}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}ofs\ {\isacharplus}\ {\isasymacute}ofs\ {\isacharplus}\ {\isadigit{1}}\ OD{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ IF\ {\isasymacute}max{\isacharunderscore}ofs\ {\isacharless}\ {\isasymacute}ofs\ THEN\ {\isasymacute}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}max{\isacharunderscore}ofs\ FI{\isacharsemicolon}{\isacharsemicolon}\ {\isasymacute}last{\isacharunderscore}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}last{\isacharunderscore}ofs\ {\isacharplus}\ {\isasymacute}hint\ {\isacharplus}\ {\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\ {\isasymacute}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}ofs\ {\isacharplus}\ {\isasymacute}hint\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ ELSE\ {\isasymacute}max{\isacharunderscore}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}hint\ {\isacharplus}\ {\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ WHILE\ {\isasymacute}ofs\ {\isacharless}\ {\isasymacute}max{\isacharunderscore}ofs\ {\isasymand}\ {\isasymacute}key\ {\isasymle}\ {\isasymacute}array\ {\isacharbang}\ {\isacharparenleft}{\isasymacute}base\ {\isacharplus}\ {\isasymacute}hint\ {\isacharminus}\ {\isasymacute}ofs{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ INV\ {\isasymlbrace}\ {\isasymacute}ofs{\isachargreater}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}last{\isacharunderscore}ofs{\isasymge}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}last{\isacharunderscore}ofs{\isacharless}{\isasymacute}ofs\ {\isasymand}\ {\isasymacute}last{\isacharunderscore}ofs{\isacharless}{\isasymacute}max{\isacharunderscore}ofs\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}base\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base\ {\isasymand}\ \ {\isasymacute}len\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup len\ {\isasymand}\ {\isasymacute}hint\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup hint\ {\isasymand}\ {\isasymacute}hint{\isacharless}{\isasymacute}len\ {\isasymrbrace}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ DO\ {\isasymacute}last{\isacharunderscore}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}ofs{\isacharsemicolon}{\isacharsemicolon}\ {\isasymacute}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}ofs\ {\isacharplus}\ {\isasymacute}ofs\ {\isacharplus}\ {\isadigit{1}}\ OD{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ IF\ {\isasymacute}max{\isacharunderscore}ofs\ {\isacharless}\ {\isasymacute}ofs\ THEN\ {\isasymacute}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}max{\isacharunderscore}ofs\ FI{\isacharsemicolon}{\isacharsemicolon}\ {\isasymacute}tmp{\isacharunderscore}gallop\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}last{\isacharunderscore}ofs{\isacharsemicolon}{\isacharsemicolon}\ {\isasymacute}last{\isacharunderscore}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}hint\ {\isacharplus}\ {\isadigit{1}}\ {\isacharminus}\ {\isasymacute}ofs{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}hint\ {\isacharminus}\ {\isasymacute}tmp{\isacharunderscore}gallop\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ WHILE\ {\isasymacute}last{\isacharunderscore}ofs\ {\isacharless}\ {\isasymacute}ofs\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ INV\ {\isasymlbrace}\ {\isasymacute}last{\isacharunderscore}ofs{\isasymge}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}last{\isacharunderscore}ofs{\isasymle}{\isasymacute}ofs\ {\isasymand}\ {\isasymacute}ofs{\isasymle}{\isasymacute}len\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}last{\isacharunderscore}ofs\ {\isasymle}\ {\isacharparenleft}{\isasymacute}ofs{\isacharplus}{\isasymacute}last{\isacharunderscore}ofs{\isacharparenright}div\ {\isadigit{2}}\ {\isasymand}\ {\isasymacute}ofs\ {\isasymge}\ {\isacharparenleft}{\isasymacute}ofs{\isacharplus}{\isasymacute}last{\isacharunderscore}ofs{\isacharparenright}div\ {\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}len\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup len\ {\isasymand}\ {\isasymacute}base\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base\ {\isasymrbrace}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ DO\ {\isasymacute}mid\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isacharparenleft}{\isasymacute}ofs\ {\isacharplus}\ {\isasymacute}last{\isacharunderscore}ofs{\isacharparenright}\ div\ {\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\ IF\ {\isasymacute}array\ {\isacharbang}\ {\isacharparenleft}{\isasymacute}base\ {\isacharplus}\ {\isasymacute}mid{\isacharparenright}\ {\isacharless}\ {\isasymacute}key\ THEN\ {\isasymacute}last{\isacharunderscore}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}mid\ {\isacharplus}\ {\isadigit{1}}\ ELSE\ {\isasymacute}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}mid\ FI\ OD{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}ret\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}ofs\isanewline
\ \ \ \ \ \ \ \ {\isachardoublequoteclose}\ \isakeyword{in}\ HoarePartial{\isachardot}annotateI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ vcg\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\ \isanewline
%
\endisadelimproof
\ \ \isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ gallop{\isacharunderscore}right{\isacharunderscore}impl{\isacharparenright}\ gallop{\isacharunderscore}right{\isacharunderscore}spec{\isacharcolon}\isanewline
\ \ \isakeyword{shows}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isasymlbrace}\ {\isasymsigma}{\isachardot}\ {\isasymacute}array{\isasymnoteq}{\isacharbrackleft}{\isacharbrackright}\ {\isasymand}\ {\isasymacute}base{\isasymge}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}len{\isachargreater}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}hint{\isacharless}{\isasymacute}len\ {\isasymand}\ {\isasymacute}base{\isacharplus}{\isasymacute}len{\isasymle}length\ {\isasymacute}array{\isasymrbrace}\isanewline
\ \ {\isasymacute}ret\ {\isacharcolon}{\isacharequal}{\isacharequal}\ PROC\ gallop{\isacharunderscore}right{\isacharparenleft}{\isasymacute}key{\isacharcomma}\ {\isasymacute}array{\isacharcomma}\ {\isasymacute}base{\isacharcomma}\ {\isasymacute}len{\isacharcomma}\ {\isasymacute}hint{\isacharparenright}\isanewline
\ \ {\isasymlbrace}\ {\isasymacute}ret\ {\isasymge}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}ret\ {\isasymle}{\isasymacute}len\ {\isasymand}\ {\isasymacute}len\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup len{\isasymrbrace}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ HoarePartial{\isachardot}ProcNoRec{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ anno{\isacharequal}{\isachardoublequoteopen}\isanewline
\ \ \ \ \ \ \ \ \ {\isasymacute}last{\isacharunderscore}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isadigit{0}}{\isacharsemicolon}{\isacharsemicolon}\ {\isasymacute}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ IF\ {\isasymacute}key\ {\isacharless}\ {\isasymacute}array\ {\isacharbang}\ {\isacharparenleft}{\isasymacute}base\ {\isacharplus}\ {\isasymacute}hint{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ THEN\ {\isasymacute}max{\isacharunderscore}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}hint\ {\isacharplus}\ {\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ WHILE\ {\isasymacute}ofs\ {\isacharless}\ {\isasymacute}max{\isacharunderscore}ofs\ {\isasymand}\ {\isasymacute}key\ {\isacharless}\ {\isasymacute}array\ {\isacharbang}\ {\isacharparenleft}{\isasymacute}base\ {\isacharplus}\ {\isasymacute}hint\ {\isacharminus}\ {\isasymacute}ofs{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ INV\ {\isasymlbrace}\ {\isasymacute}ofs{\isachargreater}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}last{\isacharunderscore}ofs{\isasymge}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}last{\isacharunderscore}ofs{\isacharless}{\isasymacute}ofs\ {\isasymand}\ {\isasymacute}last{\isacharunderscore}ofs{\isacharless}{\isasymacute}max{\isacharunderscore}ofs\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}base\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base\ {\isasymand}\ \ {\isasymacute}len\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup len\ {\isasymand}\ {\isasymacute}hint\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup hint\ {\isasymand}\ {\isasymacute}hint{\isacharless}{\isasymacute}len\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymrbrace}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ DO\ {\isasymacute}last{\isacharunderscore}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}ofs{\isacharsemicolon}{\isacharsemicolon}\ {\isasymacute}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}ofs\ {\isacharplus}\ {\isasymacute}ofs\ {\isacharplus}\ {\isadigit{1}}\ OD{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ IF\ {\isasymacute}max{\isacharunderscore}ofs\ {\isacharless}\ {\isasymacute}ofs\ THEN\ {\isasymacute}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}max{\isacharunderscore}ofs\ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}tmp{\isacharunderscore}gallop\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}last{\isacharunderscore}ofs{\isacharsemicolon}{\isacharsemicolon}\ {\isasymacute}last{\isacharunderscore}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}hint\ {\isacharplus}\ {\isadigit{1}}\ {\isacharminus}\ {\isasymacute}ofs{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}hint\ {\isacharminus}\ {\isasymacute}tmp{\isacharunderscore}gallop\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ ELSE\ {\isasymacute}max{\isacharunderscore}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}len\ {\isacharminus}\ {\isasymacute}hint{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ WHILE\ {\isasymacute}ofs\ {\isacharless}\ {\isasymacute}max{\isacharunderscore}ofs\ {\isasymand}\ {\isasymacute}array\ {\isacharbang}\ {\isacharparenleft}{\isasymacute}base\ {\isacharplus}\ {\isasymacute}hint\ {\isacharplus}\ {\isasymacute}ofs{\isacharparenright}\ {\isasymle}\ {\isasymacute}key\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ INV\ {\isasymlbrace}\ {\isasymacute}ofs{\isachargreater}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}last{\isacharunderscore}ofs{\isasymge}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}last{\isacharunderscore}ofs{\isacharless}{\isasymacute}ofs\ {\isasymand}\ {\isasymacute}last{\isacharunderscore}ofs{\isacharless}{\isasymacute}max{\isacharunderscore}ofs\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}base\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base\ {\isasymand}\ {\isasymacute}len\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup len\ {\isasymand}\ {\isasymacute}hint\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup hint\ {\isasymand}\ {\isasymacute}hint{\isacharless}{\isasymacute}len\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}max{\isacharunderscore}ofs\ {\isacharequal}\ {\isasymacute}len{\isacharminus}{\isasymacute}hint\ {\isasymrbrace}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ DO\ {\isasymacute}last{\isacharunderscore}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}ofs{\isacharsemicolon}{\isacharsemicolon}\ {\isasymacute}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}ofs\ {\isacharplus}\ {\isasymacute}ofs\ {\isacharplus}\ {\isadigit{1}}\ OD{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ IF\ {\isasymacute}max{\isacharunderscore}ofs\ {\isacharless}\ {\isasymacute}ofs\ THEN\ {\isasymacute}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}max{\isacharunderscore}ofs\ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}last{\isacharunderscore}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}last{\isacharunderscore}ofs\ {\isacharplus}\ {\isasymacute}hint\ {\isacharplus}\ {\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\ {\isasymacute}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}ofs\ {\isacharplus}\ {\isasymacute}hint\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ WHILE\ {\isasymacute}last{\isacharunderscore}ofs\ {\isacharless}\ {\isasymacute}ofs\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ INV\ {\isasymlbrace}\ {\isasymacute}last{\isacharunderscore}ofs{\isasymge}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}last{\isacharunderscore}ofs{\isasymle}{\isasymacute}ofs\ {\isasymand}\ {\isasymacute}ofs{\isasymle}{\isasymacute}len\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}last{\isacharunderscore}ofs\ {\isasymle}\ {\isacharparenleft}{\isasymacute}ofs{\isacharplus}{\isasymacute}last{\isacharunderscore}ofs{\isacharparenright}div\ {\isadigit{2}}\ {\isasymand}\ {\isasymacute}ofs\ {\isasymge}\ {\isacharparenleft}{\isasymacute}ofs{\isacharplus}{\isasymacute}last{\isacharunderscore}ofs{\isacharparenright}div\ {\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}len\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup len\ {\isasymand}\ {\isasymacute}base\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base\ {\isasymrbrace}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ DO\ {\isasymacute}mid\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isacharparenleft}{\isasymacute}ofs\ {\isacharplus}\ {\isasymacute}last{\isacharunderscore}ofs{\isacharparenright}\ div\ {\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IF\ {\isasymacute}key\ {\isacharless}\ {\isasymacute}array\ {\isacharbang}\ {\isacharparenleft}{\isasymacute}base\ {\isacharplus}\ {\isasymacute}mid{\isacharparenright}\ THEN\ {\isasymacute}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}mid\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ELSE\ {\isasymacute}last{\isacharunderscore}ofs\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}mid{\isacharplus}{\isadigit{1}}\ FI\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ OD{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}ret\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}ofs\isanewline
\ \ \ \ \ \ {\isachardoublequoteclose}\ \isakeyword{in}\ HoarePartial{\isachardot}annotateI{\isacharparenright}\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ vcg\isanewline
\ \ \ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\ \ \isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\ \isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ merge{\isacharunderscore}lo{\isacharunderscore}impl{\isacharparenright}\ merge{\isacharunderscore}lo{\isacharunderscore}spec{\isacharcolon}\isanewline
\ \ \isakeyword{shows}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isasymlbrace}\ {\isasymsigma}{\isachardot}\ {\isasymacute}base{\isadigit{1}}{\isasymge}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}len{\isadigit{1}}{\isachargreater}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}len{\isadigit{2}}{\isachargreater}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}len{\isadigit{1}}{\isasymle}{\isasymacute}len{\isadigit{2}}\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymacute}base{\isadigit{1}}{\isacharplus}{\isasymacute}len{\isadigit{1}}\ {\isacharequal}\ {\isasymacute}base{\isadigit{2}}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymacute}base{\isadigit{2}}{\isacharplus}{\isasymacute}len{\isadigit{2}}\ {\isasymle}\ length\ {\isasymacute}a{\isacharparenright}{\isasymrbrace}\isanewline
\ \ PROC\ merge{\isacharunderscore}lo{\isacharparenleft}{\isasymacute}base{\isadigit{1}}{\isacharcomma}\ {\isasymacute}len{\isadigit{1}}{\isacharcomma}\ {\isasymacute}base{\isadigit{2}}{\isacharcomma}\ {\isasymacute}len{\isadigit{2}}{\isacharparenright}\isanewline
\ \ {\isasymlbrace}length\ {\isasymacute}a\ {\isacharequal}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a{\isasymrbrace}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ HoarePartial{\isachardot}ProcNoRec{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ anno{\isacharequal}{\isachardoublequoteopen}\isanewline
\ \ \ \ \ \ TRY\isanewline
\ \ {\isasymacute}tmp\ {\isacharcolon}{\isacharequal}{\isacharequal}\ replicate\ {\isasymacute}len{\isadigit{1}}\ {\isacharparenleft}{\isadigit{0}}{\isacharcolon}{\isacharcolon}int{\isacharparenright}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ {\isasymacute}tmp\ {\isacharcolon}{\isacharequal}{\isacharequal}\ list{\isacharunderscore}copy\ {\isasymacute}tmp\ {\isacharparenleft}{\isadigit{0}}{\isacharcolon}{\isacharcolon}nat{\isacharparenright}\ {\isasymacute}a\ {\isasymacute}base{\isadigit{1}}\ {\isasymacute}len{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ {\isasymacute}cursor{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isadigit{0}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ {\isasymacute}cursor{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}{\isasymacute}base{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ {\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}base{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ {\isasymacute}a{\isacharbang}{\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}a{\isacharbang}{\isasymacute}cursor{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ {\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}dest{\isacharplus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ {\isasymacute}cursor{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}cursor{\isadigit{2}}{\isacharplus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ {\isasymacute}len{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}len{\isadigit{2}}{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ {\isasymacute}min{\isacharunderscore}gallop\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}global{\isacharunderscore}min{\isacharunderscore}gallop{\isacharsemicolon}{\isacharsemicolon}{\isacharparenleft}{\isacharasterisk}\ need\ to\ add\ min\ gallop\ to\ globals\ var\ {\isacharasterisk}{\isacharparenright}\isanewline
\ \ IF\ {\isasymacute}len{\isadigit{2}}{\isacharequal}{\isadigit{0}}\ THEN\ {\isasymacute}a\ {\isacharcolon}{\isacharequal}{\isacharequal}\ list{\isacharunderscore}copy\ {\isasymacute}a\ {\isasymacute}dest\ {\isasymacute}tmp\ {\isasymacute}cursor{\isadigit{1}}\ {\isasymacute}len{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\ THROW\ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ IF\ {\isasymacute}len{\isadigit{1}}{\isacharequal}{\isadigit{1}}\ THEN\ {\isasymacute}a\ {\isacharcolon}{\isacharequal}{\isacharequal}\ list{\isacharunderscore}copy\ {\isasymacute}a\ {\isasymacute}dest\ {\isasymacute}a\ {\isasymacute}cursor{\isadigit{2}}\ {\isasymacute}len{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\ {\isasymacute}a{\isacharbang}{\isacharparenleft}{\isasymacute}dest{\isacharplus}{\isasymacute}len{\isadigit{2}}{\isacharparenright}{\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}tmp{\isacharbang}{\isasymacute}cursor{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}THROW\ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ TRY\isanewline
\ \ \ \ WHILE\ True\ \isanewline
\ \ \ \ INV\ {\isasymlbrace}\ {\isasymacute}cursor{\isadigit{1}}{\isasymge}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}cursor{\isadigit{2}}{\isasymge}{\isasymacute}base{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}len{\isadigit{1}}{\isachargreater}{\isadigit{1}}\ {\isasymand}\ {\isasymacute}len{\isadigit{2}}{\isachargreater}{\isadigit{0}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{1}}{\isacharplus}{\isasymacute}len{\isadigit{1}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{1}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{2}}{\isacharplus}{\isasymacute}len{\isadigit{2}}\ {\isacharequal}\ {\isasymacute}base{\isadigit{2}}{\isacharplus}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isasymacute}dest{\isacharplus}{\isasymacute}len{\isadigit{1}}\ {\isacharequal}\ {\isasymacute}cursor{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isasymacute}base{\isadigit{1}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{1}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isasymacute}base{\isadigit{2}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ length\ {\isasymacute}tmp\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{1}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ length\ {\isasymacute}a\ {\isacharequal}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{2}}{\isacharplus}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{2}}\ {\isasymle}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a{\isacharparenright}\ {\isasymrbrace}\isanewline
\ \ \ \ DO\isanewline
\ \ \ \ \ \ {\isasymacute}count{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isadigit{0}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ {\isasymacute}count{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isadigit{0}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ WHILE\ {\isacharparenleft}{\isasymacute}count{\isadigit{1}}\ {\isacharless}\ {\isasymacute}min{\isacharunderscore}gallop\ {\isacharampersand}\ {\isasymacute}count{\isadigit{2}}\ {\isacharless}\ {\isasymacute}min{\isacharunderscore}gallop{\isacharparenright}\isanewline
\ \ \ \ \ \ INV\ {\isasymlbrace}\ {\isasymacute}cursor{\isadigit{1}}{\isasymge}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}cursor{\isadigit{2}}{\isasymge}{\isasymacute}base{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}len{\isadigit{1}}{\isachargreater}{\isadigit{1}}\ {\isasymand}\ {\isasymacute}len{\isadigit{2}}{\isachargreater}{\isadigit{0}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{1}}{\isacharplus}{\isasymacute}len{\isadigit{1}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{1}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{2}}{\isacharplus}{\isasymacute}len{\isadigit{2}}\ {\isacharequal}\ {\isasymacute}base{\isadigit{2}}{\isacharplus}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}dest{\isacharplus}{\isasymacute}len{\isadigit{1}}\ {\isacharequal}\ {\isasymacute}cursor{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}base{\isadigit{1}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{1}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}base{\isadigit{2}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ length\ {\isasymacute}tmp\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{1}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ length\ {\isasymacute}a\ {\isacharequal}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{2}}{\isacharplus}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{2}}\ {\isasymle}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a{\isacharparenright}\ {\isasymrbrace}\isanewline
\ \ \ \ \ \ DO\isanewline
\ \ \ \ \ \ \ \ IF\ {\isasymacute}a{\isacharbang}{\isasymacute}cursor{\isadigit{2}}\ {\isacharless}\ {\isasymacute}tmp{\isacharbang}{\isasymacute}cursor{\isadigit{1}}\isanewline
\ \ \ \ \ \ \ \ THEN\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}a{\isacharbang}{\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}a{\isacharbang}{\isasymacute}cursor{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}dest{\isacharplus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}cursor{\isadigit{2}}{\isacharplus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}count{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}count{\isadigit{2}}{\isacharplus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}count{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isadigit{0}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}len{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}len{\isadigit{2}}{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ IF\ {\isasymacute}len{\isadigit{2}}\ {\isacharequal}\ {\isadigit{0}}\ THEN\ THROW\ FI\isanewline
\ \ \ \ \ \ \ \ ELSE\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}a{\isacharbang}{\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}tmp{\isacharbang}{\isasymacute}cursor{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}dest{\isacharplus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}cursor{\isadigit{1}}{\isacharplus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}count{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}count{\isadigit{1}}{\isacharplus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}count{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isadigit{0}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}len{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}len{\isadigit{1}}{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ IF\ {\isasymacute}len{\isadigit{1}}\ {\isacharequal}\ {\isadigit{1}}\ THEN\ THROW\ FI\isanewline
\ \ \ \ \ \ \ \ FI\isanewline
\ \ \ \ \ \ OD{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ WHILE\ {\isacharparenleft}{\isasymacute}count{\isadigit{1}}\ {\isasymge}\ {\isasymacute}global{\isacharunderscore}min{\isacharunderscore}gallop\ {\isacharbar}\ {\isasymacute}count{\isadigit{2}}\ {\isasymge}\ {\isasymacute}global{\isacharunderscore}min{\isacharunderscore}gallop{\isacharparenright}\isanewline
\ \ \ \ \ \ INV\ {\isasymlbrace}\ {\isasymacute}cursor{\isadigit{1}}{\isasymge}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}cursor{\isadigit{2}}{\isasymge}{\isasymacute}base{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ {\isasymacute}len{\isadigit{1}}{\isachargreater}{\isadigit{1}}\ {\isasymand}\ {\isasymacute}len{\isadigit{2}}{\isachargreater}{\isadigit{0}}\ {\isasymand}\isanewline
\ \ \ \ \ \ {\isasymacute}cursor{\isadigit{1}}{\isacharplus}{\isasymacute}len{\isadigit{1}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{1}}\ {\isasymand}\isanewline
\ \ \ \ \ \ {\isasymacute}cursor{\isadigit{2}}{\isacharplus}{\isasymacute}len{\isadigit{2}}\ {\isacharequal}\ {\isasymacute}base{\isadigit{2}}{\isacharplus}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ {\isasymacute}dest{\isacharplus}{\isasymacute}len{\isadigit{1}}\ {\isacharequal}\ {\isasymacute}cursor{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ {\isasymacute}base{\isadigit{1}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{1}}\ {\isasymand}\isanewline
\ \ \ \ \ \ {\isasymacute}base{\isadigit{2}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ length\ {\isasymacute}tmp\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{1}}\ {\isasymand}\isanewline
\ \ \ \ \ \ length\ {\isasymacute}a\ {\isacharequal}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a\ {\isasymand}\isanewline
\ \ \ \ \ \ {\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{2}}{\isacharplus}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{2}}\ {\isasymle}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a{\isacharparenright}\ {\isasymrbrace}\isanewline
\ \ \ \ \ \ DO\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}count{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ CALL\ gallop{\isacharunderscore}right{\isacharparenleft}{\isasymacute}a{\isacharbang}{\isasymacute}cursor{\isadigit{2}}{\isacharcomma}\ {\isasymacute}tmp{\isacharcomma}\ {\isasymacute}cursor{\isadigit{1}}{\isacharcomma}\ {\isasymacute}len{\isadigit{1}}{\isacharcomma}\ {\isadigit{0}}{\isacharparenright}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ IF\ {\isasymacute}count{\isadigit{1}}\ {\isasymnoteq}\ {\isadigit{0}}\isanewline
\ \ \ \ \ \ \ \ THEN\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}a\ {\isacharcolon}{\isacharequal}{\isacharequal}\ list{\isacharunderscore}copy\ {\isasymacute}a\ {\isasymacute}dest\ {\isasymacute}tmp\ {\isasymacute}cursor{\isadigit{1}}\ {\isasymacute}count{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}dest{\isacharplus}{\isasymacute}count{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}cursor{\isadigit{1}}{\isacharplus}{\isasymacute}count{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}len{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}len{\isadigit{1}}{\isacharminus}{\isasymacute}count{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ IF\ {\isasymacute}len{\isadigit{1}}{\isasymle}{\isadigit{1}}\ THEN\ THROW\ FI\isanewline
\ \ \ \ \ \ \ \ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}a{\isacharbang}{\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}a{\isacharbang}{\isasymacute}cursor{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}dest{\isacharplus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}cursor{\isadigit{2}}{\isacharplus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}len{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}len{\isadigit{2}}{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ IF\ {\isasymacute}len{\isadigit{2}}\ {\isacharequal}\ {\isadigit{0}}\ THEN\ THROW\ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}count{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ CALL\ gallop{\isacharunderscore}left{\isacharparenleft}{\isasymacute}tmp{\isacharbang}{\isasymacute}cursor{\isadigit{1}}{\isacharcomma}\ {\isasymacute}a{\isacharcomma}\ {\isasymacute}cursor{\isadigit{2}}{\isacharcomma}\ {\isasymacute}len{\isadigit{2}}{\isacharcomma}\ {\isadigit{0}}{\isacharparenright}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ IF\ {\isasymacute}count{\isadigit{2}}\ {\isasymnoteq}\ {\isadigit{0}}\isanewline
\ \ \ \ \ \ \ \ THEN\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}a\ {\isacharcolon}{\isacharequal}{\isacharequal}\ list{\isacharunderscore}copy\ {\isasymacute}a\ {\isasymacute}dest\ {\isasymacute}a\ {\isasymacute}cursor{\isadigit{2}}\ {\isasymacute}count{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}dest{\isacharplus}{\isasymacute}count{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}cursor{\isadigit{2}}{\isacharplus}{\isasymacute}count{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}len{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}len{\isadigit{2}}{\isacharminus}{\isasymacute}count{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ IF\ {\isasymacute}len{\isadigit{2}}\ {\isacharequal}\ {\isadigit{0}}\ THEN\ THROW\ FI\isanewline
\ \ \ \ \ \ \ \ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}a{\isacharbang}{\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}tmp{\isacharbang}{\isasymacute}cursor{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}dest{\isacharplus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}cursor{\isadigit{1}}{\isacharplus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}len{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}len{\isadigit{1}}{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ IF\ {\isasymacute}len{\isadigit{1}}\ {\isacharequal}\ {\isadigit{1}}\ THEN\ THROW\ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}min{\isacharunderscore}gallop\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}min{\isacharunderscore}gallop{\isacharminus}{\isadigit{1}}\isanewline
\ \ \ \ \ \ OD{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ IF\ {\isasymacute}min{\isacharunderscore}gallop\ {\isacharless}\ {\isadigit{0}}\ THEN\ {\isasymacute}min{\isacharunderscore}gallop\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isadigit{0}}\ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ {\isasymacute}min{\isacharunderscore}gallop\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}min{\isacharunderscore}gallop\ {\isacharplus}\ {\isadigit{2}}\isanewline
\ \ \ \ OD\isanewline
\ \ CATCH\isanewline
\ \ Skip\isanewline
\ \ END{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ IF\ {\isasymacute}len{\isadigit{1}}\ {\isacharequal}\ {\isadigit{1}}\isanewline
\ \ THEN\ {\isasymacute}a\ {\isacharcolon}{\isacharequal}{\isacharequal}\ list{\isacharunderscore}copy\ {\isasymacute}a\ {\isasymacute}dest\ {\isasymacute}a\ {\isasymacute}cursor{\isadigit{2}}\ {\isasymacute}len{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}{\isasymacute}a{\isacharbang}{\isacharparenleft}{\isasymacute}dest{\isacharplus}{\isasymacute}len{\isadigit{2}}{\isacharparenright}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}tmp{\isacharbang}{\isasymacute}cursor{\isadigit{1}}\isanewline
\ \ ELSE\ IF\ {\isasymacute}len{\isadigit{1}}\ {\isacharequal}\ {\isadigit{0}}\isanewline
\ \ \ \ \ \ \ THEN\ Skip\isanewline
\ \ \ \ \ \ \ ELSE\ {\isasymacute}a\ {\isacharcolon}{\isacharequal}{\isacharequal}\ list{\isacharunderscore}copy\ {\isasymacute}a\ {\isasymacute}dest\ {\isasymacute}tmp\ {\isasymacute}cursor{\isadigit{1}}\ {\isasymacute}len{\isadigit{1}}\ \isanewline
\ \ \ \ \ \ \ FI\isanewline
\ \ FI\isanewline
CATCH\isanewline
Skip\isanewline
END{\isachardoublequoteclose}\ \isakeyword{in}\ HoarePartial{\isachardot}annotateI{\isacharparenright}\isanewline
\ \isacommand{apply}\isamarkupfalse%
\ vcg\isanewline
\ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp{\isacharunderscore}all\ add{\isacharcolon}Suc{\isacharunderscore}lessI{\isacharparenright}\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}list{\isacharunderscore}copy{\isacharunderscore}def{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\ \isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ merge{\isacharunderscore}hi{\isacharunderscore}impl{\isacharparenright}\ merge{\isacharunderscore}hi{\isacharunderscore}spec{\isacharcolon}\isanewline
\ \ \isakeyword{shows}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isasymlbrace}\ {\isasymsigma}{\isachardot}\ {\isasymacute}base{\isadigit{1}}{\isasymge}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}len{\isadigit{1}}{\isachargreater}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}len{\isadigit{2}}{\isachargreater}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}len{\isadigit{1}}{\isasymge}{\isasymacute}len{\isadigit{2}}\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymacute}base{\isadigit{1}}{\isacharplus}{\isasymacute}len{\isadigit{1}}\ {\isacharequal}\ {\isasymacute}base{\isadigit{2}}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymacute}base{\isadigit{2}}{\isacharplus}{\isasymacute}len{\isadigit{2}}\ {\isasymle}\ length\ {\isasymacute}a{\isacharparenright}{\isasymrbrace}\isanewline
\ \ PROC\ merge{\isacharunderscore}hi{\isacharparenleft}{\isasymacute}base{\isadigit{1}}{\isacharcomma}\ {\isasymacute}len{\isadigit{1}}{\isacharcomma}\ {\isasymacute}base{\isadigit{2}}{\isacharcomma}\ {\isasymacute}len{\isadigit{2}}{\isacharparenright}\isanewline
\ \ {\isasymlbrace}length\ {\isasymacute}a\ {\isacharequal}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a\ {\isasymrbrace}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ HoarePartial{\isachardot}ProcNoRec{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ anno{\isacharequal}{\isachardoublequoteopen}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TRY\isanewline
\ \ {\isasymacute}tmp\ {\isacharcolon}{\isacharequal}{\isacharequal}\ replicate\ {\isasymacute}len{\isadigit{2}}\ {\isacharparenleft}{\isadigit{0}}{\isacharcolon}{\isacharcolon}int{\isacharparenright}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ {\isasymacute}tmp\ {\isacharcolon}{\isacharequal}{\isacharequal}\ list{\isacharunderscore}copy\ {\isasymacute}tmp\ {\isacharparenleft}{\isadigit{0}}{\isacharcolon}{\isacharcolon}nat{\isacharparenright}\ {\isasymacute}a\ {\isasymacute}base{\isadigit{2}}\ {\isasymacute}len{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ {\isasymacute}cursor{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}base{\isadigit{1}}{\isacharplus}{\isasymacute}len{\isadigit{1}}{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ {\isasymacute}cursor{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}{\isasymacute}len{\isadigit{2}}{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ {\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}base{\isadigit{2}}{\isacharplus}{\isasymacute}len{\isadigit{2}}{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ {\isasymacute}a{\isacharbang}{\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}a{\isacharbang}{\isasymacute}cursor{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ {\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}dest{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ {\isasymacute}cursor{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}cursor{\isadigit{1}}{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ {\isasymacute}len{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}len{\isadigit{1}}{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ {\isasymacute}min{\isacharunderscore}gallop\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}global{\isacharunderscore}min{\isacharunderscore}gallop{\isacharsemicolon}{\isacharsemicolon}{\isacharparenleft}{\isacharasterisk}\ need\ to\ add\ min\ gallop\ to\ globals\ var\ {\isacharasterisk}{\isacharparenright}\isanewline
\ \ IF\ {\isasymacute}len{\isadigit{1}}{\isacharequal}{\isadigit{0}}\ THEN\ {\isasymacute}a\ {\isacharcolon}{\isacharequal}{\isacharequal}\ list{\isacharunderscore}copy\ {\isasymacute}a\ {\isacharparenleft}{\isasymacute}dest{\isacharminus}{\isacharparenleft}{\isasymacute}len{\isadigit{2}}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isacharparenright}\ {\isasymacute}tmp\ {\isadigit{0}}\ {\isasymacute}len{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\ THROW\ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ IF\ {\isasymacute}len{\isadigit{2}}{\isacharequal}{\isadigit{1}}\ \isanewline
\ \ THEN\ \isanewline
\ \ \ \ {\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}dest{\isacharminus}{\isasymacute}len{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ {\isasymacute}cursor{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}cursor{\isadigit{1}}{\isacharminus}{\isasymacute}len{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ {\isasymacute}a\ {\isacharcolon}{\isacharequal}{\isacharequal}\ list{\isacharunderscore}copy\ {\isasymacute}a\ {\isacharparenleft}{\isasymacute}dest{\isacharplus}{\isadigit{1}}{\isacharparenright}\ {\isasymacute}a\ {\isacharparenleft}{\isasymacute}cursor{\isadigit{1}}{\isacharplus}{\isadigit{1}}{\isacharparenright}\ {\isasymacute}len{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\ \isanewline
\ \ \ \ {\isasymacute}a{\isacharbang}{\isasymacute}dest{\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}tmp{\isacharbang}{\isasymacute}cursor{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ THROW\ \isanewline
\ \ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ TRY\isanewline
\ \ \ \ WHILE\ True\ \isanewline
\ \ \ \ INV\ {\isasymlbrace}\ {\isasymacute}len{\isadigit{1}}{\isachargreater}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}len{\isadigit{1}}{\isacharless}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{1}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}len{\isadigit{2}}{\isachargreater}{\isadigit{1}}\ {\isasymand}\ {\isasymacute}len{\isadigit{2}}{\isasymle}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{1}}{\isacharplus}{\isadigit{1}}{\isacharequal}{\isasymacute}base{\isadigit{1}}{\isacharplus}{\isasymacute}len{\isadigit{1}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{2}}{\isacharplus}{\isadigit{1}}{\isacharequal}{\isasymacute}len{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}dest{\isacharequal}{\isasymacute}cursor{\isadigit{1}}{\isacharplus}{\isasymacute}len{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}base{\isadigit{1}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{1}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}base{\isadigit{2}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ length\ {\isasymacute}tmp\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ length\ {\isasymacute}a\ {\isacharequal}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{2}}{\isacharplus}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{2}}\ {\isasymle}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{1}}{\isacharplus}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{1}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{2}}{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ length\ {\isasymacute}a\ {\isacharequal}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{2}}{\isacharplus}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{2}}\ {\isasymle}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a{\isacharparenright}{\isasymrbrace}\isanewline
\ \ \ \ DO\isanewline
\ \ \ \ \ \ {\isasymacute}count{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isadigit{0}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ {\isasymacute}count{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isadigit{0}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ WHILE\ {\isacharparenleft}{\isasymacute}count{\isadigit{1}}\ {\isacharless}\ {\isasymacute}min{\isacharunderscore}gallop\ {\isacharampersand}\ {\isasymacute}count{\isadigit{2}}\ {\isacharless}\ {\isasymacute}min{\isacharunderscore}gallop{\isacharparenright}\isanewline
\ \ \ \ \ \ INV\ {\isasymlbrace}\ {\isasymacute}len{\isadigit{1}}{\isachargreater}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}len{\isadigit{1}}{\isacharless}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{1}}\ {\isasymand}\isanewline
\ \ \ \ \ \ {\isasymacute}len{\isadigit{2}}{\isachargreater}{\isadigit{1}}\ {\isasymand}\ {\isasymacute}len{\isadigit{2}}{\isasymle}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{1}}{\isacharplus}{\isadigit{1}}{\isacharequal}{\isasymacute}base{\isadigit{1}}{\isacharplus}{\isasymacute}len{\isadigit{1}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{2}}{\isacharplus}{\isadigit{1}}{\isacharequal}{\isasymacute}len{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}dest{\isacharequal}{\isasymacute}cursor{\isadigit{1}}{\isacharplus}{\isasymacute}len{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}base{\isadigit{1}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{1}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}base{\isadigit{2}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ length\ {\isasymacute}tmp\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ length\ {\isasymacute}a\ {\isacharequal}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{2}}{\isacharplus}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{2}}\ {\isasymle}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{1}}{\isacharplus}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{1}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{2}}{\isacharparenright}{\isasymand}\isanewline
\ \ \ \ \ \ \ length\ {\isasymacute}a\ {\isacharequal}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{2}}{\isacharplus}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{2}}\ {\isasymle}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a{\isacharparenright}\ {\isasymrbrace}\isanewline
\ \ \ \ \ \ DO\isanewline
\ \ \ \ \ \ \ \ IF\ {\isasymacute}tmp{\isacharbang}{\isasymacute}cursor{\isadigit{2}}\ {\isacharless}\ {\isasymacute}a{\isacharbang}{\isasymacute}cursor{\isadigit{1}}\isanewline
\ \ \ \ \ \ \ \ THEN\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}a{\isacharbang}{\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}a{\isacharbang}{\isasymacute}cursor{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}dest{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}cursor{\isadigit{1}}{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}count{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}count{\isadigit{1}}{\isacharplus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}count{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isadigit{0}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}len{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}len{\isadigit{1}}{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ IF\ {\isasymacute}len{\isadigit{1}}\ {\isacharequal}\ {\isadigit{0}}\ THEN\ THROW\ FI\isanewline
\ \ \ \ \ \ \ \ ELSE\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}a{\isacharbang}{\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}tmp{\isacharbang}{\isasymacute}cursor{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}dest{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}cursor{\isadigit{2}}{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}count{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}count{\isadigit{2}}{\isacharplus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}count{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isadigit{0}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}len{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}len{\isadigit{2}}{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ IF\ {\isasymacute}len{\isadigit{2}}\ {\isacharequal}\ {\isadigit{1}}\ THEN\ THROW\ FI\isanewline
\ \ \ \ \ \ \ \ FI\isanewline
\ \ \ \ \ \ OD{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ WHILE\ {\isacharparenleft}{\isasymacute}count{\isadigit{1}}\ {\isasymge}\ {\isasymacute}global{\isacharunderscore}min{\isacharunderscore}gallop\ {\isacharbar}\ {\isasymacute}count{\isadigit{2}}\ {\isasymge}\ {\isasymacute}global{\isacharunderscore}min{\isacharunderscore}gallop{\isacharparenright}\isanewline
\ \ \ \ \ \ INV\ {\isasymlbrace}\ {\isasymacute}len{\isadigit{1}}{\isachargreater}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}len{\isadigit{1}}{\isacharless}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{1}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}len{\isadigit{2}}{\isachargreater}{\isadigit{1}}\ {\isasymand}\ {\isasymacute}len{\isadigit{2}}{\isasymle}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{1}}{\isacharplus}{\isadigit{1}}{\isacharequal}{\isasymacute}base{\isadigit{1}}{\isacharplus}{\isasymacute}len{\isadigit{1}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{2}}{\isacharplus}{\isadigit{1}}{\isacharequal}{\isasymacute}len{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}dest{\isacharequal}{\isasymacute}cursor{\isadigit{1}}{\isacharplus}{\isasymacute}len{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}base{\isadigit{1}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{1}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}base{\isadigit{2}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ length\ {\isasymacute}tmp\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ length\ {\isasymacute}a\ {\isacharequal}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{2}}{\isacharplus}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{2}}\ {\isasymle}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{1}}{\isacharplus}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{1}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{2}}{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ length\ {\isasymacute}a\ {\isacharequal}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup base{\isadigit{2}}{\isacharplus}\isactrlbsup {\isasymsigma}\isactrlesup len{\isadigit{2}}\ {\isasymle}\ length\ \isactrlbsup {\isasymsigma}\isactrlesup a{\isacharparenright}\ {\isasymrbrace}\isanewline
\ \ \ \ \ \ DO\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}count{\isacharunderscore}tmp\ {\isacharcolon}{\isacharequal}{\isacharequal}\ \ CALL\ gallop{\isacharunderscore}right{\isacharparenleft}{\isasymacute}tmp{\isacharbang}{\isasymacute}cursor{\isadigit{2}}{\isacharcomma}\ {\isasymacute}a{\isacharcomma}\ {\isasymacute}base{\isadigit{1}}{\isacharcomma}\ {\isasymacute}len{\isadigit{1}}{\isacharcomma}\ {\isasymacute}len{\isadigit{1}}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}count{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}len{\isadigit{1}}\ {\isacharminus}\ {\isasymacute}count{\isacharunderscore}tmp{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ IF\ {\isasymacute}count{\isadigit{1}}\ {\isasymnoteq}\ {\isadigit{0}}\isanewline
\ \ \ \ \ \ \ \ THEN\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}dest{\isacharminus}{\isasymacute}count{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}cursor{\isadigit{1}}{\isacharminus}{\isasymacute}count{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}len{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}len{\isadigit{1}}{\isacharminus}{\isasymacute}count{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}a\ {\isacharcolon}{\isacharequal}{\isacharequal}\ list{\isacharunderscore}copy\ {\isasymacute}a\ {\isacharparenleft}{\isasymacute}dest{\isacharplus}{\isadigit{1}}{\isacharparenright}\ {\isasymacute}a\ {\isacharparenleft}{\isasymacute}cursor{\isadigit{1}}{\isacharplus}{\isadigit{1}}{\isacharparenright}\ {\isasymacute}count{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ IF\ {\isasymacute}len{\isadigit{1}}{\isacharequal}{\isadigit{0}}\ THEN\ THROW\ FI\isanewline
\ \ \ \ \ \ \ \ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}a{\isacharbang}{\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}tmp{\isacharbang}{\isasymacute}cursor{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}dest{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}cursor{\isadigit{2}}{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}len{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}len{\isadigit{2}}{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ IF\ {\isasymacute}len{\isadigit{2}}\ {\isacharequal}\ {\isadigit{1}}\ THEN\ THROW\ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}count{\isacharunderscore}tmp\ {\isacharcolon}{\isacharequal}{\isacharequal}\ CALL\ gallop{\isacharunderscore}left{\isacharparenleft}{\isasymacute}a{\isacharbang}{\isasymacute}cursor{\isadigit{1}}{\isacharcomma}\ {\isasymacute}tmp{\isacharcomma}\ {\isadigit{0}}{\isacharcomma}\ {\isasymacute}len{\isadigit{2}}{\isacharcomma}\ {\isacharparenleft}{\isasymacute}len{\isadigit{2}}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isacharparenright}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}count{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}len{\isadigit{2}}\ {\isacharminus}\ {\isasymacute}count{\isacharunderscore}tmp{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ IF\ {\isasymacute}count{\isadigit{2}}\ {\isasymnoteq}\ {\isadigit{0}}\isanewline
\ \ \ \ \ \ \ \ THEN\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}dest{\isacharminus}{\isasymacute}count{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}cursor{\isadigit{2}}{\isacharminus}{\isasymacute}count{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}len{\isadigit{2}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}len{\isadigit{2}}{\isacharminus}{\isasymacute}count{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymacute}a\ {\isacharcolon}{\isacharequal}{\isacharequal}\ list{\isacharunderscore}copy\ {\isasymacute}a\ {\isacharparenleft}{\isasymacute}dest{\isacharplus}{\isadigit{1}}{\isacharparenright}\ {\isasymacute}tmp\ {\isacharparenleft}{\isasymacute}cursor{\isadigit{2}}{\isacharplus}{\isadigit{1}}{\isacharparenright}\ {\isasymacute}count{\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ IF\ {\isasymacute}len{\isadigit{2}}\ {\isasymle}\ {\isadigit{1}}\ THEN\ THROW\ FI\isanewline
\ \ \ \ \ \ \ \ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}a{\isacharbang}{\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}a{\isacharbang}{\isasymacute}cursor{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}dest{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}cursor{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}cursor{\isadigit{1}}{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}len{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}len{\isadigit{1}}{\isacharminus}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ IF\ {\isasymacute}len{\isadigit{1}}\ {\isacharequal}\ {\isadigit{0}}\ THEN\ THROW\ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymacute}min{\isacharunderscore}gallop\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}min{\isacharunderscore}gallop{\isacharminus}{\isadigit{1}}\isanewline
\ \ \ \ \ \ OD{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ IF\ {\isasymacute}min{\isacharunderscore}gallop\ {\isacharless}\ {\isadigit{0}}\ THEN\ {\isasymacute}min{\isacharunderscore}gallop\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isadigit{0}}\ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ {\isasymacute}min{\isacharunderscore}gallop\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}min{\isacharunderscore}gallop\ {\isacharplus}\ {\isadigit{2}}\isanewline
\ \ \ \ OD\isanewline
\ \ CATCH\isanewline
\ \ Skip\isanewline
\ \ END{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ IF\ {\isasymacute}len{\isadigit{2}}\ {\isacharequal}\ {\isadigit{1}}\isanewline
\ \ THEN\ \isanewline
\ \ \ \ {\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}dest{\isacharminus}{\isasymacute}len{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ {\isasymacute}cursor{\isadigit{1}}\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}cursor{\isadigit{1}}{\isacharminus}{\isasymacute}len{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ {\isasymacute}a\ {\isacharcolon}{\isacharequal}{\isacharequal}\ list{\isacharunderscore}copy\ {\isasymacute}a\ {\isacharparenleft}{\isasymacute}dest{\isacharplus}{\isadigit{1}}{\isacharparenright}\ {\isasymacute}a\ {\isacharparenleft}{\isasymacute}cursor{\isadigit{1}}{\isacharplus}{\isadigit{1}}{\isacharparenright}\ {\isasymacute}len{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ {\isasymacute}a{\isacharbang}{\isasymacute}dest\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}tmp{\isacharbang}{\isasymacute}cursor{\isadigit{2}}\isanewline
\ \ ELSE\ IF\ {\isasymacute}len{\isadigit{2}}\ {\isacharequal}\ {\isadigit{0}}\isanewline
\ \ \ \ \ \ \ THEN\ Skip\isanewline
\ \ \ \ \ \ \ ELSE\ {\isasymacute}a\ {\isacharcolon}{\isacharequal}{\isacharequal}\ list{\isacharunderscore}copy\ {\isasymacute}a\ {\isacharparenleft}{\isasymacute}dest{\isacharminus}{\isacharparenleft}{\isasymacute}len{\isadigit{2}}{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isacharparenright}\ {\isasymacute}tmp\ {\isadigit{0}}\ {\isasymacute}len{\isadigit{2}}\ \isanewline
\ \ \ \ \ \ \ FI\isanewline
\ \ FI\isanewline
CATCH\isanewline
Skip\isanewline
END{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isakeyword{in}\ HoarePartial{\isachardot}annotateI{\isacharparenright}\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ vcg\isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp{\isacharunderscore}all{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}Suc{\isacharunderscore}diff{\isacharunderscore}Suc{\isacharparenright}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\ \isanewline
%
\endisadelimproof
\isanewline
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\end{isabellebody}%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "root"
%%% End:
