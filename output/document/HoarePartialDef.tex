%
\begin{isabellebody}%
\setisabellecontext{HoarePartialDef}%
%
\isamarkupsection{Hoare Logic for Partial Correctness%
}
\isamarkuptrue%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ HoarePartialDef\ \isakeyword{imports}\ Semantic\ \isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
\isanewline
\isanewline
\isacommand{type{\isacharunderscore}synonym}\isamarkupfalse%
\ {\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}p{\isacharparenright}\ quadruple\ {\isacharequal}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharprime}s\ assn\ {\isasymtimes}\ {\isacharprime}p\ {\isasymtimes}\ {\isacharprime}s\ assn\ {\isasymtimes}\ {\isacharprime}s\ assn{\isacharparenright}{\isachardoublequoteclose}%
\isamarkupsubsection{Validity of Hoare Tuples: \isa{{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A}%
}
\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\isanewline
\ \ valid\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbrackleft}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}p{\isacharcomma}{\isacharprime}f{\isacharparenright}\ body{\isacharcomma}{\isacharprime}f\ set{\isacharcomma}{\isacharprime}s\ assn{\isacharcomma}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}p{\isacharcomma}{\isacharprime}f{\isacharparenright}\ com{\isacharcomma}{\isacharprime}s\ assn{\isacharcomma}{\isacharprime}s\ assn{\isacharbrackright}\ {\isacharequal}{\isachargreater}\ bool{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isachardoublequoteopen}{\isacharunderscore}{\isasymTurnstile}\isactrlbsub {\isacharprime}{\isacharslash}{\isacharunderscore}\isactrlesub {\isacharslash}\ {\isacharunderscore}\ {\isacharunderscore}\ {\isacharunderscore}{\isacharcomma}{\isacharunderscore}{\isachardoublequoteclose}\ \ {\isacharbrackleft}{\isadigit{6}}{\isadigit{1}}{\isacharcomma}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharcomma}\ {\isadigit{2}}{\isadigit{0}}{\isacharcomma}\ {\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharbrackright}\ {\isadigit{6}}{\isadigit{0}}{\isacharparenright}\isanewline
\isakeyword{where}\isanewline
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isasymequiv}\ {\isasymforall}s\ t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}s{\isasymrangle}\ {\isasymRightarrow}\ t\ {\isasymlongrightarrow}\ s\ {\isasymin}\ Normal\ {\isacharbackquote}\ P\ {\isasymlongrightarrow}\ t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F\ \ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ \ t\ {\isasymin}\ \ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\isanewline
\ \ cvalid{\isacharcolon}{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isacharbrackleft}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}p{\isacharcomma}{\isacharprime}f{\isacharparenright}\ body{\isacharcomma}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}p{\isacharparenright}\ quadruple\ set{\isacharcomma}{\isacharprime}f\ set{\isacharcomma}\isanewline
\ \ \ \ \ \ {\isacharprime}s\ assn{\isacharcomma}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}p{\isacharcomma}{\isacharprime}f{\isacharparenright}\ com{\isacharcomma}{\isacharprime}s\ assn{\isacharcomma}{\isacharprime}s\ assn{\isacharbrackright}\ {\isacharequal}{\isachargreater}bool{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isachardoublequoteopen}{\isacharunderscore}{\isacharcomma}{\isacharunderscore}{\isasymTurnstile}\isactrlbsub {\isacharprime}{\isacharslash}{\isacharunderscore}\isactrlesub {\isacharslash}\ {\isacharunderscore}\ {\isacharunderscore}\ {\isacharunderscore}{\isacharcomma}{\isacharunderscore}{\isachardoublequoteclose}\ \ {\isacharbrackleft}{\isadigit{6}}{\isadigit{1}}{\isacharcomma}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharcomma}\ {\isadigit{2}}{\isadigit{0}}{\isacharcomma}\ {\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharbrackright}\ {\isadigit{6}}{\isadigit{0}}{\isacharparenright}\isanewline
\isakeyword{where}\isanewline
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isasymequiv}\ {\isacharparenleft}{\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isacharparenright}\ {\isasymlongrightarrow}\ {\isasymGamma}\ {\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\isanewline
\ \ nvalid\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbrackleft}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}p{\isacharcomma}{\isacharprime}f{\isacharparenright}\ body{\isacharcomma}nat{\isacharcomma}{\isacharprime}f\ set{\isacharcomma}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharprime}s\ assn{\isacharcomma}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}p{\isacharcomma}{\isacharprime}f{\isacharparenright}\ com{\isacharcomma}{\isacharprime}s\ assn{\isacharcomma}{\isacharprime}s\ assn{\isacharbrackright}\ {\isacharequal}{\isachargreater}\ bool{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isachardoublequoteopen}{\isacharunderscore}{\isasymTurnstile}{\isacharunderscore}{\isacharcolon}\isactrlbsub {\isacharprime}{\isacharslash}{\isacharunderscore}\isactrlesub {\isacharslash}\ {\isacharunderscore}\ {\isacharunderscore}\ {\isacharunderscore}{\isacharcomma}{\isacharunderscore}{\isachardoublequoteclose}\ \ {\isacharbrackleft}{\isadigit{6}}{\isadigit{1}}{\isacharcomma}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharcomma}\ {\isadigit{2}}{\isadigit{0}}{\isacharcomma}\ {\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharbrackright}\ {\isadigit{6}}{\isadigit{0}}{\isacharparenright}\isanewline
\isakeyword{where}\isanewline
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isasymequiv}\ {\isasymforall}s\ t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}s\ {\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t\ {\isasymlongrightarrow}\ s\ {\isasymin}\ Normal\ {\isacharbackquote}\ P\ {\isasymlongrightarrow}\ t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ t\ {\isasymin}\ \ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\isanewline
\ \ cnvalid{\isacharcolon}{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isacharbrackleft}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}p{\isacharcomma}{\isacharprime}f{\isacharparenright}\ body{\isacharcomma}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}p{\isacharparenright}\ quadruple\ set{\isacharcomma}nat{\isacharcomma}{\isacharprime}f\ set{\isacharcomma}\ \isanewline
\ \ \ \ \ {\isacharprime}s\ assn{\isacharcomma}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}p{\isacharcomma}{\isacharprime}f{\isacharparenright}\ com{\isacharcomma}{\isacharprime}s\ assn{\isacharcomma}{\isacharprime}s\ assn{\isacharbrackright}\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isachardoublequoteopen}{\isacharunderscore}{\isacharcomma}{\isacharunderscore}{\isasymTurnstile}{\isacharunderscore}{\isacharcolon}\isactrlbsub {\isacharprime}{\isacharslash}{\isacharunderscore}\isactrlesub {\isacharslash}\ {\isacharunderscore}\ {\isacharunderscore}\ {\isacharunderscore}{\isacharcomma}{\isacharunderscore}{\isachardoublequoteclose}\ \ {\isacharbrackleft}{\isadigit{6}}{\isadigit{1}}{\isacharcomma}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharcomma}\ {\isadigit{2}}{\isadigit{0}}{\isacharcomma}\ {\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharbrackright}\ {\isadigit{6}}{\isadigit{0}}{\isacharparenright}\isanewline
\isakeyword{where}\isanewline
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isasymequiv}\ {\isacharparenleft}{\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isacharparenright}\ {\isasymlongrightarrow}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isanewline
\isanewline
\isacommand{notation}\isamarkupfalse%
\ {\isacharparenleft}ASCII{\isacharparenright}\isanewline
\ \ valid\ \ {\isacharparenleft}{\isachardoublequoteopen}{\isacharunderscore}{\isacharbar}{\isacharequal}{\isacharprime}{\isacharslash}{\isacharunderscore}{\isacharslash}\ {\isacharunderscore}\ {\isacharunderscore}\ {\isacharunderscore}{\isacharcomma}{\isacharunderscore}{\isachardoublequoteclose}\ \ {\isacharbrackleft}{\isadigit{6}}{\isadigit{1}}{\isacharcomma}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharcomma}\ {\isadigit{2}}{\isadigit{0}}{\isacharcomma}\ {\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharbrackright}\ {\isadigit{6}}{\isadigit{0}}{\isacharparenright}\ \isakeyword{and}\isanewline
\ \ cvalid\ \ {\isacharparenleft}{\isachardoublequoteopen}{\isacharunderscore}{\isacharcomma}{\isacharunderscore}{\isacharbar}{\isacharequal}{\isacharprime}{\isacharslash}{\isacharunderscore}{\isacharslash}\ {\isacharunderscore}\ {\isacharunderscore}\ {\isacharunderscore}{\isacharcomma}{\isacharunderscore}{\isachardoublequoteclose}\ \ {\isacharbrackleft}{\isadigit{6}}{\isadigit{1}}{\isacharcomma}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharcomma}\ {\isadigit{2}}{\isadigit{0}}{\isacharcomma}\ {\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharbrackright}\ {\isadigit{6}}{\isadigit{0}}{\isacharparenright}\ \isakeyword{and}\isanewline
\ \ nvalid\ \ {\isacharparenleft}{\isachardoublequoteopen}{\isacharunderscore}{\isacharbar}{\isacharequal}{\isacharunderscore}{\isacharcolon}{\isacharprime}{\isacharslash}{\isacharunderscore}{\isacharslash}\ {\isacharunderscore}\ {\isacharunderscore}\ {\isacharunderscore}{\isacharcomma}{\isacharunderscore}{\isachardoublequoteclose}\ \ {\isacharbrackleft}{\isadigit{6}}{\isadigit{1}}{\isacharcomma}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharcomma}\ {\isadigit{2}}{\isadigit{0}}{\isacharcomma}\ {\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharbrackright}\ {\isadigit{6}}{\isadigit{0}}{\isacharparenright}\ \isakeyword{and}\isanewline
\ \ cnvalid\ \ {\isacharparenleft}{\isachardoublequoteopen}{\isacharunderscore}{\isacharcomma}{\isacharunderscore}{\isacharbar}{\isacharequal}{\isacharunderscore}{\isacharcolon}{\isacharprime}{\isacharslash}{\isacharunderscore}{\isacharslash}\ {\isacharunderscore}\ {\isacharunderscore}\ {\isacharunderscore}{\isacharcomma}{\isacharunderscore}{\isachardoublequoteclose}\ \ {\isacharbrackleft}{\isadigit{6}}{\isadigit{1}}{\isacharcomma}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharcomma}\ {\isadigit{2}}{\isadigit{0}}{\isacharcomma}\ {\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharbrackright}\ {\isadigit{6}}{\isadigit{0}}{\isacharparenright}%
\isamarkupsubsection{Properties of Validity%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ valid{\isacharunderscore}iff{\isacharunderscore}nvalid{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isacharequal}\ {\isacharparenleft}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ only{\isacharcolon}\ valid{\isacharunderscore}def\ nvalid{\isacharunderscore}def\ exec{\isacharunderscore}iff{\isacharunderscore}execn\ {\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}blast\ dest{\isacharcolon}\ exec{\isacharunderscore}final{\isacharunderscore}notin{\isacharunderscore}to{\isacharunderscore}execn{\isacharparenright}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\ \isanewline
\isacommand{lemma}\isamarkupfalse%
\ cnvalid{\isacharunderscore}to{\isacharunderscore}cvalid{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isacharparenright}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}unfold\ cvalid{\isacharunderscore}def\ cnvalid{\isacharunderscore}def\ valid{\isacharunderscore}iff{\isacharunderscore}nvalid\ {\isacharbrackleft}THEN\ eq{\isacharunderscore}reflection{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ fast\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ nvalidI{\isacharcolon}\ \isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymAnd}s\ t{\isachardot}\ {\isasymlbrakk}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s\ {\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isacharsemicolon}s\ {\isasymin}\ P{\isacharsemicolon}\ t{\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isasymrbrakk}\ {\isasymLongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isasymrbrakk}\isanewline
\ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ nvalid{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ validI{\isacharcolon}\ \isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymAnd}s\ t{\isachardot}\ {\isasymlbrakk}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s\ {\isasymrangle}\ {\isasymRightarrow}\ t{\isacharsemicolon}s\ {\isasymin}\ P{\isacharsemicolon}\ t{\isasymnotin}Fault\ {\isacharbackquote}\ F{\isasymrbrakk}\ {\isasymLongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isasymrbrakk}\isanewline
\ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ valid{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ cvalidI{\isacharcolon}\ \isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymAnd}s\ t{\isachardot}\ {\isasymlbrakk}{\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isacharsemicolon}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}\ t{\isacharsemicolon}s\ {\isasymin}\ P{\isacharsemicolon}t{\isasymnotin}Fault\ {\isacharbackquote}\ F{\isasymrbrakk}\ \isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isasymrbrakk}\isanewline
\ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ cvalid{\isacharunderscore}def\ valid{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ cvalidD{\isacharcolon}\ \isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isacharsemicolon}{\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isacharsemicolon}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}\ t{\isacharsemicolon}s\ {\isasymin}\ P{\isacharsemicolon}t{\isasymnotin}Fault\ {\isacharbackquote}\ F{\isasymrbrakk}\ \isanewline
\ \ {\isasymLongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ cvalid{\isacharunderscore}def\ valid{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ cnvalidI{\isacharcolon}\ \isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymAnd}s\ t{\isachardot}\ {\isasymlbrakk}{\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isacharsemicolon}\isanewline
\ \ \ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s\ {\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isacharsemicolon}s\ {\isasymin}\ P{\isacharsemicolon}t{\isasymnotin}Fault\ {\isacharbackquote}\ F{\isasymrbrakk}\ \isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isasymrbrakk}\isanewline
\ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ cnvalid{\isacharunderscore}def\ nvalid{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ cnvalidD{\isacharcolon}\ \isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isacharsemicolon}{\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isacharsemicolon}\isanewline
\ \ \ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s\ {\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isacharsemicolon}s\ {\isasymin}\ P{\isacharsemicolon}\isanewline
\ \ \ t{\isasymnotin}Fault\ {\isacharbackquote}\ F{\isasymrbrakk}\ \isanewline
\ \ {\isasymLongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ cnvalid{\isacharunderscore}def\ nvalid{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ nvalid{\isacharunderscore}augment{\isacharunderscore}Faults{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ validn{\isacharcolon}{\isachardoublequoteopen}{\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ F{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}F\ {\isasymsubseteq}\ F{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F{\isacharprime}\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ nvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s\ {\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ F{\isacharprime}\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ exec\ P\ validn\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ nvalid{\isacharunderscore}def{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ valid{\isacharunderscore}augment{\isacharunderscore}Faults{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ validn{\isacharcolon}{\isachardoublequoteopen}{\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ F{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}F\ {\isasymsubseteq}\ F{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F{\isacharprime}\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ validI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s\ {\isasymrangle}\ {\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ F{\isacharprime}\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ exec\ P\ validn\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ valid{\isacharunderscore}def{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ nvalid{\isacharunderscore}to{\isacharunderscore}nvalid{\isacharunderscore}strip{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ validn{\isacharcolon}{\isachardoublequoteopen}{\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ F{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}F{\isacharprime}\ {\isasymsubseteq}\ {\isacharminus}F{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}strip\ F{\isacharprime}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ nvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}strip{\isacharcolon}\ {\isachardoublequoteopen}strip\ F{\isacharprime}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s\ {\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ exec{\isacharunderscore}strip\ \isacommand{obtain}\isamarkupfalse%
\ t{\isacharprime}\ \isakeyword{where}\isanewline
\ \ \ \ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s\ {\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ t{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymin}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharprime}{\isacharparenright}\ {\isasymlongrightarrow}\ t{\isacharprime}{\isacharequal}t{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymnot}\ isFault\ t{\isacharprime}\ {\isasymlongrightarrow}\ t{\isacharprime}{\isacharequal}t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}blast\ dest{\isacharcolon}\ execn{\isacharunderscore}strip{\isacharunderscore}to{\isacharunderscore}execn{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ True\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ t{\isacharprime}\ F\ F{\isacharprime}\ \isacommand{have}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{{\isachardot}{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec\ P\ validn\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isacharasterisk}{\isacharcolon}\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ nvalid{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ t{\isacharprime}\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isacharprime}{\isacharequal}t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ {\isacharasterisk}\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ valid{\isacharunderscore}to{\isacharunderscore}valid{\isacharunderscore}strip{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ valid{\isacharcolon}{\isachardoublequoteopen}{\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ F{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}F{\isacharprime}\ {\isasymsubseteq}\ {\isacharminus}F{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}strip\ F{\isacharprime}\ {\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ validI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}strip{\isacharcolon}\ {\isachardoublequoteopen}strip\ F{\isacharprime}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s\ {\isasymrangle}\ {\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ exec{\isacharunderscore}strip\ \isacommand{obtain}\isamarkupfalse%
\ t{\isacharprime}\ \isakeyword{where}\isanewline
\ \ \ \ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s\ {\isasymrangle}\ {\isasymRightarrow}\ t{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ t{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymin}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharprime}{\isacharparenright}\ {\isasymlongrightarrow}\ t{\isacharprime}{\isacharequal}t{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymnot}\ isFault\ t{\isacharprime}\ {\isasymlongrightarrow}\ t{\isacharprime}{\isacharequal}t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}blast\ dest{\isacharcolon}\ exec{\isacharunderscore}strip{\isacharunderscore}to{\isacharunderscore}exec{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ True\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ t{\isacharprime}\ F\ F{\isacharprime}\ \isacommand{have}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{{\isachardot}{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec\ P\ valid\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isacharasterisk}{\isacharcolon}\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ valid{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ t{\isacharprime}\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isacharprime}{\isacharequal}t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ {\isacharasterisk}\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{The Hoare Rules: \isa{{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A}%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ mono{\isacharunderscore}WeakenContext{\isacharcolon}\ {\isachardoublequoteopen}A\ {\isasymsubseteq}\ B\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymlambda}{\isacharparenleft}P{\isacharcomma}\ c{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharprime}{\isacharparenright}{\isachardot}\ {\isacharparenleft}{\isasymGamma}{\isacharcomma}\ {\isasymTheta}{\isacharcomma}\ F{\isacharcomma}\ P{\isacharcomma}\ c{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharprime}{\isacharparenright}\ {\isasymin}\ A{\isacharparenright}\ x\ {\isasymlongrightarrow}\isanewline
\ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymlambda}{\isacharparenleft}P{\isacharcomma}\ c{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharprime}{\isacharparenright}{\isachardot}\ {\isacharparenleft}{\isasymGamma}{\isacharcomma}\ {\isasymTheta}{\isacharcomma}\ F{\isacharcomma}\ P{\isacharcomma}\ c{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharprime}{\isacharparenright}\ {\isasymin}\ B{\isacharparenright}\ x{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{inductive}\isamarkupfalse%
\ {\isachardoublequoteopen}hoarep{\isachardoublequoteclose}{\isacharcolon}{\isacharcolon}{\isachardoublequoteopen}{\isacharbrackleft}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}p{\isacharcomma}{\isacharprime}f{\isacharparenright}\ body{\isacharcomma}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}p{\isacharparenright}\ quadruple\ set{\isacharcomma}{\isacharprime}f\ set{\isacharcomma}\isanewline
\ \ \ \ {\isacharprime}s\ assn{\isacharcomma}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}p{\isacharcomma}{\isacharprime}f{\isacharparenright}\ com{\isacharcomma}\ {\isacharprime}s\ assn{\isacharcomma}{\isacharprime}s\ assn{\isacharbrackright}\ {\isacharequal}{\isachargreater}\ bool{\isachardoublequoteclose}\isanewline
\ \ \ \ {\isacharparenleft}{\isachardoublequoteopen}{\isacharparenleft}{\isadigit{3}}{\isacharunderscore}{\isacharcomma}{\isacharunderscore}{\isacharslash}{\isasymturnstile}\isactrlbsub {\isacharprime}{\isacharslash}{\isacharunderscore}\ \isactrlesub {\isacharparenleft}{\isacharunderscore}{\isacharslash}\ {\isacharparenleft}{\isacharunderscore}{\isacharparenright}{\isacharslash}\ {\isacharunderscore}{\isacharcomma}{\isacharslash}{\isacharunderscore}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbrackleft}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{6}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharcomma}{\isadigit{2}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isadigit{0}}{\isacharbrackright}{\isadigit{6}}{\isadigit{0}}{\isacharparenright}\isanewline
\ \ \isakeyword{for}\ {\isasymGamma}{\isacharcolon}{\isacharcolon}{\isachardoublequoteopen}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}p{\isacharcomma}{\isacharprime}f{\isacharparenright}\ body{\isachardoublequoteclose}\isanewline
\isakeyword{where}\isanewline
\ \ Skip{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ Q\ Skip\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isanewline
{\isacharbar}\ Basic{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ f\ s\ {\isasymin}\ Q{\isacharbraceright}\ {\isacharparenleft}Basic\ f{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isanewline
{\isacharbar}\ Spec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}{\isasymforall}t{\isachardot}\ {\isacharparenleft}s{\isacharcomma}t{\isacharparenright}\ {\isasymin}\ r\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Q{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymexists}t{\isachardot}\ {\isacharparenleft}s{\isacharcomma}t{\isacharparenright}\ {\isasymin}\ r{\isacharparenright}{\isacharbraceright}\ {\isacharparenleft}Spec\ r{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isanewline
{\isacharbar}\ Seq{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\isactrlsub {\isadigit{1}}\ R{\isacharcomma}A{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c\isactrlsub {\isadigit{2}}\ Q{\isacharcomma}A{\isasymrbrakk}\isanewline
\ \ \ \ \ \ \ \ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Seq\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isanewline
{\isacharbar}\ Cond{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ {\isasyminter}\ b{\isacharparenright}\ c\isactrlsub {\isadigit{1}}\ Q{\isacharcomma}A{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ {\isasyminter}\ {\isacharminus}\ b{\isacharparenright}\ c\isactrlsub {\isadigit{2}}\ Q{\isacharcomma}A{\isasymrbrakk}\isanewline
\ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\ \isanewline
\ \ \ \ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Cond\ b\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isanewline
{\isacharbar}\ While{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ {\isasyminter}\ b{\isacharparenright}\ c\ P{\isacharcomma}A\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}While\ b\ c{\isacharparenright}\ {\isacharparenleft}P\ {\isasyminter}\ {\isacharminus}\ b{\isacharparenright}{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isanewline
{\isacharbar}\ Guard{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}g\ {\isasyminter}\ P{\isacharparenright}\ c\ Q{\isacharcomma}A\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}g\ {\isasyminter}\ P{\isacharparenright}\ {\isacharparenleft}Guard\ f\ g\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isanewline
{\isacharbar}\ Guarantee{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}f\ {\isasymin}\ F{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}g\ {\isasyminter}\ P{\isacharparenright}\ c\ Q{\isacharcomma}A{\isasymrbrakk}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Guard\ f\ g\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isanewline
{\isacharbar}\ CallRec{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}\ {\isasymin}\ Specs{\isacharsemicolon}\ \ \isanewline
\ \ \ \ {\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}\ {\isasymin}\ Specs{\isachardot}\ p\ {\isasymin}\ dom\ {\isasymGamma}\ {\isasymand}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymunion}Specs{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ Q{\isacharcomma}A\ {\isasymrbrakk}\isanewline
\ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isanewline
{\isacharbar}\ DynCom{\isacharcolon}\isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}{\isasymforall}s\ {\isasymin}\ P{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}c\ s{\isacharparenright}\ Q{\isacharcomma}A\ \isanewline
\ \ \ \ \ \ {\isasymLongrightarrow}\ \isanewline
\ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}DynCom\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isanewline
{\isacharbar}\ Throw{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ A\ Throw\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isanewline
{\isacharbar}\ Catch{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\isactrlsub {\isadigit{1}}\ Q{\isacharcomma}R{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c\isactrlsub {\isadigit{2}}\ Q{\isacharcomma}A{\isasymrbrakk}\ {\isasymLongrightarrow}\ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Catch\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isanewline
{\isacharbar}\ Conseq{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ {\isasymin}\ P{\isachardot}\ {\isasymexists}P{\isacharprime}\ Q{\isacharprime}\ A{\isacharprime}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ c\ Q{\isacharprime}{\isacharcomma}A{\isacharprime}\ {\isasymand}\ s\ {\isasymin}\ P{\isacharprime}\ {\isasymand}\ Q{\isacharprime}\ {\isasymsubseteq}\ Q\ {\isasymand}\ A{\isacharprime}\ {\isasymsubseteq}\ A\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isanewline
\isanewline
{\isacharbar}\ Asm{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}\ {\isasymin}\ {\isasymTheta}{\isasymrbrakk}\isanewline
\ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\ \isanewline
\ \ \ \ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isanewline
\isanewline
{\isacharbar}\ ExFalso{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isacharsemicolon}\ {\isasymnot}\ {\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ %
\isamarkupcmt{This is a hack rule that enables us to derive completeness for
        an arbitrary context \isa{{\isasymTheta}}, from completeness for an empty context.%
}
%
\begin{isamarkuptext}%
Does not work, because of rule ExFalso, the context \isa{{\isasymTheta}} is to blame.
 A weaker version with empty context can be derived from soundness 
 and completeness later on.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ hoare{\isacharunderscore}strip{\isacharunderscore}{\isasymGamma}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ p\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}strip\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ p\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ deriv\ \isanewline
\isacommand{proof}\isamarkupfalse%
\ induct\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ Skip\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoarep{\isachardot}Skip{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ Basic\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoarep{\isachardot}Basic{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ Spec\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoarep{\isachardot}Spec{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ Seq\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoarep{\isachardot}Seq{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ Cond\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoarep{\isachardot}Cond{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ While\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoarep{\isachardot}While{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ Guard\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoarep{\isachardot}Guard{\isacharparenright}\isanewline
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ DynCom\ \isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharminus}\ {\isacharparenleft}rule\ hoarep{\isachardot}DynCom{\isacharcomma}best\ \ elim{\isacharbang}{\isacharcolon}\ ballE\ exE{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ Throw\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoarep{\isachardot}Throw{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ Catch\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoarep{\isachardot}Catch{\isacharparenright}\isanewline
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ Asm\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoarep{\isachardot}Asm{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ ExFalso\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{oops}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ hoare{\isacharunderscore}augment{\isacharunderscore}context{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ p\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymAnd}{\isasymTheta}{\isacharprime}{\isachardot}\ {\isasymTheta}\ {\isasymsubseteq}\ {\isasymTheta}{\isacharprime}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isacharprime}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ p\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ deriv\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct{\isacharparenright}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ CallRec\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}CallRec\ P\ p\ Q\ A\ Specs\ {\isasymTheta}\ F\ {\isasymTheta}{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ CallRec{\isachardot}prems\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymTheta}{\isasymunion}Specs\isanewline
\ \ \ \ \ \ \ {\isasymsubseteq}\ {\isasymTheta}{\isacharprime}{\isasymunion}Specs{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ CallRec{\isachardot}hyps\ {\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}{\isasymin}Specs{\isachardot}\ \ p\ {\isasymin}\ dom\ {\isasymGamma}\ {\isasymand}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isacharprime}{\isasymunion}Specs\ {\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ \ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ CallRec\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharminus}\ {\isacharparenleft}rule\ hoarep{\isachardot}CallRec{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ DynCom\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ hoarep{\isachardot}DynCom{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Conseq\ P\ {\isasymTheta}\ F\ c\ Q\ A\ {\isasymTheta}{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ Conseq\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}s\ {\isasymin}\ P{\isachardot}\ \isanewline
\ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymexists}P{\isacharprime}\ Q{\isacharprime}\ A{\isacharprime}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isacharprime}\ {\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ c\ Q{\isacharprime}{\isacharcomma}A{\isacharprime}\ {\isasymand}\ s\ {\isasymin}\ P{\isacharprime}\ {\isasymand}\ Q{\isacharprime}\ {\isasymsubseteq}\ Q\ {\isasymand}\ A{\isacharprime}\ {\isasymsubseteq}\ A{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ Conseq\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharminus}\ {\isacharparenleft}rule\ hoarep{\isachardot}Conseq{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}ExFalso\ {\isasymTheta}\ F\ P\ c\ Q\ A\ {\isasymTheta}{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ valid{\isacharunderscore}ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymTheta}\ {\isasymsubseteq}\ {\isasymTheta}{\isacharprime}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact{\isacharplus}\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isacharprime}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ cnvalid{\isacharunderscore}def{\isacharparenright}\ blast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ invalid{\isacharcolon}\ {\isachardoublequoteopen}{\isasymnot}\ {\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoarep{\isachardot}ExFalso{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ hoarep{\isachardot}intros{\isacharparenright}{\isacharplus}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{Some Derived Rules%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ \ Conseq{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s{\isachardot}\ s\ {\isasymin}\ P\ {\isasymlongrightarrow}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymexists}P{\isacharprime}\ Q{\isacharprime}\ A{\isacharprime}{\isachardot}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}\ Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ c\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ Z{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymexists}Z{\isachardot}\ s\ {\isasymin}\ P{\isacharprime}\ Z\ {\isasymand}\ {\isacharparenleft}Q{\isacharprime}\ Z\ {\isasymsubseteq}\ Q{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}A{\isacharprime}\ Z\ {\isasymsubseteq}\ A{\isacharparenright}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Conseq{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ballI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule{\isacharunderscore}tac\ x{\isacharequal}s\ \isakeyword{in}\ allE{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}clarify{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}P{\isacharprime}\ Z{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}Q{\isacharprime}\ Z{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}A{\isacharprime}\ Z{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ conseq{\isacharcolon}{\isachardoublequoteopen}{\isasymlbrakk}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ c\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ Z{\isacharparenright}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymforall}s{\isachardot}\ s\ {\isasymin}\ P\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymexists}\ Z{\isachardot}\ s{\isasymin}P{\isacharprime}\ Z\ {\isasymand}\ {\isacharparenleft}Q{\isacharprime}\ Z\ {\isasymsubseteq}\ Q{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}A{\isacharprime}\ Z\ {\isasymsubseteq}\ A{\isacharparenright}{\isacharparenright}{\isasymrbrakk}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ Conseq{\isacharparenright}\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{theorem}\isamarkupfalse%
\ conseqPrePost\ {\isacharbrackleft}trans{\isacharbrackright}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ c\ Q{\isacharprime}{\isacharcomma}A{\isacharprime}\ {\isasymLongrightarrow}\ P\ {\isasymsubseteq}\ P{\isacharprime}\ {\isasymLongrightarrow}\ \ Q{\isacharprime}\ {\isasymsubseteq}\ Q\ {\isasymLongrightarrow}\ A{\isacharprime}\ {\isasymsubseteq}\ A\ {\isasymLongrightarrow}\ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseq\ {\isacharbrackleft}\isakeyword{where}\ {\isacharquery}P{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ P{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isacharquery}Q{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ Q{\isacharprime}{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ conseqPre\ {\isacharbrackleft}trans{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ c\ Q{\isacharcomma}A\ {\isasymLongrightarrow}\ P\ {\isasymsubseteq}\ P{\isacharprime}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseq{\isacharparenright}\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ conseqPost\ {\isacharbrackleft}trans{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharprime}{\isacharcomma}A{\isacharprime}\ {\isasymLongrightarrow}\ Q{\isacharprime}\ {\isasymsubseteq}\ Q\ {\isasymLongrightarrow}\ A{\isacharprime}\ {\isasymsubseteq}\ A\ \isanewline
\ {\isasymLongrightarrow}\ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseq{\isacharparenright}\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ CallRec{\isacharprime}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}p{\isasymin}Procs{\isacharsemicolon}\ Procs\ {\isasymsubseteq}\ dom\ {\isasymGamma}{\isacharsemicolon}\isanewline
\ \ \ {\isasymforall}p{\isasymin}Procs{\isachardot}\ \isanewline
\ \ \ \ {\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymunion}\ {\isacharparenleft}{\isasymUnion}p{\isasymin}Procs{\isachardot}\ {\isasymUnion}Z{\isachardot}\ {\isacharbraceleft}{\isacharparenleft}{\isacharparenleft}P\ p\ Z{\isacharparenright}{\isacharcomma}p{\isacharcomma}Q\ p\ Z{\isacharcomma}A\ p\ Z{\isacharparenright}{\isacharbraceright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ {\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ p\ Z{\isacharparenright}\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}Q\ p\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ p\ Z{\isacharparenright}{\isasymrbrakk}\isanewline
\ \ \ {\isasymLongrightarrow}\isanewline
\ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ p\ Z{\isacharparenright}\ {\isacharparenleft}Call\ p{\isacharparenright}\ {\isacharparenleft}Q\ p\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ p\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ CallRec\ {\isacharbrackleft}\isakeyword{where}\ Specs{\isacharequal}{\isachardoublequoteopen}{\isasymUnion}p{\isasymin}Procs{\isachardot}\ {\isasymUnion}Z{\isachardot}\ {\isacharbraceleft}{\isacharparenleft}{\isacharparenleft}P\ p\ Z{\isacharparenright}{\isacharcomma}p{\isacharcomma}Q\ p\ Z{\isacharcomma}A\ p\ Z{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ blast\isanewline
\isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\end{isabellebody}%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "root"
%%% End:
