%
\begin{isabellebody}%
\setisabellecontext{HoareTotal}%
%
\isamarkupsection{Derived Hoare Rules for Total Correctness%
}
\isamarkuptrue%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ HoareTotal\ \isakeyword{imports}\ HoareTotalProps\ \isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
\ \isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ conseq{\isacharunderscore}no{\isacharunderscore}aux{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ c\ Q{\isacharprime}{\isacharcomma}A{\isacharprime}{\isacharsemicolon}\isanewline
\ \ \ \ {\isasymforall}s{\isachardot}\ s\ {\isasymin}\ P\ {\isasymlongrightarrow}\ {\isacharparenleft}s{\isasymin}P{\isacharprime}\ {\isasymand}\ {\isacharparenleft}Q{\isacharprime}\ {\isasymsubseteq}\ Q{\isacharparenright}{\isasymand}\ {\isacharparenleft}A{\isacharprime}\ {\isasymsubseteq}\ A{\isacharparenright}{\isacharparenright}{\isasymrbrakk}\isanewline
\ \ {\isasymLongrightarrow}\isanewline
\ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseq\ {\isacharbrackleft}\isakeyword{where}\ P{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ P{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{and}\ Q{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ Q{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{and}\ A{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ A{\isacharprime}{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
If for example a specification for a "procedure pointer" parameter 
is in the precondition we can extract it with this rule%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ conseq{\isacharunderscore}exploit{\isacharunderscore}pre{\isacharcolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymforall}s\ {\isasymin}\ P{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}s{\isacharbraceright}\ {\isasyminter}\ P{\isacharparenright}\ c\ Q{\isacharcomma}A{\isasymrbrakk}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Conseq{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ clarify\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}s{\isacharbraceright}\ {\isasyminter}\ P{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\ \ \isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}Q{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\ \ \isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}A{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\ \ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ conseq{\isacharcolon}{\isachardoublequoteopen}{\isasymlbrakk}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ c\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ Z{\isacharparenright}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymforall}s{\isachardot}\ s\ {\isasymin}\ P\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymexists}\ Z{\isachardot}\ s{\isasymin}P{\isacharprime}\ Z\ {\isasymand}\ {\isacharparenleft}Q{\isacharprime}\ Z\ {\isasymsubseteq}\ Q{\isacharparenright}{\isasymand}\ {\isacharparenleft}A{\isacharprime}\ Z\ {\isasymsubseteq}\ A{\isacharparenright}{\isacharparenright}{\isasymrbrakk}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ Conseq{\isacharprime}{\isacharparenright}\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Lem{\isacharcolon}{\isachardoublequoteopen}{\isasymlbrakk}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ c\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ Z{\isacharparenright}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isasymexists}\ Z{\isachardot}\ s{\isasymin}P{\isacharprime}\ Z\ {\isasymand}\ {\isacharparenleft}Q{\isacharprime}\ Z\ {\isasymsubseteq}\ Q{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}A{\isacharprime}\ Z\ {\isasymsubseteq}\ A{\isacharparenright}{\isacharbraceright}{\isasymrbrakk}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}lem\ x\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}unfold\ lem{\isacharunderscore}def{\isacharparenright}\ \isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule\ conseq{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ LemAnno{\isacharcolon}\isanewline
\isakeyword{assumes}\ conseq{\isacharcolon}\ \ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isasymexists}Z{\isachardot}\ s{\isasymin}P{\isacharprime}\ Z\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ Q{\isacharprime}\ Z\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Q{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ A{\isacharprime}\ Z\ {\isasymlongrightarrow}\ t\ {\isasymin}\ A{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ lem{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ c\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}lem\ x\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Lem\ {\isacharbrackleft}OF\ lem{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ conseq\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ LemAnnoNoAbrupt{\isacharcolon}\isanewline
\isakeyword{assumes}\ conseq{\isacharcolon}\ \ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ \ {\isacharbraceleft}s{\isachardot}\ {\isasymexists}Z{\isachardot}\ s{\isasymin}P{\isacharprime}\ Z\ {\isasymand}\ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ Q{\isacharprime}\ Z\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Q{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ lem{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ c\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}lem\ x\ c{\isacharparenright}\ Q{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Lem\ {\isacharbrackleft}OF\ lem{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ conseq\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ TrivPost{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ c\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ Z{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ c\ UNIV{\isacharcomma}UNIV{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule\ conseq{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ TrivPostNoAbr{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ c\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ c\ UNIV{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule\ conseq{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ DynComConseq{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isasymexists}P{\isacharprime}\ Q{\isacharprime}\ A{\isacharprime}{\isachardot}\ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\ \isactrlesub P{\isacharprime}\ {\isacharparenleft}c\ s{\isacharparenright}\ Q{\isacharprime}{\isacharcomma}A{\isacharprime}\ {\isasymand}\ P\ {\isasymsubseteq}\ P{\isacharprime}\ {\isasymand}\ Q{\isacharprime}\ {\isasymsubseteq}\ Q\ {\isasymand}\ A{\isacharprime}\ {\isasymsubseteq}\ A{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\ \isactrlesub P\ DynCom\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoaret{\isachardot}DynCom{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ clarsimp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoaret{\isachardot}Conseq{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ clarsimp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ SpecAnno{\isacharcolon}\ \isanewline
\ \isakeyword{assumes}\ consequence{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}{\isasymexists}\ Z{\isachardot}\ s{\isasymin}P{\isacharprime}\ Z\ {\isasymand}\ {\isacharparenleft}Q{\isacharprime}\ Z\ {\isasymsubseteq}\ Q{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}A{\isacharprime}\ Z\ {\isasymsubseteq}\ A{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \isakeyword{assumes}\ spec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ {\isacharparenleft}c\ Z{\isacharparenright}\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \isakeyword{assumes}\ bdy{\isacharunderscore}constant{\isacharcolon}\ \ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ c\ Z\ {\isacharequal}\ c\ undefined{\isachardoublequoteclose}\isanewline
\ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}specAnno\ P{\isacharprime}\ c\ Q{\isacharprime}\ A{\isacharprime}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ spec\ bdy{\isacharunderscore}constant\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ {\isacharparenleft}c\ undefined{\isacharparenright}\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule{\isacharunderscore}tac\ x{\isacharequal}Z\ \isakeyword{in}\ allE{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule{\isacharunderscore}tac\ x{\isacharequal}Z\ \isakeyword{in}\ allE{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ consequence\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ specAnno{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule\ conseq{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ SpecAnno{\isacharprime}{\isacharcolon}\ \isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ \ {\isasymexists}\ Z{\isachardot}\ s{\isasymin}P{\isacharprime}\ Z\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ Q{\isacharprime}\ Z\ {\isasymlongrightarrow}\ \ t\ {\isasymin}\ Q{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ A{\isacharprime}\ Z\ {\isasymlongrightarrow}\ t\ {\isasymin}\ \ A{\isacharparenright}{\isacharbraceright}{\isacharsemicolon}\isanewline
\ \ \ {\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ {\isacharparenleft}c\ Z{\isacharparenright}\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ Z{\isacharparenright}{\isacharsemicolon}\isanewline
\ \ \ {\isasymforall}Z{\isachardot}\ c\ Z\ {\isacharequal}\ c\ undefined\isanewline
\ \ {\isasymrbrakk}\ {\isasymLongrightarrow}\isanewline
\ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}specAnno\ P{\isacharprime}\ c\ Q{\isacharprime}\ A{\isacharprime}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ only{\isacharcolon}\ subset{\isacharunderscore}iff\ {\isacharbrackleft}THEN\ sym{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule\ {\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ SpecAnno{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ assumption\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ SpecAnnoNoAbrupt{\isacharcolon}\ \isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ \ {\isasymexists}\ Z{\isachardot}\ s{\isasymin}P{\isacharprime}\ Z\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ Q{\isacharprime}\ Z\ {\isasymlongrightarrow}\ \ t\ {\isasymin}\ Q{\isacharparenright}{\isacharbraceright}{\isacharsemicolon}\isanewline
\ \ \ {\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ {\isacharparenleft}c\ Z{\isacharparenright}\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isacharsemicolon}\isanewline
\ \ \ {\isasymforall}Z{\isachardot}\ c\ Z\ {\isacharequal}\ c\ undefined\isanewline
\ \ {\isasymrbrakk}\ {\isasymLongrightarrow}\isanewline
\ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}specAnno\ P{\isacharprime}\ c\ Q{\isacharprime}\ {\isacharparenleft}{\isasymlambda}s{\isachardot}\ {\isacharbraceleft}{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ SpecAnno{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Skip{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ Q\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Skip\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoaret{\isachardot}Skip\ {\isacharbrackleft}THEN\ conseqPre{\isacharbrackright}{\isacharcomma}simp{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Basic{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}f\ s{\isacharparenright}\ {\isasymin}\ Q{\isacharbraceright}\ {\isasymLongrightarrow}\ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Basic\ f{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoaret{\isachardot}Basic\ {\isacharbrackleft}THEN\ conseqPre{\isacharbrackright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ BasicCond{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}b\ s\ {\isasymlongrightarrow}\ f\ s{\isasymin}Q{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymnot}\ b\ s\ {\isasymlongrightarrow}\ g\ s{\isasymin}Q{\isacharparenright}{\isacharbraceright}{\isasymrbrakk}\ {\isasymLongrightarrow}\isanewline
\ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Basic\ {\isacharparenleft}{\isasymlambda}s{\isachardot}\ if\ b\ s\ then\ f\ s\ else\ g\ s{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Basic{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Spec{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}{\isasymforall}t{\isachardot}\ {\isacharparenleft}s{\isacharcomma}t{\isacharparenright}\ {\isasymin}\ r\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Q{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymexists}t{\isachardot}\ {\isacharparenleft}s{\isacharcomma}t{\isacharparenright}\ {\isasymin}\ r{\isacharparenright}{\isacharbraceright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Spec\ r{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoaret{\isachardot}Spec\ {\isacharbrackleft}THEN\ conseqPre{\isacharbrackright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ SpecIf{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}b\ s\ {\isasymlongrightarrow}\ f\ s\ {\isasymin}\ Q{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymnot}\ b\ s\ {\isasymlongrightarrow}\ g\ s\ {\isasymin}\ Q\ {\isasymand}\ h\ s\ {\isasymin}\ Q{\isacharparenright}{\isacharbraceright}{\isasymrbrakk}\ {\isasymLongrightarrow}\isanewline
\ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Spec\ {\isacharparenleft}if{\isacharunderscore}rel\ b\ f\ g\ h{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Spec{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ if{\isacharunderscore}rel{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Seq\ {\isacharbrackleft}trans{\isacharcomma}\ intro{\isacharquery}{\isacharbrackright}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\isactrlsub {\isadigit{1}}\ R{\isacharcomma}A{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c\isactrlsub {\isadigit{2}}\ Q{\isacharcomma}A{\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Seq\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoaret{\isachardot}Seq{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ SeqSwap{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c{\isadigit{2}}\ Q{\isacharcomma}A{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c{\isadigit{1}}\ R{\isacharcomma}A{\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Seq\ c{\isadigit{1}}\ c{\isadigit{2}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ Seq{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ BSeq{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\isactrlsub {\isadigit{1}}\ R{\isacharcomma}A{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c\isactrlsub {\isadigit{2}}\ Q{\isacharcomma}A{\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}bseq\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}unfold\ bseq{\isacharunderscore}def{\isacharparenright}\ {\isacharparenleft}rule\ Seq{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Cond{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ wp{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}s{\isasymin}b\ {\isasymlongrightarrow}\ s{\isasymin}P\isactrlsub {\isadigit{1}}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}s{\isasymnotin}b\ {\isasymlongrightarrow}\ s{\isasymin}P\isactrlsub {\isadigit{2}}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}c{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{1}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}c{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\isactrlsub {\isadigit{2}}\ c\isactrlsub {\isadigit{2}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Cond\ b\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoaret{\isachardot}Cond\ {\isacharbrackleft}THEN\ conseqPre{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ deriv{\isacharunderscore}c{\isadigit{1}}\ \isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}s\ {\isasymin}\ b\ {\isasymlongrightarrow}\ s\ {\isasymin}\ P\isactrlsub {\isadigit{1}}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}s\ {\isasymnotin}\ b\ {\isasymlongrightarrow}\ s\ {\isasymin}\ P\isactrlsub {\isadigit{2}}{\isacharparenright}{\isacharbraceright}\ {\isasyminter}\ b{\isacharparenright}\ c\isactrlsub {\isadigit{1}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPre{\isacharparenright}\ blast\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ deriv{\isacharunderscore}c{\isadigit{2}}\ \isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}s\ {\isasymin}\ b\ {\isasymlongrightarrow}\ s\ {\isasymin}\ P\isactrlsub {\isadigit{1}}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}s\ {\isasymnotin}\ b\ {\isasymlongrightarrow}\ s\ {\isasymin}\ P\isactrlsub {\isadigit{2}}{\isacharparenright}{\isacharbraceright}\ {\isasyminter}\ {\isacharminus}\ b{\isacharparenright}\ c\isactrlsub {\isadigit{2}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPre{\isacharparenright}\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
\ {\isacharparenleft}insert\ wp{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ CondSwap{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isadigit{1}}\ c{\isadigit{1}}\ Q{\isacharcomma}A{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isadigit{2}}\ c{\isadigit{2}}\ Q{\isacharcomma}A{\isacharsemicolon}\ \isanewline
\ \ \ \ P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}s{\isasymin}b\ {\isasymlongrightarrow}\ s{\isasymin}P{\isadigit{1}}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}s{\isasymnotin}b\ {\isasymlongrightarrow}\ s{\isasymin}P{\isadigit{2}}{\isacharparenright}{\isacharbraceright}{\isasymrbrakk}\isanewline
\ \ \ {\isasymLongrightarrow}\ \isanewline
\ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Cond\ b\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ Cond{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Cond{\isacharprime}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}b\ {\isasymsubseteq}\ P{\isadigit{1}}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isacharminus}\ b\ {\isasymsubseteq}\ P{\isadigit{2}}{\isacharparenright}{\isacharbraceright}{\isacharsemicolon}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isadigit{1}}\ c{\isadigit{1}}\ Q{\isacharcomma}A{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isadigit{2}}\ c{\isadigit{2}}\ Q{\isacharcomma}A{\isasymrbrakk}\isanewline
\ \ \ {\isasymLongrightarrow}\ \isanewline
\ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Cond\ b\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ CondSwap{\isacharparenright}\ blast{\isacharplus}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ CondInv{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ wp{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ Q{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ inv{\isacharcolon}\ {\isachardoublequoteopen}Q\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}s{\isasymin}b\ {\isasymlongrightarrow}\ s{\isasymin}P\isactrlsub {\isadigit{1}}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}s{\isasymnotin}b\ {\isasymlongrightarrow}\ s{\isasymin}P\isactrlsub {\isadigit{2}}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}c{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{1}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}c{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\isactrlsub {\isadigit{2}}\ c\isactrlsub {\isadigit{2}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Cond\ b\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ wp\ inv\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}s{\isasymin}b\ {\isasymlongrightarrow}\ s{\isasymin}P\isactrlsub {\isadigit{1}}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}s{\isasymnotin}b\ {\isasymlongrightarrow}\ s{\isasymin}P\isactrlsub {\isadigit{2}}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ Cond\ {\isacharbrackleft}OF\ this\ deriv{\isacharunderscore}c{\isadigit{1}}\ deriv{\isacharunderscore}c{\isadigit{2}}{\isacharbrackright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ CondInv{\isacharprime}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ wp{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ I{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ inv{\isacharcolon}\ {\isachardoublequoteopen}I\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}s{\isasymin}b\ {\isasymlongrightarrow}\ s{\isasymin}P\isactrlsub {\isadigit{1}}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}s{\isasymnotin}b\ {\isasymlongrightarrow}\ s{\isasymin}P\isactrlsub {\isadigit{2}}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ wp{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}I\ {\isasymsubseteq}\ Q{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}c{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{1}}\ I{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}c{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\isactrlsub {\isadigit{2}}\ c\isactrlsub {\isadigit{2}}\ I{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Cond\ b\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ CondInv\ {\isacharbrackleft}OF\ wp\ inv\ deriv{\isacharunderscore}c{\isadigit{1}}\ deriv{\isacharunderscore}c{\isadigit{2}}{\isacharbrackright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Cond\ b\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharparenright}\ I{\isacharcomma}A{\isachardoublequoteclose}\ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ conseqPost\ {\isacharbrackleft}OF\ this\ wp{\isacharprime}\ subset{\isacharunderscore}refl{\isacharbrackright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ switchNil{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ Q\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\ \isactrlesub P\ {\isacharparenleft}switch\ v\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ Skip{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\ \isanewline
\isacommand{lemma}\isamarkupfalse%
\ switchCons{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}v\ s\ {\isasymin}\ V\ {\isasymlongrightarrow}\ s\ {\isasymin}\ P\isactrlsub {\isadigit{1}}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}v\ s\ {\isasymnotin}\ V\ {\isasymlongrightarrow}\ s\ {\isasymin}\ P\isactrlsub {\isadigit{2}}{\isacharparenright}{\isacharbraceright}{\isacharsemicolon}\ \isanewline
\ \ \ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\ \isactrlesub P\isactrlsub {\isadigit{1}}\ c\ Q{\isacharcomma}A{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\ \isactrlesub P\isactrlsub {\isadigit{2}}\ {\isacharparenleft}switch\ v\ vs{\isacharparenright}\ Q{\isacharcomma}A{\isasymrbrakk}\isanewline
{\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\ \isactrlesub P\ {\isacharparenleft}switch\ v\ {\isacharparenleft}{\isacharparenleft}V{\isacharcomma}c{\isacharparenright}{\isacharhash}vs{\isacharparenright}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ Cond{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\ \isanewline
\isacommand{lemma}\isamarkupfalse%
\ Guard{\isacharcolon}\isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}P\ {\isasymsubseteq}\ g\ {\isasyminter}\ R{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c\ Q{\isacharcomma}A{\isasymrbrakk}\ \isanewline
\ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Guard\ f\ g\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ HoareTotalDef{\isachardot}Guard\ {\isacharbrackleft}THEN\ conseqPre{\isacharcomma}\ of\ {\isacharunderscore}\ {\isacharunderscore}\ {\isacharunderscore}\ {\isacharunderscore}\ R{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule\ conseqPre{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ GuardSwap{\isacharcolon}\isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c\ Q{\isacharcomma}A{\isacharsemicolon}\ P\ {\isasymsubseteq}\ g\ {\isasyminter}\ R{\isasymrbrakk}\ \isanewline
\ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Guard\ f\ g\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ Guard{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Guarantee{\isacharcolon}\isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ s\ {\isasymin}\ g\ {\isasymlongrightarrow}\ s\ {\isasymin}\ R{\isacharbraceright}{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c\ Q{\isacharcomma}A{\isacharsemicolon}\ f\ {\isasymin}\ F{\isasymrbrakk}\ \isanewline
\ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Guard\ f\ g\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Guarantee\ {\isacharbrackleft}THEN\ conseqPre{\isacharcomma}\ of\ {\isacharunderscore}\ {\isacharunderscore}\ {\isacharunderscore}\ {\isacharunderscore}\ {\isacharunderscore}\ {\isachardoublequoteopen}{\isacharbraceleft}s{\isachardot}\ s\ {\isasymin}\ g\ {\isasymlongrightarrow}\ s\ {\isasymin}\ R{\isacharbraceright}{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ \ assumption\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}erule\ conseqPre{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ GuaranteeSwap{\isacharcolon}\isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c\ Q{\isacharcomma}A{\isacharsemicolon}\ P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ s\ {\isasymin}\ g\ {\isasymlongrightarrow}\ s\ {\isasymin}\ R{\isacharbraceright}{\isacharsemicolon}\ f\ {\isasymin}\ F{\isasymrbrakk}\ \isanewline
\ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Guard\ f\ g\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ Guarantee{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ GuardStrip{\isacharcolon}\isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}P\ {\isasymsubseteq}\ R{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c\ Q{\isacharcomma}A{\isacharsemicolon}\ f\ {\isasymin}\ F{\isasymrbrakk}\ \isanewline
\ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Guard\ f\ g\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Guarantee\ {\isacharbrackleft}THEN\ conseqPre{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ GuardStripSwap{\isacharcolon}\isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c\ Q{\isacharcomma}A{\isacharsemicolon}\ P\ {\isasymsubseteq}\ R{\isacharsemicolon}\ f\ {\isasymin}\ F{\isasymrbrakk}\ \isanewline
\ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Guard\ f\ g\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ GuardStrip{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ GuaranteeStrip{\isacharcolon}\isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}P\ {\isasymsubseteq}\ R{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c\ Q{\isacharcomma}A{\isacharsemicolon}\ f\ {\isasymin}\ F{\isasymrbrakk}\ \isanewline
\ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}guaranteeStrip\ f\ g\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}unfold\ guaranteeStrip{\isacharunderscore}def{\isacharparenright}\ {\isacharparenleft}rule\ GuardStrip{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ GuaranteeStripSwap{\isacharcolon}\isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c\ Q{\isacharcomma}A{\isacharsemicolon}\ P\ {\isasymsubseteq}\ R{\isacharsemicolon}\ f\ {\isasymin}\ F{\isasymrbrakk}\ \isanewline
\ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}guaranteeStrip\ f\ g\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}unfold\ guaranteeStrip{\isacharunderscore}def{\isacharparenright}\ {\isacharparenleft}rule\ GuardStrip{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ GuaranteeAsGuard{\isacharcolon}\isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}P\ {\isasymsubseteq}\ g\ {\isasyminter}\ R{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c\ Q{\isacharcomma}A{\isasymrbrakk}\ \isanewline
\ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ guaranteeStrip\ f\ g\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}unfold\ guaranteeStrip{\isacharunderscore}def{\isacharparenright}\ {\isacharparenleft}rule\ Guard{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ GuaranteeAsGuardSwap{\isacharcolon}\isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c\ Q{\isacharcomma}A{\isacharsemicolon}\ P\ {\isasymsubseteq}\ g\ {\isasyminter}\ R{\isasymrbrakk}\ \isanewline
\ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ guaranteeStrip\ f\ g\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ GuaranteeAsGuard{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ GuardsNil{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isasymLongrightarrow}\ \isanewline
\ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}guards\ {\isacharbrackleft}{\isacharbrackright}\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ GuardsCons{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Guard\ f\ g\ {\isacharparenleft}guards\ gs\ c{\isacharparenright}\ Q{\isacharcomma}A\ {\isasymLongrightarrow}\ \isanewline
\ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}guards\ {\isacharparenleft}{\isacharparenleft}f{\isacharcomma}g{\isacharparenright}{\isacharhash}gs{\isacharparenright}\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ GuardsConsGuaranteeStrip{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ guaranteeStrip\ f\ g\ {\isacharparenleft}guards\ gs\ c{\isacharparenright}\ Q{\isacharcomma}A\ {\isasymLongrightarrow}\ \isanewline
\ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}guards\ {\isacharparenleft}guaranteeStripPair\ f\ g{\isacharhash}gs{\isacharparenright}\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ guaranteeStripPair{\isacharunderscore}def\ guaranteeStrip{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ While{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ P{\isacharunderscore}I{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ I{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}body{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasyminter}\ I\ {\isasyminter}\ b{\isacharparenright}\ c\ {\isacharparenleft}{\isacharbraceleft}t{\isachardot}\ {\isacharparenleft}t{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymin}\ V{\isacharbraceright}\ {\isasyminter}\ I{\isacharparenright}{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ I{\isacharunderscore}Q{\isacharcolon}\ {\isachardoublequoteopen}I\ {\isasyminter}\ {\isacharminus}b\ {\isasymsubseteq}\ Q{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ wf{\isacharcolon}\ {\isachardoublequoteopen}wf\ V{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}whileAnno\ \ b\ I\ V\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ wf\ deriv{\isacharunderscore}body\ P{\isacharunderscore}I\ I{\isacharunderscore}Q\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}unfold\ whileAnno{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule\ conseqPrePost\ {\isacharbrackleft}OF\ HoareTotalDef{\isachardot}While{\isacharbrackright}{\isacharparenright}\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ WhileInvPost{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ P{\isacharunderscore}I{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ I{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ termi{\isacharunderscore}body{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}UNIV\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasyminter}\ I\ {\isasyminter}\ b{\isacharparenright}\ c\ {\isacharparenleft}{\isacharbraceleft}t{\isachardot}\ {\isacharparenleft}t{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymin}\ V{\isacharbraceright}\ {\isasyminter}\ P{\isacharparenright}{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}body{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}I\ {\isasyminter}\ b{\isacharparenright}\ c\ I{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ I{\isacharunderscore}Q{\isacharcolon}\ {\isachardoublequoteopen}I\ {\isasyminter}\ {\isacharminus}b\ {\isasymsubseteq}\ Q{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ wf{\isacharcolon}\ {\isachardoublequoteopen}wf\ V{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}whileAnno\ \ b\ I\ V\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasyminter}\ I\ {\isasyminter}\ b{\isacharparenright}\ c\ {\isacharparenleft}{\isacharbraceleft}t{\isachardot}\ {\isacharparenleft}t{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymin}\ V{\isacharbraceright}\ {\isasyminter}\ I{\isacharparenright}{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ \isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ {\isasymsigma}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ hoare{\isacharunderscore}sound\ {\isacharbrackleft}OF\ deriv{\isacharunderscore}body{\isacharbrackright}\ hoaret{\isacharunderscore}sound\ {\isacharbrackleft}OF\ termi{\isacharunderscore}body\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharcomma}\ of\ {\isasymsigma}{\isacharbrackright}{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasyminter}\ I\ {\isasyminter}\ b{\isacharparenright}\ c\ {\isacharparenleft}{\isacharbraceleft}t{\isachardot}\ {\isacharparenleft}t{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymin}\ V{\isacharbraceright}\ {\isasyminter}\ I{\isacharparenright}{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}fastforce\ simp\ add{\isacharcolon}\ cvalidt{\isacharunderscore}def\ validt{\isacharunderscore}def\ cvalid{\isacharunderscore}def\ valid{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasyminter}\ I\ {\isasyminter}\ b{\isacharparenright}\ c\ {\isacharparenleft}{\isacharbraceleft}t{\isachardot}\ {\isacharparenleft}t{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymin}\ V{\isacharbraceright}\ {\isasyminter}\ I{\isacharparenright}{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoaret{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ While\ {\isacharbrackleft}OF\ P{\isacharunderscore}I\ this\ I{\isacharunderscore}Q\ wf{\isacharbrackright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ {\isasyminter}\ b{\isacharparenright}\ c\ Q{\isacharcomma}A\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ {\isasyminter}\ b{\isacharparenright}\ {\isacharparenleft}Seq\ c\ {\isacharparenleft}Guard\ f\ Q\ Skip{\isacharparenright}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{oops}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
\isa{J} will be instantiated by tactic with \isa{gs{\isacharprime}\ {\isasyminter}\ I} for
  those guards that are not stripped.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ WhileAnnoG{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}guards\ gs\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}whileAnno\ \ b\ J\ V\ {\isacharparenleft}Seq\ c\ {\isacharparenleft}guards\ gs\ Skip{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ Q{\isacharcomma}A\ \isanewline
\ \ \ \ \ \ \ \ {\isasymLongrightarrow}\ \isanewline
\ \ \ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}whileAnnoG\ gs\ b\ I\ V\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ whileAnnoG{\isacharunderscore}def\ whileAnno{\isacharunderscore}def\ while{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
This form stems from \isa{strip{\isacharunderscore}guards\ F\ {\isacharparenleft}whileAnnoG\ gs\ b\ I\ V\ c{\isacharparenright}}%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ WhileNoGuard{\isacharprime}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ P{\isacharunderscore}I{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ I{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}body{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasyminter}\ I\ {\isasyminter}\ b{\isacharparenright}\ c\ {\isacharparenleft}{\isacharbraceleft}t{\isachardot}\ {\isacharparenleft}t{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymin}\ V{\isacharbraceright}\ {\isasyminter}\ I{\isacharparenright}{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ I{\isacharunderscore}Q{\isacharcolon}\ {\isachardoublequoteopen}I\ {\isasyminter}\ {\isacharminus}b\ {\isasymsubseteq}\ Q{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ wf{\isacharcolon}\ {\isachardoublequoteopen}wf\ V{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}whileAnno\ b\ I\ V\ {\isacharparenleft}Seq\ c\ Skip{\isacharparenright}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ While\ {\isacharbrackleft}OF\ P{\isacharunderscore}I\ {\isacharunderscore}\ I{\isacharunderscore}Q\ wf{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Seq{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ deriv{\isacharunderscore}body\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoaret{\isachardot}Skip{\isacharparenright}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ WhileAnnoFix{\isacharcolon}\isanewline
\isakeyword{assumes}\ consequence{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}{\isasymexists}\ Z{\isachardot}\ s{\isasymin}I\ Z\ {\isasymand}\ {\isacharparenleft}I\ Z\ {\isasyminter}\ {\isacharminus}b\ {\isasymsubseteq}\ Q{\isacharparenright}{\isacharparenright}\ {\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z\ {\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasyminter}\ I\ Z\ {\isasyminter}\ b{\isacharparenright}\ {\isacharparenleft}c\ Z{\isacharparenright}\ {\isacharparenleft}{\isacharbraceleft}t{\isachardot}\ {\isacharparenleft}t{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymin}\ V\ Z{\isacharbraceright}\ {\isasyminter}\ I\ Z{\isacharparenright}{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ bdy{\isacharunderscore}constant{\isacharcolon}\ \ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ c\ Z\ {\isacharequal}\ c\ undefined{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ wf{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ wf\ {\isacharparenleft}V\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}whileAnnoFix\ b\ I\ V\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ bdy\ bdy{\isacharunderscore}constant\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ bdy{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}Z{\isachardot}\ {\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasyminter}\ I\ Z\ {\isasyminter}\ b{\isacharparenright}\ {\isacharparenleft}c\ undefined{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isacharbraceleft}t{\isachardot}\ {\isacharparenleft}t{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymin}\ V\ Z{\isacharbraceright}\ {\isasyminter}\ I\ Z{\isacharparenright}{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule{\isacharunderscore}tac\ x{\isacharequal}Z\ \isakeyword{in}\ allE{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule{\isacharunderscore}tac\ x{\isacharequal}Z\ \isakeyword{in}\ allE{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}I\ Z{\isacharparenright}\ {\isacharparenleft}whileAnnoFix\ b\ I\ V\ c{\isacharparenright}\ {\isacharparenleft}I\ Z\ {\isasyminter}\ {\isacharminus}b{\isacharparenright}{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ rule\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}unfold\ whileAnnoFix{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoaret{\isachardot}While{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ wf\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ bdy{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseq{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ consequence\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ WhileAnnoFix{\isacharprime}{\isacharcolon}\isanewline
\isakeyword{assumes}\ consequence{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}{\isasymexists}\ Z{\isachardot}\ s{\isasymin}I\ Z\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ I\ Z\ {\isasyminter}\ {\isacharminus}b\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Q{\isacharparenright}{\isacharparenright}\ {\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z\ {\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasyminter}\ I\ Z\ {\isasyminter}\ b{\isacharparenright}\ {\isacharparenleft}c\ Z{\isacharparenright}\ {\isacharparenleft}{\isacharbraceleft}t{\isachardot}\ {\isacharparenleft}t{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymin}\ V\ Z{\isacharbraceright}\ {\isasyminter}\ I\ Z{\isacharparenright}{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ bdy{\isacharunderscore}constant{\isacharcolon}\ \ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ c\ Z\ {\isacharequal}\ c\ undefined{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ wf{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ wf\ {\isacharparenleft}V\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}whileAnnoFix\ b\ I\ V\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ WhileAnnoFix\ {\isacharbrackleft}OF\ {\isacharunderscore}\ bdy\ bdy{\isacharunderscore}constant\ wf{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ consequence\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ WhileAnnoGFix{\isacharcolon}\isanewline
\isakeyword{assumes}\ whileAnnoFix{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}guards\ gs\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}whileAnnoFix\ \ b\ J\ V\ {\isacharparenleft}{\isasymlambda}Z{\isachardot}\ {\isacharparenleft}Seq\ {\isacharparenleft}c\ Z{\isacharparenright}\ {\isacharparenleft}guards\ gs\ Skip{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}whileAnnoGFix\ gs\ b\ I\ V\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ whileAnnoFix\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ whileAnnoGFix{\isacharunderscore}def\ whileAnnoFix{\isacharunderscore}def\ while{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Bind{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ adapt{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ s\ {\isasymin}\ P{\isacharprime}\ s{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ s{\isacharparenright}\ {\isacharparenleft}c\ {\isacharparenleft}e\ s{\isacharparenright}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}bind\ e\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseq\ {\isacharbrackleft}\isakeyword{where}\ P{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ s\ {\isasymin}\ P{\isacharprime}\ Z{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{and}\ Q{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ Q{\isachardoublequoteclose}\ \isakeyword{and}\ \isanewline
A{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ A{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}unfold\ bind{\isacharunderscore}def{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ HoareTotalDef{\isachardot}DynCom{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ ballI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ clarsimp\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ conseqPre{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ \ {\isacharparenleft}rule\ c\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ blast\isanewline
\isacommand{using}\isamarkupfalse%
\ adapt\isanewline
\isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Block{\isacharcolon}\isanewline
\isakeyword{assumes}\ adapt{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ init\ s\ {\isasymin}\ P{\isacharprime}\ s{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ s{\isacharparenright}\ bdy\ {\isacharbraceleft}t{\isachardot}\ return\ s\ t\ {\isasymin}\ R\ s\ t{\isacharbraceright}{\isacharcomma}{\isacharbraceleft}t{\isachardot}\ return\ s\ t\ {\isasymin}\ A{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}R\ s\ t{\isacharparenright}\ {\isacharparenleft}c\ s\ t{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}block\ init\ bdy\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseq\ {\isacharbrackleft}\isakeyword{where}\ P{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ init\ s\ {\isasymin}\ P{\isacharprime}\ Z{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{and}\ Q{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ Q{\isachardoublequoteclose}\ \isakeyword{and}\ \isanewline
A{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ A{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{prefer}\isamarkupfalse%
\ {\isadigit{2}}\isanewline
\isacommand{using}\isamarkupfalse%
\ adapt\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ blast\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}unfold\ block{\isacharunderscore}def{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ HoareTotalDef{\isachardot}DynCom{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ballI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ clarsimp\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ R{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}t{\isachardot}\ return\ Z\ t\ {\isasymin}\ R\ Z\ t{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{in}\ SeqSwap\ {\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule{\isacharunderscore}tac\ \ P{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isacharprime}{\isachardot}\ {\isacharbraceleft}t{\isachardot}\ t{\isacharequal}Z{\isacharprime}\ {\isasymand}\ return\ Z\ t\ {\isasymin}\ R\ Z\ t{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{and}\ \isanewline
\ \ \ \ \ \ \ \ \ \ Q{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isacharprime}{\isachardot}\ Q{\isachardoublequoteclose}\ \isakeyword{and}\ A{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isacharprime}{\isachardot}\ A{\isachardoublequoteclose}\ \isakeyword{in}\ conseq{\isacharparenright}\isanewline
\isacommand{prefer}\isamarkupfalse%
\ {\isadigit{2}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ HoareTotalDef{\isachardot}DynCom{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}clarsimp{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ SeqSwap{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ \ {\isacharparenleft}rule\ c\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ Basic{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ clarsimp\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ R{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}t{\isachardot}\ return\ Z\ t\ {\isasymin}\ A{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{in}\ HoareTotalDef{\isachardot}Catch{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule{\isacharunderscore}tac\ R{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}i{\isachardot}\ i\ {\isasymin}\ P{\isacharprime}\ Z{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{in}\ Seq{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ \ {\isacharparenleft}rule\ Basic{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ \ clarsimp\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ simp\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ bdy\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ SeqSwap{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ Throw{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Basic{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ BlockSwap{\isacharcolon}\isanewline
\isakeyword{assumes}\ c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}R\ s\ t{\isacharparenright}\ {\isacharparenleft}c\ s\ t{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ s{\isacharparenright}\ bdy\ {\isacharbraceleft}t{\isachardot}\ return\ s\ t\ {\isasymin}\ R\ s\ t{\isacharbraceright}{\isacharcomma}{\isacharbraceleft}t{\isachardot}\ return\ s\ t\ {\isasymin}\ A{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ adapt{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ init\ s\ {\isasymin}\ P{\isacharprime}\ s{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}block\ init\ bdy\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ adapt\ bdy\ c\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ Block{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ BlockSpec{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ adapt{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isasymexists}Z{\isachardot}\ init\ s\ {\isasymin}\ P{\isacharprime}\ Z\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ Q{\isacharprime}\ Z\ {\isasymlongrightarrow}\ return\ s\ t\ {\isasymin}\ R\ s\ t{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ A{\isacharprime}\ Z\ {\isasymlongrightarrow}\ return\ s\ t\ {\isasymin}\ A{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}R\ s\ t{\isacharparenright}\ {\isacharparenleft}c\ s\ t{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ bdy\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ Z{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}block\ init\ bdy\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseq\ {\isacharbrackleft}\isakeyword{where}\ P{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ {\isacharbraceleft}s{\isachardot}\ init\ s\ {\isasymin}\ P{\isacharprime}\ Z\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ Q{\isacharprime}\ Z\ {\isasymlongrightarrow}\ return\ s\ t\ {\isasymin}\ R\ s\ t{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ A{\isacharprime}\ Z\ {\isasymlongrightarrow}\ return\ s\ t\ {\isasymin}\ A{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{and}\ Q{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ Q{\isachardoublequoteclose}\ \isakeyword{and}\ \isanewline
A{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ A{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{prefer}\isamarkupfalse%
\ {\isadigit{2}}\isanewline
\isacommand{using}\isamarkupfalse%
\ adapt\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ blast\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}unfold\ block{\isacharunderscore}def{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ HoareTotalDef{\isachardot}DynCom{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ballI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ clarsimp\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ R{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}t{\isachardot}\ return\ s\ t\ {\isasymin}\ R\ s\ t{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{in}\ SeqSwap\ {\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule{\isacharunderscore}tac\ \ P{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isacharprime}{\isachardot}\ {\isacharbraceleft}t{\isachardot}\ t{\isacharequal}Z{\isacharprime}\ {\isasymand}\ return\ s\ t\ {\isasymin}\ R\ s\ t{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{and}\ \isanewline
\ \ \ \ \ \ \ \ \ \ Q{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isacharprime}{\isachardot}\ Q{\isachardoublequoteclose}\ \isakeyword{and}\ A{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isacharprime}{\isachardot}\ A{\isachardoublequoteclose}\ \isakeyword{in}\ conseq{\isacharparenright}\isanewline
\isacommand{prefer}\isamarkupfalse%
\ {\isadigit{2}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ HoareTotalDef{\isachardot}DynCom{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}clarsimp{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ SeqSwap{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ \ {\isacharparenleft}rule\ c\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ Basic{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ clarsimp\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ R{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}t{\isachardot}\ return\ s\ t\ {\isasymin}\ A{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{in}\ HoareTotalDef{\isachardot}Catch{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule{\isacharunderscore}tac\ R{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}i{\isachardot}\ i\ {\isasymin}\ P{\isacharprime}\ Z{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{in}\ Seq{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ \ {\isacharparenleft}rule\ Basic{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ \ clarsimp\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ simp\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ conseq\ {\isacharbrackleft}OF\ bdy{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ clarsimp\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ blast\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ SeqSwap{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ Throw{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Basic{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Throw{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ A\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Throw\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoaret{\isachardot}Throw\ {\isacharbrackleft}THEN\ conseqPre{\isacharbrackright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemmas}\isamarkupfalse%
\ Catch\ {\isacharequal}\ hoaret{\isachardot}Catch\isanewline
\isacommand{lemma}\isamarkupfalse%
\ CatchSwap{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c\isactrlsub {\isadigit{2}}\ Q{\isacharcomma}A{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\isactrlsub {\isadigit{1}}\ Q{\isacharcomma}R{\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Catch\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoaret{\isachardot}Catch{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ raise{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ f\ s\ {\isasymin}\ A{\isacharbraceright}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ raise\ f\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ raise{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Seq{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ Basic{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}assumption{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Throw{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ subset{\isacharunderscore}refl{\isacharparenright}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ condCatch{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\isactrlsub {\isadigit{1}}\ Q{\isacharcomma}{\isacharparenleft}{\isacharparenleft}b\ {\isasyminter}\ R{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharminus}b\ {\isasyminter}\ A{\isacharparenright}{\isacharparenright}{\isacharsemicolon}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c\isactrlsub {\isadigit{2}}\ Q{\isacharcomma}A{\isasymrbrakk}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ condCatch\ c\isactrlsub {\isadigit{1}}\ b\ c\isactrlsub {\isadigit{2}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ condCatch{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Catch{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ \ assumption\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ CondSwap{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ \ \ {\isacharparenleft}assumption{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ hoaret{\isachardot}Throw{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ condCatchSwap{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c\isactrlsub {\isadigit{2}}\ Q{\isacharcomma}A{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\isactrlsub {\isadigit{1}}\ Q{\isacharcomma}{\isacharparenleft}{\isacharparenleft}b\ {\isasyminter}\ R{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}{\isacharminus}b\ {\isasyminter}\ A{\isacharparenright}{\isacharparenright}{\isasymrbrakk}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ condCatch\ c\isactrlsub {\isadigit{1}}\ b\ c\isactrlsub {\isadigit{2}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ condCatch{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcSpec{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ adapt{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isasymexists}Z{\isachardot}\ init\ s\ {\isasymin}\ P{\isacharprime}\ Z\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ Q{\isacharprime}\ Z\ {\isasymlongrightarrow}\ return\ s\ t\ {\isasymin}\ R\ s\ t{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ A{\isacharprime}\ Z\ {\isasymlongrightarrow}\ return\ s\ t\ {\isasymin}\ A{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}R\ s\ t{\isacharparenright}\ {\isacharparenleft}c\ s\ t{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ p{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ Call\ p\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ Z{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}call\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ adapt\ c\ p\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}unfold\ call{\isacharunderscore}def{\isacharparenright}\ \isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ BlockSpec{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcSpec{\isacharprime}{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ adapt{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isasymexists}Z{\isachardot}\ init\ s\ {\isasymin}\ P{\isacharprime}\ Z\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t\ {\isasymin}\ Q{\isacharprime}\ Z{\isachardot}\ return\ s\ t\ {\isasymin}\ R\ s\ t{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t\ {\isasymin}\ A{\isacharprime}\ Z{\isachardot}\ return\ s\ t\ {\isasymin}\ A{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}R\ s\ t{\isacharparenright}\ {\isacharparenleft}c\ s\ t{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ p{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ Call\ p\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ Z{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}call\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ProcSpec\ {\isacharbrackleft}OF\ {\isacharunderscore}\ c\ p{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}insert\ adapt{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ clarsimp\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}drule\ {\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ subsetD{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}clarsimp{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}Z\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcSpecNoAbrupt{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ adapt{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isasymexists}Z{\isachardot}\ init\ s\ {\isasymin}\ P{\isacharprime}\ Z\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ Q{\isacharprime}\ Z\ {\isasymlongrightarrow}\ return\ s\ t\ {\isasymin}\ R\ s\ t{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}R\ s\ t{\isacharparenright}\ {\isacharparenleft}c\ s\ t{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ p{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ Call\ p\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}call\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ProcSpec\ {\isacharbrackleft}OF\ {\isacharunderscore}\ c\ p{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ adapt\isanewline
\isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ FCall{\isacharcolon}\ \ \isanewline
{\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}call\ init\ p\ return\ {\isacharparenleft}{\isasymlambda}s\ t{\isachardot}\ c\ {\isacharparenleft}result\ t{\isacharparenright}{\isacharparenright}{\isacharparenright}\ Q{\isacharcomma}A\isanewline
{\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}fcall\ init\ p\ return\ result\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ fcall{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcRec{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}bodies{\isacharcolon}\ \ \isanewline
\ \ \ {\isachardoublequoteopen}{\isasymforall}p{\isasymin}Procs{\isachardot}\ \isanewline
\ \ \ \ {\isasymforall}{\isasymsigma}\ Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymunion}{\isacharparenleft}{\isasymUnion}q{\isasymin}Procs{\isachardot}\ {\isasymUnion}Z{\isachardot}\ \isanewline
\ \ \ \ \ \ \ {\isacharbraceleft}{\isacharparenleft}P\ q\ Z\ {\isasyminter}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}{\isacharparenleft}s{\isacharcomma}q{\isacharparenright}{\isacharcomma}\ {\isasymsigma}{\isacharcomma}p{\isacharparenright}\ {\isasymin}\ r{\isacharbraceright}{\isacharcomma}q{\isacharcomma}Q\ q\ Z{\isacharcomma}A\ q\ Z{\isacharparenright}{\isacharbraceright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ {\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasyminter}\ P\ p\ Z{\isacharparenright}\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}Q\ p\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ p\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ wf{\isacharcolon}\ {\isachardoublequoteopen}wf\ r{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ Procs{\isacharunderscore}defined{\isacharcolon}\ {\isachardoublequoteopen}Procs\ {\isasymsubseteq}\ dom\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymforall}p{\isasymin}Procs{\isachardot}\ {\isasymforall}Z{\isachardot}\ \ \isanewline
\ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub {\isacharparenleft}P\ p\ Z{\isacharparenright}\ Call\ p\ {\isacharparenleft}Q\ p\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ p\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}intro\ strip{\isacharparenright}\isanewline
\ \ \ \ \ {\isacharparenleft}rule\ HoareTotalDef{\isachardot}CallRec{\isacharprime}\ \isanewline
\ \ \ \ \ {\isacharbrackleft}OF\ {\isacharunderscore}\ \ Procs{\isacharunderscore}defined\ wf\ deriv{\isacharunderscore}bodies{\isacharbrackright}{\isacharcomma}\isanewline
\ \ \ \ \ simp{\isacharunderscore}all{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcRec{\isacharprime}{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ ctxt{\isacharcolon}\ \isanewline
\ \ \ {\isachardoublequoteopen}{\isasymTheta}{\isacharprime}{\isacharequal}{\isacharparenleft}{\isasymlambda}{\isasymsigma}\ p{\isachardot}\ {\isasymTheta}{\isasymunion}{\isacharparenleft}{\isasymUnion}q{\isasymin}Procs{\isachardot}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymUnion}Z{\isachardot}\ {\isacharbraceleft}{\isacharparenleft}P\ q\ Z\ {\isasyminter}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}{\isacharparenleft}s{\isacharcomma}q{\isacharparenright}{\isacharcomma}\ {\isasymsigma}{\isacharcomma}p{\isacharparenright}\ {\isasymin}\ r{\isacharbraceright}{\isacharcomma}q{\isacharcomma}Q\ q\ Z{\isacharcomma}A\ q\ Z{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}bodies{\isacharcolon}\ \ \ \isanewline
\ \ \ {\isachardoublequoteopen}{\isasymforall}p{\isasymin}Procs{\isachardot}\ \isanewline
\ \ \ \ {\isasymforall}{\isasymsigma}\ Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isacharprime}\ {\isasymsigma}\ p{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasyminter}\ P\ p\ Z{\isacharparenright}\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}Q\ p\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ p\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ wf{\isacharcolon}\ {\isachardoublequoteopen}wf\ r{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ Procs{\isacharunderscore}defined{\isacharcolon}\ {\isachardoublequoteopen}Procs\ {\isasymsubseteq}\ dom\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymforall}p{\isasymin}Procs{\isachardot}\ {\isasymforall}Z{\isachardot}\ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub {\isacharparenleft}P\ p\ Z{\isacharparenright}\ Call\ p\ {\isacharparenleft}Q\ p\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ p\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ ctxt\ deriv{\isacharunderscore}bodies\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule\ ProcRec\ {\isacharbrackleft}OF\ {\isacharunderscore}\ wf\ Procs{\isacharunderscore}defined{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\ \isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcRecList{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}bodies{\isacharcolon}\ \ \isanewline
\ \ \ {\isachardoublequoteopen}{\isasymforall}p{\isasymin}set\ Procs{\isachardot}\ \isanewline
\ \ \ \ {\isasymforall}{\isasymsigma}\ Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymunion}{\isacharparenleft}{\isasymUnion}q{\isasymin}set\ Procs{\isachardot}\ {\isasymUnion}Z{\isachardot}\ \isanewline
\ \ \ \ \ \ \ {\isacharbraceleft}{\isacharparenleft}P\ q\ Z\ {\isasyminter}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}{\isacharparenleft}s{\isacharcomma}q{\isacharparenright}{\isacharcomma}\ {\isasymsigma}{\isacharcomma}p{\isacharparenright}\ {\isasymin}\ r{\isacharbraceright}{\isacharcomma}q{\isacharcomma}Q\ q\ Z{\isacharcomma}A\ q\ Z{\isacharparenright}{\isacharbraceright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ {\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasyminter}\ P\ p\ Z{\isacharparenright}\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}Q\ p\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ p\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ wf{\isacharcolon}\ {\isachardoublequoteopen}wf\ r{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ dist{\isacharcolon}\ {\isachardoublequoteopen}distinct\ Procs{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ Procs{\isacharunderscore}defined{\isacharcolon}\ {\isachardoublequoteopen}set\ Procs\ {\isasymsubseteq}\ dom\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymforall}p{\isasymin}set\ Procs{\isachardot}\ {\isasymforall}Z{\isachardot}\ \ \isanewline
\ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub {\isacharparenleft}P\ p\ Z{\isacharparenright}\ Call\ p\ {\isacharparenleft}Q\ p\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ p\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ deriv{\isacharunderscore}bodies\ wf\ Procs{\isacharunderscore}defined\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ ProcRec{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ \ ProcRecSpecs{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}\ {\isasymin}\ Specs{\isachardot}\ \isanewline
\ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymunion}\ {\isacharparenleft}{\isacharparenleft}{\isasymlambda}{\isacharparenleft}P{\isacharcomma}q{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}{\isachardot}\ {\isacharparenleft}P\ {\isasyminter}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}{\isacharparenleft}s{\isacharcomma}q{\isacharparenright}{\isacharcomma}{\isacharparenleft}{\isasymsigma}{\isacharcomma}p{\isacharparenright}{\isacharparenright}\ {\isasymin}\ r{\isacharbraceright}{\isacharcomma}q{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}{\isacharparenright}\ {\isacharbackquote}\ Specs{\isacharparenright}\isanewline
\ \ \ \ \ \ {\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasyminter}\ P{\isacharparenright}\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ Q{\isacharcomma}A{\isacharsemicolon}\isanewline
\ \ \ \ wf\ r{\isacharsemicolon}\isanewline
\ \ \ \ {\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}\ {\isasymin}\ Specs{\isachardot}\ p\ {\isasymin}\ dom\ {\isasymGamma}{\isasymrbrakk}\isanewline
\ \ {\isasymLongrightarrow}\ {\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}\ {\isasymin}\ Specs{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ballI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ x{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rename{\isacharunderscore}tac\ x\ P\ p\ Q\ A{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoaret{\isachardot}CallRec{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcRec{\isadigit{1}}{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}body{\isacharcolon}\ \ \isanewline
\ \ \ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}\ Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymunion}{\isacharparenleft}{\isasymUnion}Z{\isachardot}\ {\isacharbraceleft}{\isacharparenleft}P\ Z\ {\isasyminter}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}{\isacharparenleft}s{\isacharcomma}p{\isacharparenright}{\isacharcomma}\ {\isasymsigma}{\isacharcomma}p{\isacharparenright}\ {\isasymin}\ r{\isacharbraceright}{\isacharcomma}p{\isacharcomma}Q\ Z{\isacharcomma}A\ Z{\isacharparenright}{\isacharbraceright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasyminter}\ P\ Z{\isacharparenright}\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}Q\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ wf{\isacharcolon}\ {\isachardoublequoteopen}wf\ r{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ p{\isacharunderscore}defined{\isacharcolon}\ {\isachardoublequoteopen}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ Z{\isacharparenright}\ Call\ p\ {\isacharparenleft}Q\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ deriv{\isacharunderscore}body\ wf\ p{\isacharunderscore}defined\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}p{\isasymin}{\isacharbraceleft}p{\isacharbraceright}{\isachardot}\ {\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ Z{\isacharparenright}\ Call\ p\ {\isacharparenleft}Q\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ProcRec\ {\isacharbrackleft}\isakeyword{where}\ \ A{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}p{\isachardot}\ A{\isachardoublequoteclose}\ \isakeyword{and}\ P{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}p{\isachardot}\ P{\isachardoublequoteclose}\ \isakeyword{and}\ Q{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}p{\isachardot}\ Q{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}all\isanewline
\ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcNoRec{\isadigit{1}}{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}body{\isacharcolon}\ \ \isanewline
\ \ \ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ Z{\isacharparenright}\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}Q\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ p{\isacharunderscore}defined{\isacharcolon}\ {\isachardoublequoteopen}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ Z{\isacharparenright}\ Call\ p\ {\isacharparenleft}Q\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}\ Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasyminter}\ P\ Z{\isacharparenright}\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}Q\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ conseqPre\ deriv{\isacharunderscore}body\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ p{\isacharunderscore}defined\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}\ Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymunion}{\isacharparenleft}{\isasymUnion}Z{\isachardot}\ {\isacharbraceleft}{\isacharparenleft}P\ Z\ {\isasyminter}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}{\isacharparenleft}s{\isacharcomma}p{\isacharparenright}{\isacharcomma}\ {\isasymsigma}{\isacharcomma}p{\isacharparenright}\ {\isasymin}\ {\isacharbraceleft}{\isacharbraceright}{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p{\isacharcomma}Q\ Z{\isacharcomma}A\ Z{\isacharparenright}{\isacharbraceright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasyminter}\ P\ Z{\isacharparenright}\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}Q\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ hoaret{\isacharunderscore}augment{\isacharunderscore}context{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ this\ \ \isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ ProcRec{\isadigit{1}}{\isacharparenright}\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ p{\isacharunderscore}defined{\isacharparenright}\ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcBody{\isacharcolon}\isanewline
\ \isakeyword{assumes}\ WP{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ P{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \isakeyword{assumes}\ deriv{\isacharunderscore}body{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ body\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \isakeyword{assumes}\ body{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ p\ {\isacharequal}\ Some\ body{\isachardoublequoteclose}\isanewline
\ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Call\ p\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPre\ {\isacharbrackleft}OF\ {\isacharunderscore}\ WP{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ProcNoRec{\isadigit{1}}\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharcomma}\ \isakeyword{where}\ P{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ P{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{and}\ Q{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ Q{\isachardoublequoteclose}\ \isakeyword{and}\ A{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ A{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\ \isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}insert\ body{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ simp\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ hoaret{\isacharunderscore}augment{\isacharunderscore}context\ {\isacharbrackleft}OF\ deriv{\isacharunderscore}body{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ blast\isanewline
\isacommand{apply}\isamarkupfalse%
\ fastforce\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ CallBody{\isacharcolon}\isanewline
\isakeyword{assumes}\ adapt{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ init\ s\ {\isasymin}\ P{\isacharprime}\ s{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ s{\isacharparenright}\ body\ {\isacharbraceleft}t{\isachardot}\ return\ s\ t\ {\isasymin}\ R\ s\ t{\isacharbraceright}{\isacharcomma}{\isacharbraceleft}t{\isachardot}\ return\ s\ t\ {\isasymin}\ A{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}R\ s\ t{\isacharparenright}\ {\isacharparenleft}c\ s\ t{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ body{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ p\ {\isacharequal}\ Some\ body{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}call\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}unfold\ call{\isacharunderscore}def{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Block\ {\isacharbrackleft}OF\ adapt\ {\isacharunderscore}\ c{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ProcBody\ {\isacharbrackleft}\isakeyword{where}\ {\isasymGamma}{\isacharequal}{\isasymGamma}{\isacharcomma}\ OF\ {\isacharunderscore}\ bdy\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ body{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemmas}\isamarkupfalse%
\ ProcModifyReturn\ {\isacharequal}\ HoareTotalProps{\isachardot}ProcModifyReturn\isanewline
\isacommand{lemmas}\isamarkupfalse%
\ ProcModifyReturnSameFaults\ {\isacharequal}\ HoareTotalProps{\isachardot}ProcModifyReturnSameFaults\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcModifyReturnNoAbr{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ spec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}call\ init\ p\ return{\isacharprime}\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ result{\isacharunderscore}conform{\isacharcolon}\isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ Modif\ {\isacharparenleft}init\ s{\isacharparenright}\ {\isasymlongrightarrow}\ {\isacharparenleft}return{\isacharprime}\ s\ t{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}return\ s\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ modifies{\isacharunderscore}spec{\isacharcolon}\ \ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}UNIV\isactrlesub \ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ Call\ p\ {\isacharparenleft}Modif\ {\isasymsigma}{\isacharparenright}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}call\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ ProcModifyReturn\ {\isacharbrackleft}OF\ spec\ result{\isacharunderscore}conform\ {\isacharunderscore}\ modifies{\isacharunderscore}spec{\isacharbrackright}{\isacharparenright}\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcModifyReturnNoAbrSameFaults{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ spec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}call\ init\ p\ return{\isacharprime}\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ result{\isacharunderscore}conform{\isacharcolon}\isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ Modif\ {\isacharparenleft}init\ s{\isacharparenright}\ {\isasymlongrightarrow}\ {\isacharparenleft}return{\isacharprime}\ s\ t{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}return\ s\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ modifies{\isacharunderscore}spec{\isacharcolon}\ \ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ Call\ p\ {\isacharparenleft}Modif\ {\isasymsigma}{\isacharparenright}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}call\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ ProcModifyReturnSameFaults\ {\isacharbrackleft}OF\ spec\ result{\isacharunderscore}conform\ {\isacharunderscore}\ modifies{\isacharunderscore}spec{\isacharbrackright}{\isacharparenright}\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ DynProc{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ adapt{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isasymexists}Z{\isachardot}\ init\ s\ {\isasymin}\ P{\isacharprime}\ s\ Z\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ Q{\isacharprime}\ s\ Z\ {\isasymlongrightarrow}\ \ return\ s\ t\ {\isasymin}\ R\ s\ t{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ A{\isacharprime}\ s\ Z\ {\isasymlongrightarrow}\ return\ s\ t\ {\isasymin}\ A{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}R\ s\ t{\isacharparenright}\ {\isacharparenleft}c\ s\ t{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ p{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s{\isasymin}\ P{\isachardot}\ {\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ s\ Z{\isacharparenright}\ Call\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharparenleft}Q{\isacharprime}\ s\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ s\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ dynCall\ init\ p\ return\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseq\ {\isacharbrackleft}\isakeyword{where}\ P{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ s\ {\isasymin}\ P{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{and}\ Q{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ Q{\isachardoublequoteclose}\ \isakeyword{and}\ A{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ A{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{prefer}\isamarkupfalse%
\ {\isadigit{2}}\isanewline
\isacommand{using}\isamarkupfalse%
\ adapt\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ blast\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}unfold\ dynCall{\isacharunderscore}def\ call{\isacharunderscore}def\ block{\isacharunderscore}def{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ HoareTotalDef{\isachardot}DynCom{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ clarsimp\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ HoareTotalDef{\isachardot}DynCom{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ clarsimp\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}frule\ in{\isacharunderscore}mono\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharcomma}\ OF\ adapt{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ clarsimp\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rename{\isacharunderscore}tac\ Z{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ R{\isacharequal}{\isachardoublequoteopen}Q{\isacharprime}\ Z\ Z{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{in}\ Seq{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ CatchSwap{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ \ {\isacharparenleft}rule\ SeqSwap{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ \ \ {\isacharparenleft}rule\ Throw{\isacharparenright}\ \isanewline
\isacommand{apply}\isamarkupfalse%
\ \ \ \ {\isacharparenleft}rule\ subset{\isacharunderscore}refl{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ \ {\isacharparenleft}rule\ Basic{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ \ {\isacharparenleft}rule\ subset{\isacharunderscore}refl{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule{\isacharunderscore}tac\ R{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}i{\isachardot}\ i\ {\isasymin}\ P{\isacharprime}\ Z\ Z{\isacharprime}{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{in}\ Seq{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ \ {\isacharparenleft}rule\ Basic{\isacharparenright}\ \isanewline
\isacommand{apply}\isamarkupfalse%
\ \ \ clarsimp\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ simp\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule{\isacharunderscore}tac\ Q{\isacharprime}{\isacharequal}{\isachardoublequoteopen}Q{\isacharprime}\ Z\ Z{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{and}\ A{\isacharprime}{\isacharequal}{\isachardoublequoteopen}A{\isacharprime}\ Z\ Z{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{in}\ conseqPost{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ p\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ \ \ clarsimp\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ \ simp\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ clarsimp\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule{\isacharunderscore}tac\ \ P{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isacharprime}{\isacharprime}{\isachardot}\ {\isacharbraceleft}t{\isachardot}\ t{\isacharequal}Z{\isacharprime}{\isacharprime}\ {\isasymand}\ return\ Z\ t\ {\isasymin}\ R\ Z\ t{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{and}\ \isanewline
\ \ \ \ \ \ \ \ \ \ Q{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isacharprime}{\isacharprime}{\isachardot}\ Q{\isachardoublequoteclose}\ \isakeyword{and}\ A{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isacharprime}{\isacharprime}{\isachardot}\ A{\isachardoublequoteclose}\ \isakeyword{in}\ conseq{\isacharparenright}\isanewline
\isacommand{prefer}\isamarkupfalse%
\ {\isadigit{2}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ HoareTotalDef{\isachardot}DynCom{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ clarsimp\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ SeqSwap{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}rule\ c\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Basic{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ clarsimp\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ DynProc{\isacharprime}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ adapt{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isasymexists}Z{\isachardot}\ init\ s\ {\isasymin}\ P{\isacharprime}\ s\ Z\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t\ {\isasymin}\ Q{\isacharprime}\ s\ Z{\isachardot}\ return\ s\ t\ {\isasymin}\ R\ s\ t{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t\ {\isasymin}\ A{\isacharprime}\ s\ Z{\isachardot}\ return\ s\ t\ {\isasymin}\ A{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}R\ s\ t{\isacharparenright}\ {\isacharparenleft}c\ s\ t{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ p{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s{\isasymin}\ P{\isachardot}\ {\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ s\ Z{\isacharparenright}\ Call\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharparenleft}Q{\isacharprime}\ s\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ s\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ dynCall\ init\ p\ return\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ adapt\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ {\isasymexists}Z{\isachardot}\ init\ s\ {\isasymin}\ P{\isacharprime}\ s\ Z\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ Q{\isacharprime}\ s\ Z\ {\isasymlongrightarrow}\ \ return\ s\ t\ {\isasymin}\ R\ s\ t{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ A{\isacharprime}\ s\ Z\ {\isasymlongrightarrow}\ return\ s\ t\ {\isasymin}\ A{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ this\ c\ p\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ DynProc{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ DynProcStaticSpec{\isacharcolon}\ \isanewline
\isakeyword{assumes}\ adapt{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ s\ {\isasymin}\ S\ {\isasymand}\ {\isacharparenleft}{\isasymexists}Z{\isachardot}\ init\ s\ {\isasymin}\ P{\isacharprime}\ Z\ \ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}{\isasymtau}{\isachardot}\ {\isasymtau}\ {\isasymin}\ Q{\isacharprime}\ Z\ {\isasymlongrightarrow}\ return\ s\ {\isasymtau}\ {\isasymin}\ R\ s\ {\isasymtau}{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}{\isasymtau}{\isachardot}\ {\isasymtau}\ {\isasymin}\ A{\isacharprime}\ Z\ {\isasymlongrightarrow}\ return\ s\ {\isasymtau}\ {\isasymin}\ A{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}R\ s\ t{\isacharparenright}\ {\isacharparenleft}c\ s\ t{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ spec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s{\isasymin}S{\isachardot}\ {\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ Call\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}dynCall\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ adapt\ \isacommand{have}\isamarkupfalse%
\ P{\isacharunderscore}S{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ S{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ {\isasyminter}\ S{\isacharparenright}\ {\isacharparenleft}dynCall\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ DynProc\ {\isacharbrackleft}\isakeyword{where}\ P{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}s\ Z{\isachardot}\ P{\isacharprime}\ Z{\isachardoublequoteclose}\ \isakeyword{and}\ Q{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}s\ Z{\isachardot}\ Q{\isacharprime}\ Z{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{and}\ A{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}s\ Z{\isachardot}\ A{\isacharprime}\ Z{\isachardoublequoteclose}{\isacharcomma}\ OF\ {\isacharunderscore}\ c{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ \ clarsimp\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}frule\ in{\isacharunderscore}mono\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharcomma}\ OF\ adapt{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ \ clarsimp\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ spec\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ clarsimp\isanewline
\ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPre{\isacharparenright}\ {\isacharparenleft}insert\ P{\isacharunderscore}S{\isacharcomma}blast{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ DynProcProcPar{\isacharcolon}\ \isanewline
\isakeyword{assumes}\ adapt{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ p\ s\ {\isacharequal}\ q\ {\isasymand}\ {\isacharparenleft}{\isasymexists}Z{\isachardot}\ init\ s\ {\isasymin}\ P{\isacharprime}\ Z\ \ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}{\isasymtau}{\isachardot}\ {\isasymtau}\ {\isasymin}\ Q{\isacharprime}\ Z\ {\isasymlongrightarrow}\ return\ s\ {\isasymtau}\ {\isasymin}\ R\ s\ {\isasymtau}{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}{\isasymtau}{\isachardot}\ {\isasymtau}\ {\isasymin}\ A{\isacharprime}\ Z\ {\isasymlongrightarrow}\ return\ s\ {\isasymtau}\ {\isasymin}\ A{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}R\ s\ t{\isacharparenright}\ {\isacharparenleft}c\ s\ t{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ spec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ Call\ q\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}dynCall\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ DynProcStaticSpec\ {\isacharbrackleft}\isakeyword{where}\ S{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}s{\isachardot}\ p\ s\ {\isacharequal}\ q{\isacharbraceright}{\isachardoublequoteclose}{\isacharcomma}simplified{\isacharcomma}\ OF\ adapt\ c{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ spec\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ DynProcProcParNoAbrupt{\isacharcolon}\ \isanewline
\isakeyword{assumes}\ adapt{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ p\ s\ {\isacharequal}\ q\ {\isasymand}\ {\isacharparenleft}{\isasymexists}Z{\isachardot}\ init\ s\ {\isasymin}\ P{\isacharprime}\ Z\ \ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}{\isasymtau}{\isachardot}\ {\isasymtau}\ {\isasymin}\ Q{\isacharprime}\ Z\ {\isasymlongrightarrow}\ return\ s\ {\isasymtau}\ {\isasymin}\ R\ s\ {\isasymtau}{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}R\ s\ t{\isacharparenright}\ {\isacharparenleft}c\ s\ t{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ spec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ Call\ q\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}dynCall\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ p\ s\ {\isacharequal}\ q\ {\isasymand}\ {\isacharparenleft}{\isasymexists}\ Z{\isachardot}\ init\ s\ {\isasymin}\ P{\isacharprime}\ Z\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ Q{\isacharprime}\ Z\ {\isasymlongrightarrow}\ return\ s\ t\ {\isasymin}\ R\ s\ t{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ {\isacharbraceleft}{\isacharbraceright}\ {\isasymlongrightarrow}\ return\ s\ t\ {\isasymin}\ A{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharquery}P{\isacharprime}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ \isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s{\isasymin}P{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ adapt\ \isacommand{obtain}\isamarkupfalse%
\ Z\ \isakeyword{where}\isanewline
\ \ \ \ \ \ Pre{\isacharcolon}\ {\isachardoublequoteopen}p\ s\ {\isacharequal}\ q\ {\isasymand}\ init\ s\ {\isasymin}\ P{\isacharprime}\ Z{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ \ \ adapt{\isacharunderscore}Norm{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isasymtau}{\isachardot}\ {\isasymtau}\ {\isasymin}\ Q{\isacharprime}\ Z\ {\isasymlongrightarrow}\ return\ s\ {\isasymtau}\ {\isasymin}\ R\ s\ {\isasymtau}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ \ adapt{\isacharunderscore}Norm\ \isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ Q{\isacharprime}\ Z\ {\isasymlongrightarrow}\ return\ s\ t\ {\isasymin}\ R\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}s{\isasymin}{\isacharquery}P{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ Pre\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{note}\isamarkupfalse%
\ P\ {\isacharequal}\ this\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ DynProcStaticSpec\ {\isacharbrackleft}\isakeyword{where}\ S{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}s{\isachardot}\ p\ s\ {\isacharequal}\ q{\isacharbraceright}{\isachardoublequoteclose}{\isacharcomma}simplified{\isacharcomma}\ OF\ P\ c{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}insert\ spec{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ DynProcModifyReturnNoAbr{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ to{\isacharunderscore}prove{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ ret{\isacharunderscore}nrm{\isacharunderscore}modif{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ {\isacharparenleft}Modif\ {\isacharparenleft}init\ s{\isacharparenright}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ modif{\isacharunderscore}clause{\isacharcolon}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}{\isasymforall}s\ {\isasymin}\ P{\isachardot}\ {\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}UNIV\isactrlesub \ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ Call\ {\isacharparenleft}p\ s{\isacharparenright}\ \ {\isacharparenleft}Modif\ {\isasymsigma}{\isacharparenright}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}dynCall\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ ret{\isacharunderscore}nrm{\isacharunderscore}modif\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ \ {\isasymin}\ {\isacharparenleft}Modif\ {\isacharparenleft}init\ s{\isacharparenright}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ iprover\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ ret{\isacharunderscore}nrm{\isacharunderscore}modif{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ {\isacharparenleft}Modif\ {\isacharparenleft}init\ s{\isacharparenright}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ ret{\isacharunderscore}abr{\isacharunderscore}modif{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ {\isacharbraceleft}{\isacharbraceright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ to{\isacharunderscore}prove\ ret{\isacharunderscore}nrm{\isacharunderscore}modif{\isacharprime}\ ret{\isacharunderscore}abr{\isacharunderscore}modif{\isacharprime}\ modif{\isacharunderscore}clause\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ dynProcModifyReturn{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcDynModifyReturnNoAbrSameFaults{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ to{\isacharunderscore}prove{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ ret{\isacharunderscore}nrm{\isacharunderscore}modif{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ {\isacharparenleft}Modif\ {\isacharparenleft}init\ s{\isacharparenright}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ modif{\isacharunderscore}clause{\isacharcolon}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}{\isasymforall}s\ {\isasymin}\ P{\isachardot}\ {\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isacharparenleft}Call\ {\isacharparenleft}p\ s{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}Modif\ {\isasymsigma}{\isacharparenright}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}dynCall\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ ret{\isacharunderscore}nrm{\isacharunderscore}modif\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ \ {\isasymin}\ {\isacharparenleft}Modif\ {\isacharparenleft}init\ s{\isacharparenright}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ iprover\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ ret{\isacharunderscore}nrm{\isacharunderscore}modif{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ {\isacharparenleft}Modif\ {\isacharparenleft}init\ s{\isacharparenright}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ ret{\isacharunderscore}abr{\isacharunderscore}modif{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ {\isacharbraceleft}{\isacharbraceright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ to{\isacharunderscore}prove\ ret{\isacharunderscore}nrm{\isacharunderscore}modif{\isacharprime}\ ret{\isacharunderscore}abr{\isacharunderscore}modif{\isacharprime}\ modif{\isacharunderscore}clause\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ dynProcModifyReturnSameFaults{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcProcParModifyReturn{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ q{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ p\ s\ {\isacharequal}\ q{\isacharbraceright}\ {\isasyminter}\ P{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ %
\isamarkupcmt{\isa{DynProcProcPar} introduces the same constraint as first conjunction in 
         \isa{P{\isacharprime}}, so the vcg can simplify it.%
}
\isanewline
\ \ \isakeyword{assumes}\ to{\isacharunderscore}prove{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ {\isacharparenleft}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ ret{\isacharunderscore}nrm{\isacharunderscore}modif{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ {\isacharparenleft}Modif\ {\isacharparenleft}init\ s{\isacharparenright}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ ret{\isacharunderscore}abr{\isacharunderscore}modif{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ {\isacharparenleft}ModifAbr\ {\isacharparenleft}init\ s{\isacharparenright}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ modif{\isacharunderscore}clause{\isacharcolon}\ \isanewline
\ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}UNIV\isactrlesub \ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isacharparenleft}Call\ q{\isacharparenright}\ {\isacharparenleft}Modif\ {\isasymsigma}{\isacharparenright}{\isacharcomma}{\isacharparenleft}ModifAbr\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}dynCall\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ to{\isacharunderscore}prove\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}s{\isachardot}\ p\ s\ {\isacharequal}\ q{\isacharbraceright}\ {\isasyminter}\ P{\isacharprime}{\isacharparenright}\ {\isacharparenleft}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPre{\isacharparenright}\ blast\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ this\ ret{\isacharunderscore}nrm{\isacharunderscore}modif\ \isanewline
\ \ \ \ \ \ \ ret{\isacharunderscore}abr{\isacharunderscore}modif\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}s{\isachardot}\ p\ s\ {\isacharequal}\ q{\isacharbraceright}\ {\isasyminter}\ P{\isacharprime}{\isacharparenright}\ {\isacharparenleft}dynCall\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ dynProcModifyReturn{\isacharparenright}\ {\isacharparenleft}insert\ modif{\isacharunderscore}clause{\isacharcomma}auto{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ this\ q\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPre{\isacharparenright}\ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcProcParModifyReturnSameFaults{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ q{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ p\ s\ {\isacharequal}\ q{\isacharbraceright}\ {\isasyminter}\ P{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ %
\isamarkupcmt{\isa{DynProcProcPar} introduces the same constraint as first conjunction in 
         \isa{P{\isacharprime}}, so the vcg can simplify it.%
}
\isanewline
\ \ \isakeyword{assumes}\ to{\isacharunderscore}prove{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ {\isacharparenleft}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ ret{\isacharunderscore}nrm{\isacharunderscore}modif{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ {\isacharparenleft}Modif\ {\isacharparenleft}init\ s{\isacharparenright}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ ret{\isacharunderscore}abr{\isacharunderscore}modif{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ {\isacharparenleft}ModifAbr\ {\isacharparenleft}init\ s{\isacharparenright}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ modif{\isacharunderscore}clause{\isacharcolon}\ \isanewline
\ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ Call\ q\ {\isacharparenleft}Modif\ {\isasymsigma}{\isacharparenright}{\isacharcomma}{\isacharparenleft}ModifAbr\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}dynCall\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ to{\isacharunderscore}prove\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}s{\isachardot}\ p\ s\ {\isacharequal}\ q{\isacharbraceright}\ {\isasyminter}\ P{\isacharprime}{\isacharparenright}\ {\isacharparenleft}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPre{\isacharparenright}\ blast\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ this\ ret{\isacharunderscore}nrm{\isacharunderscore}modif\ \isanewline
\ \ \ \ \ \ \ ret{\isacharunderscore}abr{\isacharunderscore}modif\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}s{\isachardot}\ p\ s\ {\isacharequal}\ q{\isacharbraceright}\ {\isasyminter}\ P{\isacharprime}{\isacharparenright}\ {\isacharparenleft}dynCall\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ dynProcModifyReturnSameFaults{\isacharparenright}\ {\isacharparenleft}insert\ modif{\isacharunderscore}clause{\isacharcomma}auto{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ this\ q\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPre{\isacharparenright}\ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcProcParModifyReturnNoAbr{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ q{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ p\ s\ {\isacharequal}\ q{\isacharbraceright}\ {\isasyminter}\ P{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ %
\isamarkupcmt{\isa{DynProcProcParNoAbrupt} introduces the same constraint as 
      first conjunction in \isa{P{\isacharprime}}, so the vcg can simplify it.%
}
\isanewline
\ \ \isakeyword{assumes}\ to{\isacharunderscore}prove{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ {\isacharparenleft}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ ret{\isacharunderscore}nrm{\isacharunderscore}modif{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ {\isacharparenleft}Modif\ {\isacharparenleft}init\ s{\isacharparenright}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ modif{\isacharunderscore}clause{\isacharcolon}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}UNIV\isactrlesub \ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isacharparenleft}Call\ q{\isacharparenright}\ {\isacharparenleft}Modif\ {\isasymsigma}{\isacharparenright}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}dynCall\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ to{\isacharunderscore}prove\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}s{\isachardot}\ p\ s\ {\isacharequal}\ q{\isacharbraceright}\ {\isasyminter}\ P{\isacharprime}{\isacharparenright}\ {\isacharparenleft}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPre{\isacharparenright}\ blast\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ this\ ret{\isacharunderscore}nrm{\isacharunderscore}modif\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}s{\isachardot}\ p\ s\ {\isacharequal}\ q{\isacharbraceright}\ {\isasyminter}\ P{\isacharprime}{\isacharparenright}\ {\isacharparenleft}dynCall\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ DynProcModifyReturnNoAbr{\isacharparenright}\ {\isacharparenleft}insert\ modif{\isacharunderscore}clause{\isacharcomma}auto{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ this\ q\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPre{\isacharparenright}\ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcProcParModifyReturnNoAbrSameFaults{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ q{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ {\isacharbraceleft}s{\isachardot}\ p\ s\ {\isacharequal}\ q{\isacharbraceright}\ {\isasyminter}\ P{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ %
\isamarkupcmt{\isa{DynProcProcParNoAbrupt} introduces the same constraint as 
      first conjunction in \isa{P{\isacharprime}}, so the vcg can simplify it.%
}
\isanewline
\ \ \isakeyword{assumes}\ to{\isacharunderscore}prove{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ {\isacharparenleft}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ ret{\isacharunderscore}nrm{\isacharunderscore}modif{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ {\isacharparenleft}Modif\ {\isacharparenleft}init\ s{\isacharparenright}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ modif{\isacharunderscore}clause{\isacharcolon}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isacharparenleft}Call\ q{\isacharparenright}\ {\isacharparenleft}Modif\ {\isasymsigma}{\isacharparenright}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}dynCall\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ to{\isacharunderscore}prove\ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}s{\isachardot}\ p\ s\ {\isacharequal}\ q{\isacharbraceright}\ {\isasyminter}\ P{\isacharprime}{\isacharparenright}\ {\isacharparenleft}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPre{\isacharparenright}\ blast\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ this\ ret{\isacharunderscore}nrm{\isacharunderscore}modif\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}s{\isachardot}\ p\ s\ {\isacharequal}\ q{\isacharbraceright}\ {\isasyminter}\ P{\isacharprime}{\isacharparenright}\ {\isacharparenleft}dynCall\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ ProcDynModifyReturnNoAbrSameFaults{\isacharparenright}\ {\isacharparenleft}insert\ modif{\isacharunderscore}clause{\isacharcomma}auto{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ this\ q\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPre{\isacharparenright}\ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ MergeGuards{\isacharunderscore}iff{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ merge{\isacharunderscore}guards\ c\ Q{\isacharcomma}A\ {\isacharequal}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ MergeGuardsI\ MergeGuardsD{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ CombineStrip{\isacharprime}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c{\isacharprime}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}strip{\isacharunderscore}triv{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ c{\isacharprime}{\isacharprime}\ UNIV{\isacharcomma}UNIV{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ c{\isacharprime}{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}c{\isacharprime}{\isacharprime}{\isacharequal}\ mark{\isacharunderscore}guards\ False\ {\isacharparenleft}strip{\isacharunderscore}guards\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}\ c{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ c{\isacharcolon}\ {\isachardoublequoteopen}merge{\isacharunderscore}guards\ c\ {\isacharequal}\ merge{\isacharunderscore}guards\ {\isacharparenleft}mark{\isacharunderscore}guards\ False\ c{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ deriv{\isacharunderscore}strip{\isacharunderscore}triv\ \isacommand{have}\isamarkupfalse%
\ deriv{\isacharunderscore}strip{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ c{\isacharprime}{\isacharprime}\ UNIV{\isacharcomma}UNIV{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ hoare{\isacharunderscore}augment{\isacharunderscore}context{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ deriv{\isacharunderscore}strip\ {\isacharbrackleft}simplified\ c{\isacharprime}{\isacharprime}{\isacharbrackright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ {\isacharparenleft}strip{\isacharunderscore}guards\ {\isacharparenleft}{\isacharminus}\ F{\isacharparenright}\ c{\isacharprime}{\isacharparenright}\ UNIV{\isacharcomma}UNIV{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ HoarePartialProps{\isachardot}MarkGuardsD{\isacharparenright}\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ deriv\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ c{\isacharprime}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ CombineStrip{\isacharparenright}\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ mark{\isacharunderscore}guards\ False\ c{\isacharprime}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ MarkGuardsI{\isacharparenright}\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ merge{\isacharunderscore}guards\ {\isacharparenleft}mark{\isacharunderscore}guards\ False\ c{\isacharprime}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ MergeGuardsI{\isacharparenright}\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ merge{\isacharunderscore}guards\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ c{\isacharparenright}\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ MergeGuardsD{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ CombineStrip{\isacharprime}{\isacharprime}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}{\isacharbraceleft}True{\isacharbraceright}\isactrlesub \ P\ c{\isacharprime}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}strip{\isacharunderscore}triv{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ c{\isacharprime}{\isacharprime}\ UNIV{\isacharcomma}UNIV{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ c{\isacharprime}{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}c{\isacharprime}{\isacharprime}{\isacharequal}\ mark{\isacharunderscore}guards\ False\ {\isacharparenleft}strip{\isacharunderscore}guards\ {\isacharparenleft}{\isacharbraceleft}False{\isacharbraceright}{\isacharparenright}\ c{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ c{\isacharcolon}\ {\isachardoublequoteopen}merge{\isacharunderscore}guards\ c\ {\isacharequal}\ merge{\isacharunderscore}guards\ {\isacharparenleft}mark{\isacharunderscore}guards\ False\ c{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ CombineStrip{\isacharprime}\ {\isacharbrackleft}OF\ deriv\ deriv{\isacharunderscore}strip{\isacharunderscore}triv\ {\isacharunderscore}\ c{\isacharbrackright}{\isacharparenright}\ \isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}insert\ c{\isacharprime}{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subgoal{\isacharunderscore}tac\ {\isachardoublequoteopen}{\isacharminus}\ {\isacharbraceleft}True{\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}False{\isacharbraceright}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ AsmUN{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\isasymUnion}Z{\isachardot}\ {\isacharbraceleft}{\isacharparenleft}P\ Z{\isacharcomma}\ p{\isacharcomma}\ Q\ Z{\isacharcomma}A\ Z{\isacharparenright}{\isacharbraceright}{\isacharparenright}\ {\isasymsubseteq}\ {\isasymTheta}\ \isanewline
\ \ {\isasymLongrightarrow}\ \isanewline
\ \ {\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ Z{\isacharparenright}\ {\isacharparenleft}Call\ p{\isacharparenright}\ {\isacharparenleft}Q\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ hoaret{\isachardot}Asm{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ hoaret{\isacharunderscore}to{\isacharunderscore}hoarep{\isacharprime}{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ Z{\isacharparenright}\ p\ {\isacharparenleft}Q\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ Z{\isacharparenright}\ {\isasymLongrightarrow}\ {\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ Z{\isacharparenright}\ p\ {\isacharparenleft}Q\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ total{\isacharunderscore}to{\isacharunderscore}partial{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ augment{\isacharunderscore}context{\isacharprime}{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymTheta}\ {\isasymsubseteq}\ {\isasymTheta}{\isacharprime}{\isacharsemicolon}\ {\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ Z{\isacharparenright}\ \ p\ {\isacharparenleft}Q\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ Z{\isacharparenright}{\isasymrbrakk}\ \isanewline
\ \ \ {\isasymLongrightarrow}\ {\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isacharprime}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ Z{\isacharparenright}\ p\ {\isacharparenleft}Q\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoaret{\isacharunderscore}augment{\isacharunderscore}context{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ augment{\isacharunderscore}emptyFaults{\isacharcolon}\isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ {\isacharparenleft}P\ Z{\isacharparenright}\ p\ {\isacharparenleft}Q\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ Z{\isacharparenright}{\isasymrbrakk}\ {\isasymLongrightarrow}\ \isanewline
\ \ \ \ {\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ Z{\isacharparenright}\ p\ {\isacharparenleft}Q\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ augment{\isacharunderscore}Faults{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ augment{\isacharunderscore}FaultsUNIV{\isacharcolon}\isanewline
\ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ Z{\isacharparenright}\ p\ {\isacharparenleft}Q\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ Z{\isacharparenright}{\isasymrbrakk}\ {\isasymLongrightarrow}\ \isanewline
\ \ \ \ {\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}UNIV\isactrlesub \ {\isacharparenleft}P\ Z{\isacharparenright}\ p\ {\isacharparenleft}Q\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ augment{\isacharunderscore}Faults{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ PostConjI\ {\isacharbrackleft}trans{\isacharbrackright}{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ R{\isacharcomma}B{\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ {\isacharparenleft}Q\ {\isasyminter}\ R{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ {\isasyminter}\ B{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ PostConjI{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ PostConjI{\isacharprime}\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ R{\isacharcomma}B{\isasymrbrakk}\ \isanewline
\ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ {\isacharparenleft}Q\ {\isasyminter}\ R{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ {\isasyminter}\ B{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ PostConjI{\isacharparenright}\ iprover{\isacharplus}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ PostConjE\ {\isacharbrackleft}consumes\ {\isadigit{1}}{\isacharbrackright}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ conj{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ {\isacharparenleft}Q\ {\isasyminter}\ R{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ {\isasyminter}\ B{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ E{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ R{\isacharcomma}B{\isasymrbrakk}\ {\isasymLongrightarrow}\ S{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}S{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ conj\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPost{\isacharparenright}\ blast{\isacharplus}\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ conj\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ R{\isacharcomma}B{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPost{\isacharparenright}\ blast{\isacharplus}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}S{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ E{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsubsection{Rules for Single-Step Proof \label{sec:hoare-isar}%
}
\isamarkuptrue%
%
\begin{isamarkuptext}%
We are now ready to introduce a set of Hoare rules to be used in
 single-step structured proofs in Isabelle/Isar.  

 \medskip Assertions of Hoare Logic may be manipulated in
 calculational proofs, with the inclusion expressed in terms of sets
 or predicates.  Reversed order is supported as well.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ annotateI\ {\isacharbrackleft}trans{\isacharbrackright}{\isacharcolon}\isanewline
{\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ anno\ Q{\isacharcomma}A{\isacharsemicolon}\ c\ {\isacharequal}\ anno{\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ annotate{\isacharunderscore}normI{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}anno{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub P\ anno\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ norm{\isacharunderscore}eq{\isacharcolon}\ {\isachardoublequoteopen}normalize\ c\ {\isacharequal}\ normalize\ anno{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ HoareTotalProps{\isachardot}NormalizeI\ {\isacharbrackleft}OF\ deriv{\isacharunderscore}anno{\isacharbrackright}\ norm{\isacharunderscore}eq\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\ \isactrlesub P\ normalize\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ NormalizeD\ {\isacharbrackleft}OF\ this{\isacharbrackright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ annotateWhile{\isacharcolon}\isanewline
{\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}whileAnnoG\ gs\ b\ I\ V\ c{\isacharparenright}\ Q{\isacharcomma}A{\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}while\ gs\ b\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ whileAnnoG{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ reannotateWhile{\isacharcolon}\isanewline
{\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}whileAnnoG\ gs\ b\ I\ V\ c{\isacharparenright}\ Q{\isacharcomma}A{\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}whileAnnoG\ gs\ b\ J\ V\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ whileAnnoG{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ reannotateWhileNoGuard{\isacharcolon}\isanewline
{\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}whileAnno\ b\ I\ V\ c{\isacharparenright}\ Q{\isacharcomma}A{\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}whileAnno\ b\ J\ V\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ whileAnno{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharbrackleft}trans{\isacharbrackright}\ {\isacharcolon}\ {\isachardoublequoteopen}P{\isacharprime}\ {\isasymsubseteq}\ P\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPre{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\ \isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharbrackleft}trans{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}Q\ {\isasymsubseteq}\ Q{\isacharprime}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharprime}{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPost{\isacharparenright}\ blast{\isacharplus}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharbrackleft}trans{\isacharbrackright}{\isacharcolon}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ P\ s{\isacharbraceright}\ c\ Q{\isacharcomma}A\ {\isasymLongrightarrow}\ {\isacharparenleft}{\isasymAnd}s{\isachardot}\ P{\isacharprime}\ s\ {\isasymlongrightarrow}\ P\ s{\isacharparenright}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ P{\isacharprime}\ s{\isacharbraceright}\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPre{\isacharparenright}\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharbrackleft}trans{\isacharbrackright}{\isacharcolon}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isacharparenleft}{\isasymAnd}s{\isachardot}\ P{\isacharprime}\ s\ {\isasymlongrightarrow}\ P\ s{\isacharparenright}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ P\ s{\isacharbraceright}\ c\ Q{\isacharcomma}A\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ P{\isacharprime}\ s{\isacharbraceright}\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPre{\isacharparenright}\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharbrackleft}trans{\isacharbrackright}{\isacharcolon}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ {\isacharbraceleft}s{\isachardot}\ Q\ s{\isacharbraceright}{\isacharcomma}A\ {\isasymLongrightarrow}\ {\isacharparenleft}{\isasymAnd}s{\isachardot}\ Q\ s\ {\isasymlongrightarrow}\ Q{\isacharprime}\ s{\isacharparenright}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ {\isacharbraceleft}s{\isachardot}\ Q{\isacharprime}\ s{\isacharbraceright}{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPost{\isacharparenright}\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharbrackleft}trans{\isacharbrackright}{\isacharcolon}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isacharparenleft}{\isasymAnd}s{\isachardot}\ Q\ s\ {\isasymlongrightarrow}\ Q{\isacharprime}\ s{\isacharparenright}\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ {\isacharbraceleft}s{\isachardot}\ Q\ s{\isacharbraceright}{\isacharcomma}A\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ {\isacharbraceleft}s{\isachardot}\ Q{\isacharprime}\ s{\isacharbraceright}{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPost{\isacharparenright}\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharbrackleft}intro{\isacharquery}{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Skip\ P{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ Skip{\isacharparenright}\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ CondInt\ {\isacharbrackleft}trans{\isacharcomma}intro{\isacharquery}{\isacharbrackright}{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ {\isasyminter}\ b{\isacharparenright}\ c{\isadigit{1}}\ Q{\isacharcomma}A{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ {\isasyminter}\ {\isacharminus}\ b{\isacharparenright}\ c{\isadigit{2}}\ Q{\isacharcomma}A{\isasymrbrakk}\isanewline
\ \ \ {\isasymLongrightarrow}\isanewline
\ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Cond\ b\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ Cond{\isacharparenright}\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\ \isanewline
\isacommand{lemma}\isamarkupfalse%
\ CondConj\ {\isacharbrackleft}trans{\isacharcomma}\ intro{\isacharquery}{\isacharbrackright}{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ P\ s\ {\isasymand}\ b\ s{\isacharbraceright}\ c{\isadigit{1}}\ Q{\isacharcomma}A{\isacharsemicolon}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ P\ s\ {\isasymand}\ {\isasymnot}\ b\ s{\isacharbraceright}\ c{\isadigit{2}}\ Q{\isacharcomma}A{\isasymrbrakk}\isanewline
\ \ \ {\isasymLongrightarrow}\ \isanewline
\ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlsub t\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ P\ s{\isacharbraceright}\ {\isacharparenleft}Cond\ {\isacharbraceleft}s{\isachardot}\ b\ s{\isacharbraceright}\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ Cond{\isacharparenright}\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\end{isabellebody}%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "root"
%%% End:
