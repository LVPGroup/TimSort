%
\begin{isabellebody}%
\setisabellecontext{TimSort}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ TimSort\isanewline
\ \ \isakeyword{imports}\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isacharslash}Simpl{\isacharslash}Vcg{\isachardoublequoteclose}\ Main\ {\isachardoublequoteopen}{\isachartilde}{\isachartilde}{\isacharslash}src{\isacharslash}HOL{\isacharslash}Library{\isacharslash}Code{\isacharunderscore}Target{\isacharunderscore}Numeral{\isachardoublequoteclose}\ {\isachardoublequoteopen}TimSortLemma{\isachardoublequoteclose}\ {\isachardoublequoteopen}TimSortProc{\isachardoublequoteclose}\ {\isachardoublequoteopen}GallopA{\isachardoublequoteclose}\isanewline
\isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
\isanewline
\isacommand{definition}\isamarkupfalse%
\ equal{\isacharunderscore}size\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}nat\ list\ {\isasymRightarrow}\ nat\ list\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
{\isachardoublequoteopen}equal{\isacharunderscore}size\ a\ b\ {\isacharequal}\ {\isacharparenleft}size\ a\ {\isacharequal}\ size\ b{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ invariant\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}nat\ list\ {\isasymRightarrow}\ nat\ list\ {\isasymRightarrow}\ int\ list\ {\isasymRightarrow}\ nat\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\ \isanewline
{\isachardoublequoteopen}invariant\ run{\isacharunderscore}len\ run{\isacharunderscore}base\ a\ stack{\isacharunderscore}size\ {\isasymequiv}\ \isanewline
{\isacharparenleft}size\ {\isacharparenleft}run{\isacharunderscore}base{\isacharparenright}\ {\isacharequal}\ size\ {\isacharparenleft}run{\isacharunderscore}len{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}size\ a\ {\isacharless}\ {\isadigit{1}}{\isadigit{2}}{\isadigit{0}}\ {\isasymlongrightarrow}\ \ size\ run{\isacharunderscore}len\ {\isacharequal}\ {\isadigit{4}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}size\ a\ {\isasymge}\ {\isadigit{1}}{\isadigit{2}}{\isadigit{0}}\ {\isasymand}\ size\ a\ {\isacharless}\ {\isadigit{1}}{\isadigit{5}}{\isadigit{4}}{\isadigit{2}}\ {\isasymlongrightarrow}\ \ size\ run{\isacharunderscore}len\ {\isacharequal}\ {\isadigit{9}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}size\ a\ {\isasymge}{\isadigit{1}}{\isadigit{5}}{\isadigit{4}}{\isadigit{2}}\ {\isasymand}\ size\ a\ {\isacharless}\ {\isadigit{1}}{\isadigit{1}}{\isadigit{9}}{\isadigit{1}}{\isadigit{5}}{\isadigit{1}}\ {\isasymlongrightarrow}\ \ size\ run{\isacharunderscore}len\ {\isacharequal}\ {\isadigit{1}}{\isadigit{8}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}size\ a\ {\isasymge}\ {\isadigit{1}}{\isadigit{1}}{\isadigit{9}}{\isadigit{1}}{\isadigit{5}}{\isadigit{1}}\ {\isasymand}\ size\ a\ {\isacharless}\ {\isadigit{2}}{\isadigit{9}}{\isadigit{1}}{\isadigit{7}}{\isadigit{1}}{\isadigit{9}}{\isadigit{6}}{\isadigit{4}}{\isadigit{9}}{\isadigit{6}}\ {\isasymlongrightarrow}\ \ size\ run{\isacharunderscore}len\ {\isacharequal}\ {\isadigit{3}}{\isadigit{9}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}size\ a\ {\isacharless}\ {\isadigit{2}}{\isadigit{9}}{\isadigit{1}}{\isadigit{7}}{\isadigit{1}}{\isadigit{9}}{\isadigit{6}}{\isadigit{4}}{\isadigit{9}}{\isadigit{6}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}run{\isacharunderscore}base{\isacharbang}{\isadigit{0}}\ {\isacharplus}\ {\isacharparenleft}sumn\ run{\isacharunderscore}len\ stack{\isacharunderscore}size{\isacharparenright}\ {\isasymle}\ size\ a{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}stack{\isacharunderscore}size\ {\isasymge}\ {\isadigit{0}}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}stack{\isacharunderscore}size\ {\isasymle}\ size\ run{\isacharunderscore}base{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymforall}i{\isachardot}\ {\isacharparenleft}{\isacharparenleft}i{\isasymge}{\isadigit{5}}\ {\isasymand}\ i{\isasymle}stack{\isacharunderscore}size{\isacharparenright}{\isasymlongrightarrow}{\isacharparenleft}elem{\isacharunderscore}inv\ run{\isacharunderscore}len\ {\isacharparenleft}stack{\isacharunderscore}size{\isacharminus}i{\isacharparenright}\ {\isadigit{1}}{\isadigit{6}}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}stack{\isacharunderscore}size\ {\isasymge}{\isadigit{4}}\ {\isasymlongrightarrow}\ elem{\isacharunderscore}bigger{\isacharunderscore}than{\isacharunderscore}next\ run{\isacharunderscore}len\ {\isacharparenleft}stack{\isacharunderscore}size{\isacharminus}{\isadigit{4}}{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}stack{\isacharunderscore}size\ {\isasymge}{\isadigit{3}}\ {\isasymlongrightarrow}\ elem{\isacharunderscore}larger{\isacharunderscore}than{\isacharunderscore}bound\ run{\isacharunderscore}len\ {\isacharparenleft}stack{\isacharunderscore}size{\isacharminus}{\isadigit{3}}{\isacharparenright}\ {\isadigit{1}}{\isadigit{6}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}stack{\isacharunderscore}size\ {\isasymge}{\isadigit{2}}\ {\isasymlongrightarrow}elem{\isacharunderscore}larger{\isacharunderscore}than{\isacharunderscore}bound\ run{\isacharunderscore}len\ {\isacharparenleft}stack{\isacharunderscore}size{\isacharminus}{\isadigit{2}}{\isacharparenright}\ {\isadigit{1}}{\isadigit{6}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}stack{\isacharunderscore}size\ {\isasymge}{\isadigit{1}}\ {\isasymlongrightarrow}elem{\isacharunderscore}larger{\isacharunderscore}than{\isacharunderscore}bound\ run{\isacharunderscore}len\ {\isacharparenleft}stack{\isacharunderscore}size{\isacharminus}{\isadigit{1}}{\isacharparenright}\ {\isadigit{1}}{\isacharparenright}\ {\isasymand}\ \isanewline
{\isacharparenleft}{\isasymforall}i{\isachardot}\ {\isacharparenleft}{\isacharparenleft}i{\isasymge}{\isadigit{0}}\ {\isasymand}\ i{\isacharless}stack{\isacharunderscore}size{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isasymlongrightarrow}{\isacharparenleft}run{\isacharunderscore}base{\isacharbang}i\ {\isacharplus}\ run{\isacharunderscore}len{\isacharbang}i\ {\isacharequal}\ run{\isacharunderscore}base{\isacharbang}{\isacharparenleft}i{\isacharplus}{\isadigit{1}}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}elem{\isacharunderscore}larger{\isacharunderscore}than{\isacharunderscore}bound\ run{\isacharunderscore}base\ {\isadigit{0}}\ {\isadigit{0}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ merge{\isacharunderscore}at{\isacharunderscore}impl{\isacharparenright}\ merge{\isacharunderscore}at{\isacharunderscore}spec{\isacharcolon}\ \isanewline
{\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isasymlbrace}{\isasymsigma}{\isachardot}\isanewline
{\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isacharequal}{\isadigit{2}}\ {\isasymlongrightarrow}\ {\isasymacute}i{\isacharequal}{\isasymacute}stack{\isacharunderscore}size{\isacharminus}{\isadigit{2}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isasymge}{\isadigit{3}}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymacute}i{\isacharequal}{\isasymacute}stack{\isacharunderscore}size{\isacharminus}{\isadigit{2}}\ {\isasymor}{\isasymacute}i{\isacharequal}{\isasymacute}stack{\isacharunderscore}size{\isacharminus}{\isadigit{3}}{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size\ {\isachargreater}\ {\isadigit{1}}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymacute}i{\isasymge}{\isadigit{0}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}a\ {\isasymnoteq}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}invariant\ {\isasymacute}run{\isacharunderscore}len\ {\isasymacute}run{\isacharunderscore}base\ {\isasymacute}a\ {\isasymacute}stack{\isacharunderscore}size{\isacharparenright}\ {\isasymrbrace}\ \isanewline
\ \ PROC\ merge{\isacharunderscore}at{\isacharparenleft}{\isasymacute}i{\isacharparenright}\ \isanewline
{\isasymlbrace}\ {\isacharparenleft}{\isasymacute}i\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup i{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymacute}run{\isacharunderscore}base{\isacharbang}{\isadigit{0}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup run{\isacharunderscore}base{\isacharbang}{\isadigit{0}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}size\ {\isasymacute}a\ {\isacharequal}\ size\ \isactrlbsup {\isasymsigma}\isactrlesup a{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup stack{\isacharunderscore}size\ {\isacharminus}\ {\isadigit{1}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}run{\isacharunderscore}len{\isacharbang}{\isasymacute}i\ {\isacharequal}\ {\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup run{\isacharunderscore}len{\isacharparenright}{\isacharbang}{\isacharparenleft}{\isasymacute}i{\isacharparenright}\ {\isacharplus}\ {\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup run{\isacharunderscore}len{\isacharbang}{\isacharparenleft}{\isasymacute}i{\isacharplus}{\isadigit{1}}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isasymand}\ \isanewline
{\isacharparenleft}{\isacharparenleft}{\isasymacute}i\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup stack{\isacharunderscore}size\ {\isacharminus}{\isadigit{3}}{\isacharparenright}{\isasymlongrightarrow}{\isacharparenleft}{\isasymacute}run{\isacharunderscore}len{\isacharbang}{\isacharparenleft}{\isasymacute}i{\isacharplus}{\isadigit{1}}{\isacharparenright}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup run{\isacharunderscore}len{\isacharbang}{\isacharparenleft}{\isasymacute}i{\isacharplus}{\isadigit{2}}{\isacharparenright}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymacute}run{\isacharunderscore}base{\isacharbang}{\isacharparenleft}{\isasymacute}i{\isacharplus}{\isadigit{1}}{\isacharparenright}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup run{\isacharunderscore}base{\isacharbang}{\isacharparenleft}{\isasymacute}i{\isacharplus}{\isadigit{2}}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}invariant\ {\isasymacute}run{\isacharunderscore}len\ {\isasymacute}run{\isacharunderscore}base\ {\isasymacute}a\ {\isasymacute}stack{\isacharunderscore}size{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}sumn\ {\isasymacute}run{\isacharunderscore}len\ {\isasymacute}stack{\isacharunderscore}size\ {\isacharequal}\ sumn\ \isactrlbsup {\isasymsigma}\isactrlesup run{\isacharunderscore}len\ \isactrlbsup {\isasymsigma}\isactrlesup stack{\isacharunderscore}size{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}run{\isacharunderscore}len{\isacharbang}{\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isacharminus}{\isadigit{1}}{\isacharparenright}\ {\isasymge}\ \isactrlbsup {\isasymsigma}\isactrlesup run{\isacharunderscore}len{\isacharbang}{\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup stack{\isacharunderscore}size{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isacharparenright}\ {\isasymrbrace}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{sorry}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ push{\isacharunderscore}run{\isacharunderscore}impl{\isacharparenright}\ push{\isacharunderscore}run{\isacharunderscore}spec{\isacharcolon}\isanewline
{\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isasymlbrace}{\isasymsigma}{\isachardot}\ \isanewline
{\isacharparenleft}{\isasymacute}run{\isacharunderscore}len{\isacharunderscore}i{\isachargreater}{\isadigit{0}}{\isacharparenright}{\isasymand}{\isacharparenleft}{\isasymacute}run{\isacharunderscore}len{\isacharunderscore}i{\isasymle}size\ {\isasymacute}a{\isacharparenright}{\isasymand}{\isacharparenleft}{\isasymacute}run{\isacharunderscore}base{\isacharunderscore}i{\isasymge}{\isadigit{0}}{\isacharparenright}{\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isachargreater}{\isadigit{0}}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymacute}run{\isacharunderscore}base{\isacharunderscore}i{\isacharequal}{\isasymacute}run{\isacharunderscore}base{\isacharbang}{\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isacharplus}{\isasymacute}run{\isacharunderscore}len{\isacharbang}{\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}run{\isacharunderscore}len{\isacharunderscore}i{\isacharplus}{\isasymacute}run{\isacharunderscore}base{\isacharunderscore}i\ {\isasymle}\ size\ {\isasymacute}a{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymforall}i{\isachardot}\ {\isacharparenleft}{\isacharparenleft}i{\isasymge}{\isadigit{3}}\ {\isasymand}\ i{\isasymle}{\isasymacute}stack{\isacharunderscore}size{\isacharparenright}{\isasymlongrightarrow}{\isacharparenleft}elem{\isacharunderscore}inv\ {\isasymacute}run{\isacharunderscore}len\ {\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isacharminus}i{\isacharparenright}\ {\isadigit{1}}{\isadigit{6}}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isasymge}{\isadigit{2}}\ {\isasymlongrightarrow}\ elem{\isacharunderscore}bigger{\isacharunderscore}than{\isacharunderscore}next\ {\isasymacute}run{\isacharunderscore}len\ {\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isacharminus}{\isadigit{2}}{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isasymge}{\isadigit{1}}\ {\isasymlongrightarrow}\ elem{\isacharunderscore}larger{\isacharunderscore}than{\isacharunderscore}bound\ {\isasymacute}run{\isacharunderscore}len\ {\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isacharminus}{\isadigit{1}}{\isacharparenright}\ {\isadigit{1}}{\isadigit{6}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isasymge}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}stack{\isacharunderscore}size{\isasymle}{\isacharparenleft}size\ {\isasymacute}run{\isacharunderscore}len{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}invariant\ {\isasymacute}run{\isacharunderscore}len\ {\isasymacute}run{\isacharunderscore}base\ {\isasymacute}a\ {\isasymacute}stack{\isacharunderscore}size{\isacharparenright}\isanewline
\ {\isasymrbrace}\isanewline
PROC\ push{\isacharunderscore}run{\isacharparenleft}{\isasymacute}run{\isacharunderscore}base{\isacharunderscore}i{\isacharcomma}\ {\isasymacute}run{\isacharunderscore}len{\isacharunderscore}i{\isacharparenright}\ \isanewline
{\isasymlbrace}\ {\isacharparenleft}{\isasymacute}run{\isacharunderscore}base{\isacharbang}{\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup stack{\isacharunderscore}size{\isacharparenright}\ {\isacharequal}\ {\isasymacute}run{\isacharunderscore}base{\isacharunderscore}i{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}run{\isacharunderscore}len{\isacharbang}{\isacharparenleft}\ \isactrlbsup {\isasymsigma}\isactrlesup stack{\isacharunderscore}size{\isacharparenright}\ {\isacharequal}\ {\isasymacute}run{\isacharunderscore}len{\isacharunderscore}i{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size\ {\isacharequal}\ \ \isactrlbsup {\isasymsigma}\isactrlesup stack{\isacharunderscore}size\ {\isacharplus}\ {\isadigit{1}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}run{\isacharunderscore}base{\isacharunderscore}i\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup run{\isacharunderscore}base{\isacharunderscore}i{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}run{\isacharunderscore}len{\isacharunderscore}i\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup run{\isacharunderscore}len{\isacharunderscore}i{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymforall}i{\isachardot}\ {\isacharparenleft}i{\isasymge}{\isadigit{0}}\ {\isasymand}\ i{\isacharless}{\isasymacute}stack{\isacharunderscore}size{\isacharminus}{\isadigit{1}}{\isacharparenright}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymacute}run{\isacharunderscore}len{\isacharbang}i\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup run{\isacharunderscore}len{\isacharbang}i{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymforall}i{\isachardot}\ {\isacharparenleft}i{\isasymge}{\isadigit{0}}\ {\isasymand}\ i{\isacharless}{\isasymacute}stack{\isacharunderscore}size{\isacharminus}{\isadigit{1}}{\isacharparenright}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymacute}run{\isacharunderscore}base{\isacharbang}i\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup run{\isacharunderscore}base{\isacharbang}i{\isacharparenright}{\isacharparenright}\ {\isasymand}\ \isanewline
{\isacharparenleft}invariant\ {\isasymacute}run{\isacharunderscore}len\ {\isasymacute}run{\isacharunderscore}base\ {\isasymacute}a\ {\isasymacute}stack{\isacharunderscore}size{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}size\ {\isasymacute}a\ {\isacharequal}\ size\ \isactrlbsup {\isasymsigma}\isactrlesup a{\isacharparenright}\ {\isasymrbrace}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{sorry}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ merge{\isacharunderscore}collapse{\isacharunderscore}impl{\isacharparenright}\ merge{\isacharunderscore}collapse{\isacharunderscore}spec{\isacharcolon}\isanewline
{\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isasymlbrace}{\isasymsigma}{\isachardot}\ {\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isachargreater}{\isadigit{0}}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isasymge}{\isadigit{4}}\ {\isasymlongrightarrow}\ elem{\isacharunderscore}inv\ {\isasymacute}run{\isacharunderscore}len\ {\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isacharminus}{\isadigit{4}}{\isacharparenright}\ {\isadigit{1}}{\isadigit{6}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isasymge}{\isadigit{3}}\ {\isasymlongrightarrow}\ elem{\isacharunderscore}bigger{\isacharunderscore}than{\isacharunderscore}next\ {\isasymacute}run{\isacharunderscore}len\ {\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isacharminus}{\isadigit{3}}{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}a\ {\isasymnoteq}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}invariant\ {\isasymacute}run{\isacharunderscore}len\ {\isasymacute}run{\isacharunderscore}base\ {\isasymacute}a\ {\isasymacute}stack{\isacharunderscore}size{\isacharparenright}\ {\isasymrbrace}\isanewline
PROC\ merge{\isacharunderscore}collapse{\isacharparenleft}{\isacharparenright}\ \isanewline
{\isasymlbrace}\ {\isacharparenleft}{\isasymforall}i{\isachardot}\ {\isacharparenleft}{\isacharparenleft}i{\isasymge}{\isadigit{3}}\ {\isasymand}\ i{\isasymle}{\isasymacute}stack{\isacharunderscore}size{\isacharparenright}{\isasymlongrightarrow}{\isacharparenleft}elem{\isacharunderscore}inv\ {\isasymacute}run{\isacharunderscore}len\ {\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isacharminus}i{\isacharparenright}\ {\isadigit{1}}{\isadigit{6}}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isasymge}{\isadigit{2}}\ {\isasymlongrightarrow}\ elem{\isacharunderscore}bigger{\isacharunderscore}than{\isacharunderscore}next\ {\isasymacute}run{\isacharunderscore}len\ {\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isacharminus}{\isadigit{2}}{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}sumn\ {\isasymacute}run{\isacharunderscore}len\ {\isasymacute}stack{\isacharunderscore}size\ {\isacharequal}\ sumn\ \isactrlbsup {\isasymsigma}\isactrlesup run{\isacharunderscore}len\ \isactrlbsup {\isasymsigma}\isactrlesup stack{\isacharunderscore}size\ {\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}run{\isacharunderscore}len{\isacharbang}{\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isacharminus}{\isadigit{1}}{\isacharparenright}\ {\isasymge}\ \isactrlbsup {\isasymsigma}\isactrlesup run{\isacharunderscore}len{\isacharbang}{\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup stack{\isacharunderscore}size{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size{\isachargreater}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}stack{\isacharunderscore}size\ {\isasymle}\ \isactrlbsup {\isasymsigma}\isactrlesup stack{\isacharunderscore}size{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}invariant\ {\isasymacute}run{\isacharunderscore}len\ {\isasymacute}run{\isacharunderscore}base\ {\isasymacute}a\ {\isasymacute}stack{\isacharunderscore}size{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}size\ {\isasymacute}a\ {\isacharequal}\ size\ \isactrlbsup {\isasymsigma}\isactrlesup a{\isacharparenright}{\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}run{\isacharunderscore}base{\isacharbang}{\isadigit{0}}\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup run{\isacharunderscore}base{\isacharbang}{\isadigit{0}}{\isacharparenright}\ {\isasymrbrace}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{sorry}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ merge{\isacharunderscore}force{\isacharunderscore}collapse{\isacharunderscore}impl{\isacharparenright}\ merge{\isacharunderscore}force{\isacharunderscore}collapse{\isacharunderscore}spec{\isacharcolon}\isanewline
{\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isasymlbrace}{\isasymsigma}{\isachardot}\ {\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size\ {\isachargreater}\ {\isadigit{0}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}a\ {\isasymnoteq}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}invariant\ {\isasymacute}run{\isacharunderscore}len\ {\isasymacute}run{\isacharunderscore}base\ {\isasymacute}a\ {\isasymacute}stack{\isacharunderscore}size{\isacharparenright}\ {\isasymrbrace}\isanewline
PROC\ merge{\isacharunderscore}force{\isacharunderscore}collapse{\isacharparenleft}{\isacharparenright}\isanewline
{\isasymlbrace}\ {\isacharparenleft}{\isasymacute}stack{\isacharunderscore}size\ {\isacharequal}\ {\isadigit{1}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}invariant\ {\isasymacute}run{\isacharunderscore}len\ {\isasymacute}run{\isacharunderscore}base\ {\isasymacute}a\ {\isasymacute}stack{\isacharunderscore}size{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}size\ {\isasymacute}a\ {\isacharequal}\ size\ \isactrlbsup {\isasymsigma}\isactrlesup a{\isacharparenright}\ {\isasymrbrace}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{sorry}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ reverse{\isacharunderscore}range{\isacharunderscore}impl{\isacharparenright}\ reverse{\isacharunderscore}range{\isacharunderscore}modifies{\isacharcolon}\isanewline
\ \ \isakeyword{shows}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ PROC\ reverse{\isacharunderscore}range{\isacharparenleft}{\isasymacute}array{\isacharcomma}\ {\isasymacute}lo{\isacharcomma}\ {\isasymacute}hi{\isacharcomma}\ {\isasymacute}ret{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ t\ may{\isacharunderscore}only{\isacharunderscore}modify{\isacharunderscore}globals\ {\isasymsigma}\ in\ {\isacharbrackleft}{\isacharbrackright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ HoarePartial{\isachardot}ProcRec{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}vcg\ spec{\isacharequal}modifies{\isacharparenright}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ reverse{\isacharunderscore}range{\isacharunderscore}impl{\isacharparenright}\ reverse{\isacharunderscore}range{\isacharunderscore}spec{\isacharcolon}\isanewline
{\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isasymlbrace}{\isasymsigma}{\isachardot}\ {\isacharparenleft}{\isasymacute}array\ {\isasymnoteq}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isasymand}{\isacharparenleft}{\isasymacute}lo\ {\isasymge}\ {\isadigit{0}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}lo\ {\isasymle}\ {\isasymacute}hi{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymacute}hi\ {\isasymle}\ size\ {\isasymacute}array{\isacharparenright}\ {\isasymrbrace}\isanewline
PROC\ reverse{\isacharunderscore}range{\isacharparenleft}{\isasymacute}array{\isacharcomma}\ {\isasymacute}lo{\isacharcomma}\ {\isasymacute}hi{\isacharcomma}\ {\isasymacute}ret{\isacharparenright}\isanewline
{\isasymlbrace}\ {\isacharparenleft}size\ {\isasymacute}ret\ {\isacharequal}\ size\ \isactrlbsup {\isasymsigma}\isactrlesup array{\isacharparenright}\ {\isasymrbrace}\isanewline
{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ HoarePartial{\isachardot}ProcNoRec{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ anno{\isacharequal}\ {\isachardoublequoteopen}TRY\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ IF\ {\isasymacute}hi\ {\isacharequal}\ {\isadigit{0}}\ THEN\ THROW\ ELSE\ {\isasymacute}hi\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}hi\ {\isacharminus}\ {\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ WHILE\ {\isasymacute}lo\ {\isacharless}\ {\isasymacute}hi\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ INV\ {\isasymlbrace}\ \ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup lo\ {\isasymle}\ {\isasymacute}lo{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup hi\ {\isachargreater}\ {\isasymacute}hi{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymacute}lo\ {\isasymle}\ {\isasymacute}hi\ {\isacharplus}\ {\isadigit{1}}{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymacute}lo\ {\isacharminus}\ \isactrlbsup {\isasymsigma}\isactrlesup lo\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup hi\ {\isacharminus}\ {\isadigit{1}}\ {\isacharminus}\ {\isasymacute}hi{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}\ {\isasymforall}i{\isachardot}\ i{\isasymge}\isactrlbsup {\isasymsigma}\isactrlesup lo\ {\isasymand}\ i{\isacharless}{\isasymacute}lo\ {\isasymlongrightarrow}\ {\isasymacute}array{\isacharbang}i\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup array{\isacharbang}{\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup lo{\isacharplus}\isactrlbsup {\isasymsigma}\isactrlesup hi{\isacharminus}i{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}\ {\isasymforall}i{\isachardot}\ i{\isacharless}\isactrlbsup {\isasymsigma}\isactrlesup hi\ {\isasymand}\ i{\isachargreater}{\isasymacute}hi\ {\isasymlongrightarrow}\ {\isasymacute}array{\isacharbang}i\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup array{\isacharbang}{\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup lo{\isacharplus}\isactrlbsup {\isasymsigma}\isactrlesup hi{\isacharminus}i{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}\ {\isasymforall}i{\isachardot}\ i{\isasymge}{\isasymacute}lo\ {\isasymand}\ i{\isasymle}{\isasymacute}hi\ \ {\isasymlongrightarrow}\ {\isasymacute}array{\isacharbang}i\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup array{\isacharbang}{\isacharparenleft}i{\isacharparenright}\ {\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}size\ {\isasymacute}array\ {\isacharequal}\ size\ \isactrlbsup {\isasymsigma}\isactrlesup array{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}\isactrlbsup {\isasymsigma}\isactrlesup hi\ {\isasymle}\ size\ \isactrlbsup {\isasymsigma}\isactrlesup array{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isasymrbrace}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ DO\ {\isasymacute}t\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}array\ {\isacharbang}\ {\isasymacute}lo{\isacharsemicolon}{\isacharsemicolon}\ {\isasymacute}array\ {\isacharbang}\ {\isasymacute}lo\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}array\ {\isacharbang}\ {\isasymacute}hi{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}array\ {\isacharbang}\ {\isasymacute}hi\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}t{\isacharsemicolon}{\isacharsemicolon}\ {\isasymacute}lo\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}lo\ {\isacharplus}\ {\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}hi\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}hi\ {\isacharminus}\ {\isadigit{1}}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ OD\ FI\ CATCH\ Skip\ END{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isasymacute}ret\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}array{\isachardoublequoteclose}\ \isakeyword{in}\ HoarePartial{\isachardot}annotateI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ vcg\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ linarith\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}intro\ conjI\ impI\ allI{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}all\isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}i{\isacharequal}loa{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}metis\ Suc{\isacharunderscore}diff{\isacharunderscore}Suc\ add{\isachardot}commute\ add{\isacharunderscore}diff{\isacharunderscore}cancel{\isacharunderscore}right{\isacharprime}\ diff{\isacharunderscore}Suc{\isacharunderscore}diff{\isacharunderscore}eq{\isadigit{1}}\ le{\isacharunderscore}add{\isacharunderscore}diff{\isacharunderscore}inverse\ nat{\isacharunderscore}less{\isacharunderscore}le{\isacharparenright}\isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}i{\isacharequal}loa{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ clarify\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ neq{\isadigit{0}}{\isacharunderscore}conv\ \isacommand{apply}\isamarkupfalse%
\ linarith\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}i{\isacharequal}hia{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ clarsimp\isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}metis\ Nat{\isachardot}add{\isacharunderscore}diff{\isacharunderscore}assoc\ Suc{\isacharunderscore}leI\ le{\isacharunderscore}add{\isacharunderscore}diff{\isacharunderscore}inverse{\isacharparenright}\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ clarsimp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ clarsimp\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ binary{\isacharunderscore}sort{\isacharunderscore}impl{\isacharparenright}\ binary{\isacharunderscore}sort{\isacharunderscore}modifies{\isacharcolon}\isanewline
\ \ \isakeyword{shows}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ PROC\ binary{\isacharunderscore}sort{\isacharparenleft}{\isasymacute}array{\isacharcomma}\ {\isasymacute}lo{\isacharcomma}\ {\isasymacute}hi{\isacharcomma}\ {\isasymacute}start{\isacharcomma}\ {\isasymacute}ret{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ t\ may{\isacharunderscore}only{\isacharunderscore}modify{\isacharunderscore}globals\ {\isasymsigma}\ in\ {\isacharbrackleft}{\isacharbrackright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ HoarePartial{\isachardot}ProcRec{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}vcg\ spec{\isacharequal}modifies{\isacharparenright}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{print{\isacharunderscore}locale}\isamarkupfalse%
\ binary{\isacharunderscore}sort{\isacharunderscore}impl\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ binary{\isacharunderscore}sort{\isacharunderscore}impl{\isacharparenright}\ binary{\isacharunderscore}sort{\isacharunderscore}spec{\isacharcolon}\ \isanewline
{\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isasymlbrace}{\isasymsigma}{\isachardot}\ {\isacharparenleft}{\isasymacute}array\ {\isasymnoteq}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymacute}lo\ {\isasymge}\ {\isadigit{0}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}lo\ {\isacharless}\ {\isasymacute}hi{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymacute}hi\ {\isasymle}\ size\ {\isasymacute}array{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}start\ {\isasymle}\ {\isasymacute}hi{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymacute}lo\ {\isasymle}\ {\isasymacute}start{\isacharparenright}\ \ {\isasymrbrace}\isanewline
PROC\ binary{\isacharunderscore}sort{\isacharparenleft}{\isasymacute}array{\isacharcomma}\ {\isasymacute}lo{\isacharcomma}\ {\isasymacute}hi{\isacharcomma}\ {\isasymacute}start{\isacharcomma}\ {\isasymacute}ret{\isacharparenright}\isanewline
{\isasymlbrace}\ \isanewline
{\isacharparenleft}size\ {\isasymacute}ret\ {\isacharequal}\ size\ \isactrlbsup {\isasymsigma}\isactrlesup array{\isacharparenright}\ \ {\isacharparenleft}{\isacharasterisk}\ these\ variables\ are\ not\ modified\ by\ the\ procedure{\isacharcomma}\ so\ the\ class\ invariant\ holds\ {\isacharasterisk}{\isacharparenright}\isanewline
{\isasymrbrace}\isanewline
{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ HoarePartial{\isachardot}ProcNoRec{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ anno{\isacharequal}{\isachardoublequoteopen}\isanewline
IF\ {\isasymacute}start\ {\isacharequal}\ {\isasymacute}lo\ THEN\ {\isasymacute}start\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}start\ {\isacharplus}\ {\isadigit{1}}\ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
WHILE\ {\isasymacute}start\ {\isacharless}\ {\isasymacute}hi\ \isanewline
\ INV\ {\isasymlbrace}\ {\isasymacute}start{\isasymge}{\isasymacute}lo\ {\isasymand}\ {\isasymacute}start{\isasymle}{\isasymacute}hi\ {\isasymand}\isanewline
\ \ \ \ \ \ \ size\ {\isasymacute}array\ {\isacharequal}\ size\ \isactrlbsup {\isasymsigma}\isactrlesup array\ {\isasymand}\ {\isasymacute}hi\ {\isasymle}\ size\ {\isasymacute}array\ {\isasymrbrace}\isanewline
\ DO\isanewline
\ {\isasymacute}pivot\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}array{\isacharbang}{\isasymacute}start{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ {\isasymacute}left\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}lo{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ {\isasymacute}right\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}start{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ WHILE\ {\isasymacute}left\ {\isacharless}\ {\isasymacute}right\isanewline
\ INV\ {\isasymlbrace}\ {\isasymacute}left{\isasymge}{\isadigit{0}}\ {\isasymand}\ {\isasymacute}left{\isasymle}{\isasymacute}right\ {\isasymand}\ {\isasymacute}right{\isasymle}{\isasymacute}start\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ {\isasymacute}left{\isasymle}{\isacharparenleft}{\isasymacute}right{\isacharplus}{\isasymacute}left{\isacharparenright}\ div\ {\isadigit{2}}\ {\isasymand}\ {\isasymacute}right{\isasymge}{\isacharparenleft}{\isasymacute}right{\isacharplus}{\isasymacute}left{\isacharparenright}\ div\ {\isadigit{2}}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}left\ {\isasymle}\ size\ {\isasymacute}array\ {\isasymand}\ size\ {\isasymacute}array\ {\isacharequal}\ size\ \isactrlbsup {\isasymsigma}\isactrlesup array\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}start{\isasymge}{\isasymacute}lo\ {\isasymand}\ {\isasymacute}start{\isacharless}{\isasymacute}hi\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isasymacute}hi\ {\isasymle}\ size\ {\isasymacute}array\ \ {\isasymrbrace}\isanewline
\ DO\isanewline
\ \ {\isasymacute}mid\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isacharparenleft}{\isasymacute}left{\isacharplus}{\isasymacute}right{\isacharparenright}\ div\ {\isadigit{2}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ IF\ {\isasymacute}pivot\ {\isacharless}\ {\isasymacute}array{\isacharbang}{\isasymacute}mid\ \isanewline
\ \ THEN\ \isanewline
\ \ \ \ {\isasymacute}right\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}mid\ \isanewline
\ \ ELSE\ \isanewline
\ \ \ \ {\isasymacute}left\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}mid{\isacharplus}{\isadigit{1}}\ \isanewline
\ \ FI\isanewline
\ OD{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ {\isasymacute}move\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}start\ {\isacharminus}\ {\isasymacute}left{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ {\isasymacute}array\ {\isacharcolon}{\isacharequal}{\isacharequal}\ list{\isacharunderscore}copy\ {\isasymacute}array\ {\isacharparenleft}{\isasymacute}left{\isacharplus}{\isadigit{1}}{\isacharparenright}\ {\isasymacute}array\ {\isasymacute}left\ {\isasymacute}move{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ {\isasymacute}array{\isacharbang}{\isasymacute}left\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}pivot{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ {\isasymacute}start\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}start\ {\isacharplus}\ {\isadigit{1}}\isanewline
OD{\isacharsemicolon}{\isacharsemicolon}\isanewline
{\isasymacute}ret\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}array{\isachardoublequoteclose}\ \isakeyword{in}\ HoarePartial{\isachardot}annotateI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ vcg\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ count{\isacharunderscore}run{\isacharunderscore}and{\isacharunderscore}make{\isacharunderscore}ascending{\isacharunderscore}impl{\isacharparenright}\ count{\isacharunderscore}run{\isacharunderscore}and{\isacharunderscore}make{\isacharunderscore}ascending{\isacharunderscore}modifies{\isacharcolon}\isanewline
\ \ \isakeyword{shows}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ PROC\ count{\isacharunderscore}run{\isacharunderscore}and{\isacharunderscore}make{\isacharunderscore}ascending{\isacharparenleft}{\isasymacute}array{\isacharcomma}\ {\isasymacute}lo{\isacharcomma}\ {\isasymacute}hi{\isacharcomma}\ {\isasymacute}ret{\isacharunderscore}value{\isacharcomma}\ {\isasymacute}ret{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ t\ may{\isacharunderscore}only{\isacharunderscore}modify{\isacharunderscore}globals\ {\isasymsigma}\ in\ {\isacharbrackleft}{\isacharbrackright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ HoarePartial{\isachardot}ProcRec{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}vcg\ spec{\isacharequal}modifies{\isacharparenright}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ count{\isacharunderscore}run{\isacharunderscore}and{\isacharunderscore}make{\isacharunderscore}ascending{\isacharunderscore}impl{\isacharparenright}\ count{\isacharunderscore}run{\isacharunderscore}and{\isacharunderscore}make{\isacharunderscore}ascending{\isacharunderscore}spec{\isacharcolon}\isanewline
{\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isasymlbrace}{\isasymsigma}{\isachardot}\ {\isacharparenleft}{\isasymacute}array\ {\isasymnoteq}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymacute}lo\ {\isasymge}\ {\isadigit{0}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}lo\ {\isacharless}\ {\isasymacute}hi{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymacute}hi\ {\isasymle}\ size\ {\isasymacute}array{\isacharparenright}\ {\isasymrbrace}\isanewline
PROC\ count{\isacharunderscore}run{\isacharunderscore}and{\isacharunderscore}make{\isacharunderscore}ascending{\isacharparenleft}{\isasymacute}array{\isacharcomma}\ {\isasymacute}lo{\isacharcomma}\ {\isasymacute}hi{\isacharcomma}\ {\isasymacute}ret{\isacharunderscore}value{\isacharcomma}\ {\isasymacute}ret{\isacharparenright}\isanewline
{\isasymlbrace}\ {\isacharparenleft}{\isasymacute}ret{\isacharunderscore}value\ {\isasymge}\ {\isadigit{0}}\ {\isasymand}\ {\isasymacute}ret{\isacharunderscore}value\ {\isasymle}\ \isactrlbsup {\isasymsigma}\isactrlesup hi\ {\isacharminus}\ \isactrlbsup {\isasymsigma}\isactrlesup lo{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}size\ {\isasymacute}ret\ {\isacharequal}\ size\ \isactrlbsup {\isasymsigma}\isactrlesup array{\isacharparenright}\ \isanewline
{\isasymrbrace}\isanewline
{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ HoarePartial{\isachardot}ProcNoRec{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}hoare{\isacharunderscore}rule\ anno{\isacharequal}{\isachardoublequoteopen}\ {\isasymacute}run{\isacharunderscore}hi\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}lo\ {\isacharplus}\ {\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ TRY\ IF\ {\isasymacute}run{\isacharunderscore}hi\ {\isacharequal}\ {\isasymacute}hi\ THEN\ {\isasymacute}ret{\isacharunderscore}value{\isacharcolon}{\isacharequal}{\isacharequal}{\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}{\isasymacute}ret\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}array{\isacharsemicolon}{\isacharsemicolon}\ THROW\ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IF\ {\isasymacute}array\ {\isacharbang}\ {\isasymacute}run{\isacharunderscore}hi\ {\isacharless}\ {\isasymacute}array\ {\isacharbang}\ {\isasymacute}lo\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ THEN\ {\isasymacute}run{\isacharunderscore}hi\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}run{\isacharunderscore}hi\ {\isacharplus}\ {\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WHILE\ {\isasymacute}run{\isacharunderscore}hi\ {\isacharless}\ {\isasymacute}hi\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}array\ {\isacharbang}\ {\isasymacute}run{\isacharunderscore}hi\ {\isacharless}\ {\isasymacute}array\ {\isacharbang}\ {\isacharparenleft}{\isasymacute}run{\isacharunderscore}hi\ {\isacharminus}\ {\isadigit{1}}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ INV\ {\isasymlbrace}\ {\isasymacute}lo{\isacharless}{\isasymacute}run{\isacharunderscore}hi\ {\isasymand}\ {\isasymacute}run{\isacharunderscore}hi{\isasymle}{\isasymacute}hi\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ size\ {\isasymacute}array\ {\isacharequal}\ size\ \isactrlbsup {\isasymsigma}\isactrlesup array\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isactrlbsup {\isasymsigma}\isactrlesup array{\isasymnoteq}{\isacharbrackleft}{\isacharbrackright}\ {\isasymand}\ {\isasymacute}hi\ {\isasymle}\ size\ \isactrlbsup {\isasymsigma}\isactrlesup array\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}lo\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup lo\ {\isasymand}\ {\isasymacute}hi\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup hi{\isasymrbrace}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DO\ {\isasymacute}run{\isacharunderscore}hi\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}run{\isacharunderscore}hi\ {\isacharplus}\ {\isadigit{1}}\ OD{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}array\ {\isacharcolon}{\isacharequal}{\isacharequal}\ CALL\ reverse{\isacharunderscore}range{\isacharparenleft}{\isasymacute}array{\isacharcomma}\ {\isasymacute}lo{\isacharcomma}\ {\isasymacute}run{\isacharunderscore}hi{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ELSE\ {\isasymacute}run{\isacharunderscore}hi\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}run{\isacharunderscore}hi\ {\isacharplus}\ {\isadigit{1}}{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WHILE\ {\isasymacute}run{\isacharunderscore}hi\ {\isacharless}\ {\isasymacute}hi\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}array\ {\isacharbang}\ {\isacharparenleft}{\isasymacute}run{\isacharunderscore}hi\ {\isacharminus}\ {\isadigit{1}}{\isacharparenright}\ {\isasymle}\ {\isasymacute}array\ {\isacharbang}\ {\isasymacute}run{\isacharunderscore}hi\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ INV\ {\isasymlbrace}\ {\isasymacute}lo{\isacharless}{\isasymacute}run{\isacharunderscore}hi\ {\isasymand}\ {\isasymacute}run{\isacharunderscore}hi{\isasymle}{\isasymacute}hi\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ size\ {\isasymacute}array\ {\isacharequal}\ size\ \isactrlbsup {\isasymsigma}\isactrlesup array\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}lo\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup lo\ {\isasymand}\ {\isasymacute}hi\ {\isacharequal}\ \isactrlbsup {\isasymsigma}\isactrlesup hi{\isasymrbrace}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DO\ {\isasymacute}run{\isacharunderscore}hi\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}run{\isacharunderscore}hi\ {\isacharplus}\ {\isadigit{1}}\ OD\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FI{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}ret{\isacharunderscore}value\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}run{\isacharunderscore}hi\ {\isacharminus}\ {\isasymacute}lo{\isacharsemicolon}{\isacharsemicolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymacute}ret\ {\isacharcolon}{\isacharequal}{\isacharequal}\ {\isasymacute}array\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ CATCH\ SKIP\ END{\isachardoublequoteclose}\ \isakeyword{in}\ HoarePartial{\isachardot}annotateI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ vcg\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ sumn{\isacharunderscore}equal{\isacharcolon}{\isachardoublequoteopen}{\isasymforall}i{\isachardot}\ i{\isasymge}{\isadigit{0}}\ {\isasymand}\ i{\isacharless}n{\isasymlongrightarrow}\ xs{\isacharbang}i{\isacharequal}ys{\isacharbang}i\ {\isasymLongrightarrow}\ sumn\ xs\ n\ {\isacharequal}\ sumn\ ys\ n{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induction\ n{\isacharparenright}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isadigit{0}}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Suc\ n{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ sn{\isacharcolon}{\isachardoublequoteopen}sumn\ xs\ n\ {\isacharequal}\ sumn\ ys\ n{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ Suc{\isachardot}prems\ \isacommand{have}\isamarkupfalse%
\ an{\isacharcolon}{\isachardoublequoteopen}xs{\isacharbang}n\ {\isacharequal}\ ys{\isacharbang}n{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ sn\ an\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ sort{\isacharunderscore}impl{\isacharparenright}\ sort{\isacharunderscore}spec{\isacharcolon}\isanewline
{\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isasymturnstile}\ {\isasymlbrace}{\isasymsigma}{\isachardot}\ {\isacharparenleft}{\isasymacute}array\ {\isasymnoteq}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymacute}lo\ {\isasymge}\ {\isadigit{0}}{\isacharparenright}\ {\isasymand}\isanewline
{\isacharparenleft}{\isasymacute}lo\ {\isacharplus}{\isadigit{2}}{\isasymle}\ {\isasymacute}hi{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymacute}hi\ {\isasymle}\ size\ {\isasymacute}array{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymacute}hi\ {\isacharminus}\ {\isasymacute}lo\ {\isasymge}\ {\isadigit{1}}{\isadigit{6}}{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}length\ {\isasymacute}array\ {\isacharless}\ {\isadigit{2}}{\isadigit{9}}{\isadigit{1}}{\isadigit{7}}{\isadigit{1}}{\isadigit{9}}{\isadigit{6}}{\isadigit{4}}{\isadigit{9}}{\isadigit{6}}{\isacharparenright}\ {\isasymrbrace}\ {\isacharparenleft}{\isacharasterisk}\ if\ lo\ {\isacharplus}\ {\isadigit{1}}\ {\isacharequal}\ hi\ then\ the\ array\ is\ already\ sorted\ {\isacharasterisk}{\isacharparenright}\isanewline
PROC\ sort{\isacharparenleft}{\isasymacute}array{\isacharcomma}\ {\isasymacute}lo{\isacharcomma}\ {\isasymacute}hi{\isacharcomma}\ {\isasymacute}ret{\isacharparenright}\ \isanewline
{\isasymlbrace}\ True{\isasymrbrace}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{sorry}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\end{isabellebody}%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "root"
%%% End:
