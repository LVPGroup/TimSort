%
\begin{isabellebody}%
\setisabellecontext{HoarePartialProps}%
%
\isamarkupsection{Properties of Partial Correctness Hoare Logic%
}
\isamarkuptrue%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ HoarePartialProps\ \isakeyword{imports}\ HoarePartialDef\ \isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isamarkupsubsection{Soundness%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ hoare{\isacharunderscore}cnvalid{\isacharcolon}\ \isanewline
\ \isakeyword{assumes}\ hoare{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymAnd}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ hoare\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct{\isacharparenright}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Skip\ {\isasymTheta}\ F\ P\ A{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Skip\ P{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Skip{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{thus}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ P\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ cases\ auto\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Basic\ {\isasymTheta}\ F\ f\ P\ A{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ f\ s\ {\isasymin}\ P{\isacharbraceright}\ {\isacharparenleft}Basic\ f{\isacharparenright}\ P{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Basic\ f{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ {\isachardoublequoteopen}s\ {\isasymin}\ {\isacharbraceleft}s{\isachardot}\ f\ s\ {\isasymin}\ P{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{thus}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ P\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ cases\ auto\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\ \isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Spec\ {\isasymTheta}\ F\ r\ Q\ A{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}{\isasymforall}t{\isachardot}\ {\isacharparenleft}s{\isacharcomma}\ t{\isacharparenright}\ {\isasymin}\ r\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Q{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymexists}t{\isachardot}\ {\isacharparenleft}s{\isacharcomma}\ t{\isacharparenright}\ {\isasymin}\ r{\isacharparenright}{\isacharbraceright}\ Spec\ r\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Spec\ r{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ {\isacharbraceleft}s{\isachardot}\ {\isacharparenleft}{\isasymforall}t{\isachardot}\ {\isacharparenleft}s{\isacharcomma}\ t{\isacharparenright}\ {\isasymin}\ r\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Q{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymexists}t{\isachardot}\ {\isacharparenleft}s{\isacharcomma}\ t{\isacharparenright}\ {\isasymin}\ r{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ exec\ P\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ cases\ auto\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Seq\ {\isasymTheta}\ F\ P\ c{\isadigit{1}}\ R\ A\ c{\isadigit{2}}\ Q{\isacharparenright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ valid{\isacharunderscore}c{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c{\isadigit{1}}\ R{\isacharcomma}A{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ valid{\isacharunderscore}c{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c{\isadigit{2}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Seq\ c{\isadigit{1}}\ c{\isadigit{2}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Seq\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ exec\ P\ \isacommand{obtain}\isamarkupfalse%
\ r\ \isakeyword{where}\isanewline
\ \ \ \ \ \ exec{\isacharunderscore}c{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{1}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ r{\isachardoublequoteclose}\ \isakeyword{and}\ exec{\isacharunderscore}c{\isadigit{2}}{\isacharcolon}\ \ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{2}}{\isacharcomma}r{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ cases\ auto\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}r\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ dest{\isacharcolon}\ execn{\isacharunderscore}Fault{\isacharunderscore}end{\isacharparenright}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ valid{\isacharunderscore}c{\isadigit{1}}\ ctxt\ exec{\isacharunderscore}c{\isadigit{1}}\ P\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ r{\isacharcolon}\ {\isachardoublequoteopen}r{\isasymin}Normal\ {\isacharbackquote}\ R\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isasymin}Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ r{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Normal\ r{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec{\isacharunderscore}c{\isadigit{2}}\ r\isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isasymin}Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}c{\isadigit{2}}\ ctxt\ {\isacharunderscore}\ {\isacharunderscore}\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Abrupt\ r{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec{\isacharunderscore}c{\isadigit{2}}\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isacharequal}Abrupt\ r{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ elim{\isacharcolon}\ execn{\isacharunderscore}elim{\isacharunderscore}cases{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ Abrupt\ r\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ Fault\ \isacommand{with}\isamarkupfalse%
\ r\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ Stuck\ \isacommand{with}\isamarkupfalse%
\ r\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Cond\ {\isasymTheta}\ F\ P\ b\ c{\isadigit{1}}\ Q\ A\ c{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ valid{\isacharunderscore}c{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ {\isasyminter}\ b{\isacharparenright}\ c{\isadigit{1}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ valid{\isacharunderscore}c{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ {\isasyminter}\ {\isacharminus}\ b{\isacharparenright}\ c{\isadigit{2}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Cond\ b\ c{\isadigit{1}}\ c{\isadigit{2}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Cond\ b\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ {\isachardoublequoteopen}s{\isasymin}b{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ True\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{1}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ cases\ auto\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ P\ True\ \isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharminus}\ {\isacharparenleft}rule\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}c{\isadigit{1}}\ ctxt\ {\isacharunderscore}\ {\isacharunderscore}\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharbrackright}{\isacharcomma}auto{\isacharparenright}\isanewline
\ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec\ P\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{2}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ cases\ auto\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ P\ False\ \isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharminus}\ {\isacharparenleft}rule\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}c{\isadigit{2}}\ ctxt\ {\isacharunderscore}\ {\isacharunderscore}\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharbrackright}{\isacharcomma}auto{\isacharparenright}\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}While\ {\isasymTheta}\ F\ P\ b\ c\ A\ n{\isacharparenright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ valid{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P\ {\isasyminter}\ b{\isacharparenright}\ c\ P{\isacharcomma}A{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ While\ b\ c\ {\isacharparenleft}P\ {\isasyminter}\ {\isacharminus}\ b{\isacharparenright}{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ {\isacharparenleft}P\ {\isasyminter}\ {\isacharminus}\ b{\isacharparenright}\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ {\isachardoublequoteopen}s\ {\isasymin}\ b{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ True\isanewline
\ \ \ \ \ \ \isacommand{{\isacharbraceleft}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ d{\isacharcolon}{\isacharcolon}{\isachardoublequoteopen}{\isacharparenleft}{\isacharprime}b{\isacharcomma}{\isacharprime}a{\isacharcomma}{\isacharprime}c{\isacharparenright}\ com{\isachardoublequoteclose}\ \isacommand{fix}\isamarkupfalse%
\ s\ t\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}d{\isacharcomma}s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ d{\isacharcolon}\ {\isachardoublequoteopen}d{\isacharequal}While\ b\ c{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ exec\ d\ ctxt\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymlbrakk}s\ {\isasymin}\ Normal\ {\isacharbackquote}\ P{\isacharsemicolon}\ t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isasymrbrakk}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ {\isacharparenleft}P\ {\isasyminter}\ {\isacharminus}\ b{\isacharparenright}\ {\isasymunion}\ Abrupt{\isacharbackquote}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}WhileTrue\ s\ b{\isacharprime}\ c{\isacharprime}\ n\ r\ t{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ eqs{\isacharcolon}\ {\isachardoublequoteopen}While\ b{\isacharprime}\ c{\isacharprime}\ {\isacharequal}\ While\ b\ c{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{note}\isamarkupfalse%
\ valid{\isacharunderscore}c\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{from}\isamarkupfalse%
\ WhileTrue\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{obtain}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ r{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}r{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}Normal\ s\ {\isasymin}\ Normal\ {\isacharbackquote}{\isacharparenleft}P\ {\isasyminter}\ b{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{with}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}r\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ dest{\isacharcolon}\ execn{\isacharunderscore}Fault{\isacharunderscore}end{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ r{\isacharcolon}\ {\isachardoublequoteopen}r\ {\isasymin}\ Normal\ {\isacharbackquote}\ P\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharminus}\ {\isacharparenleft}rule\ cnvalidD{\isacharcomma}auto{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ this\ {\isacharunderscore}\ ctxt\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ {\isacharparenleft}P\ {\isasyminter}\ {\isacharminus}\ b{\isacharparenright}\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A\ {\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ r{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Normal\ r{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ r\ ctxt\ eqs\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharminus}\ {\isacharparenleft}rule\ WhileTrue{\isachardot}hyps{\isacharcomma}auto{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Abrupt\ r{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b{\isacharprime}\ c{\isacharprime}{\isacharcomma}r{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ Abrupt\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isacharequal}r{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ dest{\isacharcolon}\ execn{\isacharunderscore}Abrupt{\isacharunderscore}end{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ r\ Abrupt\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ Fault\ \isacommand{with}\isamarkupfalse%
\ r\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ Stuck\ \isacommand{with}\isamarkupfalse%
\ r\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\ \ \ \isanewline
\ \ \ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \isacommand{{\isacharbraceright}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec\ ctxt\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec\ P\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isacharequal}Normal\ s{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ cases\ auto\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ P\ False\isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Guard\ {\isasymTheta}\ F\ g\ P\ c\ Q\ A\ f{\isacharparenright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ valid{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}g\ {\isasyminter}\ P{\isacharparenright}\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}g\ {\isasyminter}\ P{\isacharparenright}\ Guard\ f\ g\ c\ \ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Guard\ f\ g\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}{\isachardoublequoteopen}s\ {\isasymin}\ {\isacharparenleft}g\ {\isasyminter}\ P{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ exec\ P\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ cases\ auto\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}c\ ctxt\ this\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Guarantee\ f\ F\ {\isasymTheta}\ g\ P\ c\ Q\ A{\isacharparenright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ valid{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}g\ {\isasyminter}\ P{\isacharparenright}\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ f{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}f\ {\isasymin}\ F{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Guard\ f\ g\ c\ \ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Guard\ f\ g\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}{\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ exec\ f{\isacharunderscore}F\ t{\isacharunderscore}notin{\isacharunderscore}F\ \isacommand{have}\isamarkupfalse%
\ g{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ g{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ cases\ auto\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ P\ \isacommand{have}\isamarkupfalse%
\ P{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ g\ {\isasyminter}\ P{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ exec\ P\ g\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ cases\ auto\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}c\ ctxt\ this\ P{\isacharprime}\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}CallRec\ P\ p\ Q\ A\ Specs\ {\isasymTheta}\ F{\isacharparenright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ p{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}\ {\isasymin}\ Specs{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ valid{\isacharunderscore}body{\isacharcolon}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}\ {\isasymin}\ Specs{\isachardot}\ p\ {\isasymin}\ dom\ {\isasymGamma}\ {\isasymand}\ {\isacharparenleft}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymunion}\ Specs\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ Q{\isacharcomma}A{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ CallRec{\isachardot}hyps\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Call\ p\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \isacommand{{\isacharbraceleft}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ n\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A\isanewline
\ \ \ \ \ \ \ \ {\isasymLongrightarrow}\ {\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}\ {\isasymin}Specs{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct\ n{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ {\isadigit{0}}\isanewline
\ \ \ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}\ {\isasymin}Specs{\isachardot}\ {\isasymGamma}{\isasymTurnstile}{\isadigit{0}}{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}fastforce\ elim{\isacharbang}{\isacharcolon}\ execn{\isacharunderscore}elim{\isacharunderscore}cases\ simp\ add{\isacharcolon}\ nvalid{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Suc\ m{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ hyp{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}m{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\ {\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}\ {\isasymin}Specs{\isachardot}\ {\isasymGamma}{\isasymTurnstile}m{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}Suc\ m{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ ctxt{\isacharunderscore}m{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}m{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}fastforce\ simp\ add{\isacharcolon}\ nvalid{\isacharunderscore}def\ intro{\isacharcolon}\ execn{\isacharunderscore}Suc{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ valid{\isacharunderscore}Proc{\isacharcolon}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}\ {\isasymin}Specs{\isachardot}\ {\isasymGamma}{\isasymTurnstile}m{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ hyp{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}{\isasymTheta}{\isacharprime}{\isacharequal}\ {\isachardoublequoteopen}{\isasymTheta}\ {\isasymunion}\ Specs{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}Proc\ ctxt{\isacharunderscore}m\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isacharquery}{\isasymTheta}{\isacharprime}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}m{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ valid{\isacharunderscore}body\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ valid{\isacharunderscore}body{\isacharunderscore}m{\isacharcolon}\ \isanewline
\ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}\ {\isasymin}Specs{\isachardot}\ {\isasymforall}n{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}m{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}fastforce\ simp\ add{\isacharcolon}\ cnvalid{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}\ {\isasymin}Specs{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}Suc\ m{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}clarify{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ P\ p\ Q\ A\ \isacommand{assume}\isamarkupfalse%
\ p{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}\ {\isasymin}\ Specs{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymTurnstile}Suc\ m{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ nvalidI{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}call{\isacharcolon}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}Suc\ m{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ Pre{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ exec{\isacharunderscore}call\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ bdy\ m{\isacharprime}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ m{\isacharcolon}\ {\isachardoublequoteopen}Suc\ m\ {\isacharequal}\ Suc\ m{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ p\ {\isacharequal}\ Some\ bdy{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}body{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}bdy{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}m{\isacharprime}{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ Pre\ valid{\isacharunderscore}body{\isacharunderscore}m\ exec{\isacharunderscore}body\ bdy\ m\ p\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}fastforce\ simp\ add{\isacharcolon}\ nvalid{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}\ p\ {\isacharequal}\ None{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ valid{\isacharunderscore}body\ p\ \isacommand{have}\isamarkupfalse%
\ False\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{{\isachardot}{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{{\isacharbraceright}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ p\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}fastforce\ simp\ add{\isacharcolon}\ cnvalid{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}DynCom\ P\ {\isasymTheta}\ F\ c\ Q\ A{\isacharparenright}\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ valid{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s{\isasymin}P{\isachardot}\ {\isacharparenleft}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}c\ s{\isacharparenright}\ Q{\isacharcomma}A{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ DynCom\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}DynCom\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}Fault{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ exec\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c\ s{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \ \ \ \ \ \isanewline
\ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}c\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharcomma}\ OF\ P{\isacharbrackright}\ ctxt\ this\ P\ t{\isacharunderscore}notin{\isacharunderscore}Fault{\isacharbrackright}\isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Throw\ {\isasymTheta}\ F\ A\ Q{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ A\ Throw\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Throw{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ {\isachardoublequoteopen}s\ {\isasymin}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ cases\ simp\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Catch\ {\isasymTheta}\ F\ P\ c\isactrlsub {\isadigit{1}}\ Q\ R\ c\isactrlsub {\isadigit{2}}\ A{\isacharparenright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ valid{\isacharunderscore}c{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\isactrlsub {\isadigit{1}}\ Q{\isacharcomma}R{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ valid{\isacharunderscore}c{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ R\ c\isactrlsub {\isadigit{2}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Catch\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Catch\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}Fault{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ exec\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s{\isacharprime}\isanewline
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}c{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c\isactrlsub {\isadigit{1}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ Abrupt\ s{\isacharprime}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}c{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c\isactrlsub {\isadigit{2}}{\isacharcomma}Normal\ s{\isacharprime}{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}c{\isadigit{1}}\ ctxt\ exec{\isacharunderscore}c{\isadigit{1}}\ P\ {\isacharbrackright}\ \isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Abrupt\ s{\isacharprime}\ {\isasymin}\ Abrupt\ {\isacharbackquote}\ R{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}c{\isadigit{2}}\ ctxt\ {\isacharunderscore}\ {\isacharunderscore}\ t{\isacharunderscore}notin{\isacharunderscore}Fault{\isacharbrackright}\ exec{\isacharunderscore}c{\isadigit{2}}\isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}c{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c\isactrlsub {\isadigit{1}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ notAbr{\isacharcolon}\ {\isachardoublequoteopen}{\isasymnot}\ isAbr\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}c{\isadigit{1}}\ ctxt\ exec{\isacharunderscore}c{\isadigit{1}}\ P\ t{\isacharunderscore}notin{\isacharunderscore}Fault{\isacharbrackright}\ \isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ R{\isachardoublequoteclose}\ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ notAbr\isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Conseq\ P\ {\isasymTheta}\ F\ c\ Q\ A{\isacharparenright}\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ adapt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ {\isasymin}\ P{\isachardot}\ {\isacharparenleft}{\isasymexists}P{\isacharprime}\ Q{\isacharprime}\ A{\isacharprime}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ c\ Q{\isacharprime}{\isacharcomma}A{\isacharprime}\ \ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ s\ {\isasymin}\ P{\isacharprime}\ {\isasymand}\ Q{\isacharprime}\ {\isasymsubseteq}\ Q\ {\isasymand}\ A{\isacharprime}\ {\isasymsubseteq}\ A{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}{\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ P\ adapt\ \isacommand{obtain}\isamarkupfalse%
\ P{\isacharprime}\ Q{\isacharprime}\ A{\isacharprime}\ Z\ \ \isakeyword{where}\isanewline
\ \ \ \ \ \ \ \ spec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ c\ Q{\isacharprime}{\isacharcomma}A{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ \ \ \ \ P{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isacharprime}{\isachardoublequoteclose}\ \ \isakeyword{and}\ \ strengthen{\isacharcolon}\ {\isachardoublequoteopen}Q{\isacharprime}\ {\isasymsubseteq}\ Q\ {\isasymand}\ A{\isacharprime}\ {\isasymsubseteq}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ spec\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ exec\ P{\isacharprime}\ t{\isacharunderscore}notin{\isacharunderscore}F\ \ \isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q{\isacharprime}\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ strengthen\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Asm\ P\ p\ Q\ A\ {\isasymTheta}\ F{\isacharparenright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ asm{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}\ {\isasymin}\ {\isasymTheta}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ fact\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ asm\ ctxt\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ Call\ p\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{moreover}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ exec\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ nvalid{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ ExFalso\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ iprover\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{theorem}\isamarkupfalse%
\ hoare{\isacharunderscore}sound{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ cnvalid{\isacharunderscore}to{\isacharunderscore}cvalid\ hoare{\isacharunderscore}cnvalid{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{Completeness%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ MGT{\isacharunderscore}valid{\isacharcolon}\isanewline
{\isachardoublequoteopen}{\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ \ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ c\ \isanewline
\ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ validI{\isacharparenright}\ \isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}s\ {\isasymin}\ {\isacharbraceleft}s{\isachardot}\ s\ {\isacharequal}\ Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ \ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}\ {\isasymunion}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ Abrupt\ {\isacharbackquote}\ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}cases\ t{\isacharparenright}\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The consequence rule where the existential \isa{Z} is instantiated
to \isa{s}. Usefull in proof of \isa{MGT{\isacharunderscore}lemma}.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ ConseqMGT{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ modif{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ c\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ impl{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}s{\isachardot}\ s\ {\isasymin}\ P\ {\isasymLongrightarrow}\ s\ {\isasymin}\ P{\isacharprime}\ s\ {\isasymand}\ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ Q{\isacharprime}\ s\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Q{\isacharparenright}\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ A{\isacharprime}\ s\ {\isasymlongrightarrow}\ t\ {\isasymin}\ A{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ impl\ \isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharminus}\ \ {\isacharparenleft}rule\ conseq\ {\isacharbrackleft}OF\ modif{\isacharbrackright}{\isacharcomma}blast{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Seq{\isacharunderscore}NoFaultStuckD{\isadigit{1}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ noabort{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Seq\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ \ F{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{1}}{\isacharcomma}s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ \ F{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ final{\isacharunderscore}notinI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}c{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{1}}{\isacharcomma}s{\isasymrangle}\ {\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymnotin}\ {\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ \ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ {\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ \ F{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{moreover}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{{\isacharbraceleft}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isacharequal}\ Stuck{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec{\isacharunderscore}c{\isadigit{1}}\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Seq\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}s{\isasymrangle}\ {\isasymRightarrow}\ Stuck{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ exec{\isacharunderscore}Seq{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ noabort\ \isacommand{have}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ False\ \isacommand{{\isachardot}{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{{\isacharbraceright}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isanewline
\ \ \ \ \isacommand{{\isacharbraceleft}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ f\ \isakeyword{where}\ \isanewline
\ \ \ \ \ \ t{\isacharcolon}\ {\isachardoublequoteopen}t{\isacharequal}Fault\ f{\isachardoublequoteclose}\ \isakeyword{and}\ f{\isacharcolon}\ {\isachardoublequoteopen}f\ {\isasymin}\ F{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ t\ exec{\isacharunderscore}c{\isadigit{1}}\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Seq\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}s{\isasymrangle}\ {\isasymRightarrow}\ Fault\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ exec{\isacharunderscore}Seq{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ noabort\ f\ \isacommand{have}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ False\ \isacommand{{\isachardot}{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{{\isacharbraceright}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ False\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Seq{\isacharunderscore}NoFaultStuckD{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ noabort{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Seq\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ \ F{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymforall}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{1}}{\isacharcomma}s{\isasymrangle}\ {\isasymRightarrow}\ t\ {\isasymlongrightarrow}\ t{\isasymnotin}\ {\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ \ F{\isacharparenright}\ {\isasymlongrightarrow}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{2}}{\isacharcomma}t{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ \ F{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ noabort\isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def\ intro{\isacharcolon}\ exec{\isacharunderscore}Seq{\isacharprime}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ MGT{\isacharunderscore}implies{\isacharunderscore}complete{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ MGT{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ \ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ c\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ valid{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}\ {\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ MGT\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ConseqMGT{\isacharparenright}\ \isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}insert\ valid{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ valid{\isacharunderscore}def\ intro{\isacharbang}{\isacharcolon}\ final{\isacharunderscore}notinI{\isacharparenright}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
Equipped only with the classic consequence rule \isa{{\isasymlbrakk}{\isacharquery}{\isasymGamma}{\isacharcomma}{\isacharquery}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}{\isacharquery}F\ \isactrlesub {\isacharquery}P{\isacharprime}\ {\isacharquery}c\ {\isacharquery}Q{\isacharprime}{\isacharcomma}{\isacharquery}A{\isacharprime}{\isacharsemicolon}\ {\isacharquery}P\ {\isasymsubseteq}\ {\isacharquery}P{\isacharprime}{\isacharsemicolon}\ {\isacharquery}Q{\isacharprime}\ {\isasymsubseteq}\ {\isacharquery}Q{\isacharsemicolon}\ {\isacharquery}A{\isacharprime}\ {\isasymsubseteq}\ {\isacharquery}A{\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isacharquery}{\isasymGamma}{\isacharcomma}{\isacharquery}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}{\isacharquery}F\ \isactrlesub {\isacharquery}P\ {\isacharquery}c\ {\isacharquery}Q{\isacharcomma}{\isacharquery}A}
        we can only derive this syntactically more involved version
        of completeness. But semantically it is equivalent to the "real" one
        (see below)%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ MGT{\isacharunderscore}implies{\isacharunderscore}complete{\isacharprime}{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ MGT{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ \ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ c\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ valid{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}\ {\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ s\ {\isasymin}\ P{\isacharbraceright}\ c\ {\isacharbraceleft}t{\isachardot}\ Z\ {\isasymin}\ P\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Q{\isacharbraceright}{\isacharcomma}{\isacharbraceleft}t{\isachardot}\ Z\ {\isasymin}\ P\ {\isasymlongrightarrow}\ t\ {\isasymin}\ A{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ MGT\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharcomma}\ of\ Z{\isacharbrackright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPrePost{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}insert\ valid{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ \ \ {\isacharparenleft}fastforce\ simp\ add{\isacharcolon}\ valid{\isacharunderscore}def\ final{\isacharunderscore}notin{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}fastforce\ simp\ add{\isacharcolon}\ valid{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}fastforce\ simp\ add{\isacharcolon}\ valid{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
Semantic equivalence of both kind of formulations%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ valid{\isacharunderscore}involved{\isacharunderscore}to{\isacharunderscore}valid{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ valid{\isacharcolon}\ \isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ s\ {\isasymin}\ P{\isacharbraceright}\ c\ {\isacharbraceleft}t{\isachardot}\ Z\ {\isasymin}\ P\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Q{\isacharbraceright}{\isacharcomma}{\isacharbraceleft}t{\isachardot}\ Z\ {\isasymin}\ P\ {\isasymlongrightarrow}\ t\ {\isasymin}\ A{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ valid\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ valid{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ clarsimp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}x{\isachardoublequoteclose}\ \isakeyword{in}\ allE{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}Normal\ x{\isachardoublequoteclose}\ \isakeyword{in}\ allE{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule{\isacharunderscore}tac\ x{\isacharequal}t\ \isakeyword{in}\ allE{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The sophisticated consequence rule allow us to do this 
        semantical transformation on the hoare-level, too. 
        The magic is, that it allow us to
        choose the instance of \isa{Z} under the assumption of an state \isa{s\ {\isasymin}\ P}%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharcolon}\ \isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ s\ {\isasymin}\ P{\isacharbraceright}\ c\ {\isacharbraceleft}t{\isachardot}\ Z\ {\isasymin}\ P\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Q{\isacharbraceright}{\isacharcomma}{\isacharbraceleft}t{\isachardot}\ Z\ {\isasymin}\ P\ {\isasymlongrightarrow}\ t\ {\isasymin}\ A{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}\ {\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ConseqMGT\ {\isacharbrackleft}OF\ deriv{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ valid{\isacharunderscore}to{\isacharunderscore}valid{\isacharunderscore}involved{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isasymLongrightarrow}\isanewline
\ \ \ {\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ s\ {\isasymin}\ P{\isacharbraceright}\ c\ {\isacharbraceleft}t{\isachardot}\ Z\ {\isasymin}\ P\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Q{\isacharbraceright}{\isacharcomma}{\isacharbraceleft}t{\isachardot}\ Z\ {\isasymin}\ P\ {\isasymlongrightarrow}\ t\ {\isasymin}\ A{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ valid{\isacharunderscore}def\ Collect{\isacharunderscore}conv{\isacharunderscore}if{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}\ {\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ s\ {\isasymin}\ P{\isacharbraceright}\ c\ {\isacharbraceleft}t{\isachardot}\ Z\ {\isasymin}\ P\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Q{\isacharbraceright}{\isacharcomma}{\isacharbraceleft}t{\isachardot}\ Z\ {\isasymin}\ P\ {\isasymlongrightarrow}\ t\ {\isasymin}\ A{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPrePost\ {\isacharbrackleft}OF\ deriv{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ conseq{\isacharunderscore}extract{\isacharunderscore}state{\isacharunderscore}indep{\isacharunderscore}prop{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ state{\isacharunderscore}indep{\isacharunderscore}prop{\isacharcolon}{\isachardoublequoteopen}{\isasymforall}s\ {\isasymin}\ P{\isachardot}\ R{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ to{\isacharunderscore}show{\isacharcolon}\ {\isachardoublequoteopen}R\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Conseq{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}clarify{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}P{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}Q{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}A{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ state{\isacharunderscore}indep{\isacharunderscore}prop\ to{\isacharunderscore}show\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ MGT{\isacharunderscore}lemma{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ MGT{\isacharunderscore}Calls{\isacharcolon}\ \isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}p{\isasymin}dom\ {\isasymGamma}{\isachardot}\ {\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ \isanewline
\ \ \ \ \ \ \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\isanewline
\ \ \ \ \ \ \ \ {\isacharparenleft}Call\ p{\isacharparenright}\isanewline
\ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymAnd}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ c\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}{\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct\ c{\isacharparenright}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ Skip\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s\ {\isacharequal}\ Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Skip{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ Skip\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Skip{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}{\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Skip{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoarep{\isachardot}Skip\ {\isacharbrackleft}THEN\ conseqPre{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}auto\ elim{\isacharcolon}\ exec{\isacharunderscore}elim{\isacharunderscore}cases\ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def\ intro{\isacharcolon}\ exec{\isachardot}intros{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Basic\ f{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s\ {\isacharequal}\ Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Basic\ f{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ Basic\ f\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Basic\ f{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Basic\ f{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoarep{\isachardot}Basic\ {\isacharbrackleft}THEN\ conseqPre{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}auto\ elim{\isacharcolon}\ exec{\isacharunderscore}elim{\isacharunderscore}cases\ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def\ intro{\isacharcolon}\ exec{\isachardot}intros{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Spec\ r{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s\ {\isacharequal}\ Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Spec\ r{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ Spec\ r\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Spec\ r{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Spec\ r{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoarep{\isachardot}Spec\ {\isacharbrackleft}THEN\ conseqPre{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}clarsimp\ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}{\isasymexists}t{\isachardot}\ {\isacharparenleft}Z{\isacharcomma}t{\isacharparenright}\ {\isasymin}\ r{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ elim{\isacharcolon}\ exec{\isacharunderscore}elim{\isacharunderscore}cases\ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def\ intro{\isacharcolon}\ exec{\isachardot}intros{\isacharparenright}\isanewline
\ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Seq\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharparenright}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ hyp{\isacharunderscore}c{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{1}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ c{\isadigit{1}}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{1}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{1}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Seq{\isachardot}hyps\ \isacommand{by}\isamarkupfalse%
\ iprover\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ hyp{\isacharunderscore}c{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{2}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ c{\isadigit{2}}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Seq{\isachardot}hyps\ \isacommand{by}\isamarkupfalse%
\ iprover\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ hyp{\isacharunderscore}c{\isadigit{1}}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Seq\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ c{\isadigit{1}}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{1}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{2}}{\isacharcomma}Normal\ t{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Seq\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ ConseqMGT{\isacharparenright}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}auto\ dest{\isacharcolon}\ Seq{\isacharunderscore}NoFaultStuckD{\isadigit{1}}\ {\isacharbrackleft}simplified{\isacharbrackright}\ Seq{\isacharunderscore}NoFaultStuckD{\isadigit{2}}\ {\isacharbrackleft}simplified{\isacharbrackright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ intro{\isacharcolon}\ exec{\isachardot}Seq{\isacharparenright}\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Seq\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Seq\ c{\isadigit{1}}\ c{\isadigit{2}}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Seq\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Seq\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoarep{\isachardot}Seq\ {\isacharparenright}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{1}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{2}}{\isacharcomma}Normal\ t{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c{\isadigit{2}}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Seq\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Seq\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ ConseqMGT\ {\isacharbrackleft}OF\ hyp{\isacharunderscore}c{\isadigit{2}}{\isacharbrackright}{\isacharcomma}safe{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ r\ t\isanewline
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{1}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ r{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{2}}{\isacharcomma}Normal\ r{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Seq\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ exec{\isachardot}intros{\isacharparenright}\isanewline
\ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ r\ t\isanewline
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{1}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ r{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{2}}{\isacharcomma}Normal\ r{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Seq\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ exec{\isachardot}intros{\isacharparenright}\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Cond\ b\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharparenright}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{1}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ c{\isadigit{1}}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{1}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{1}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Cond{\isachardot}hyps\ \isacommand{by}\isamarkupfalse%
\ iprover\ \ \isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Cond\ b\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isasyminter}b{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c{\isadigit{1}}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Cond\ b\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Cond\ b\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ ConseqMGT{\isacharparenright}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}fastforce\ intro{\isacharcolon}\ exec{\isachardot}CondTrue\ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{2}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ c{\isadigit{2}}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Cond{\isachardot}hyps\ \isacommand{by}\isamarkupfalse%
\ iprover\ \ \isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub {\isacharparenleft}{\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Cond\ b\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isasyminter}{\isacharminus}b{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c{\isadigit{2}}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Cond\ b\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Cond\ b\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ ConseqMGT{\isacharparenright}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}fastforce\ intro{\isacharcolon}\ exec{\isachardot}CondFalse\ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Cond\ b\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Cond\ b\ c{\isadigit{1}}\ c{\isadigit{2}}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Cond\ b\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Cond\ b\ c{\isadigit{1}}\ c{\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoarep{\isachardot}Cond{\isacharparenright}\ \ \ \ \ \ \ \isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}While\ b\ c{\isacharparenright}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}unroll\ {\isacharequal}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharbraceleft}{\isacharparenleft}s{\isacharcomma}t{\isacharparenright}{\isachardot}\ s{\isasymin}b\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharparenright}\isactrlsup {\isacharasterisk}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}P{\isacharprime}\ {\isacharequal}\ {\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ {\isacharbraceleft}t{\isachardot}\ {\isacharparenleft}Z{\isacharcomma}t{\isacharparenright}{\isasymin}{\isacharquery}unroll\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}e{\isachardot}\ {\isacharparenleft}Z{\isacharcomma}e{\isacharparenright}{\isasymin}{\isacharquery}unroll\ {\isasymlongrightarrow}\ e{\isasymin}b\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}u{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}Abrupt\ u\ {\isasymlongrightarrow}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ u{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}A{\isacharprime}\ {\isacharequal}\ {\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ While\ b\ c\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ ConseqMGT\ {\isacharbrackleft}\isakeyword{where}\ {\isacharquery}P{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isacharquery}P{\isacharprime}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isakeyword{and}\ {\isacharquery}Q{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}Z{\isachardot}\ {\isacharquery}P{\isacharprime}\ Z\ {\isasyminter}\ {\isacharminus}\ b{\isachardoublequoteclose}\ \isakeyword{and}\ {\isacharquery}A{\isacharprime}{\isacharequal}{\isachardoublequoteopen}{\isacharquery}A{\isacharprime}{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharquery}P{\isacharprime}\ Z{\isacharparenright}\ {\isacharparenleft}While\ b\ c{\isacharparenright}\ {\isacharparenleft}{\isacharquery}P{\isacharprime}\ Z\ {\isasyminter}\ {\isacharminus}\ b{\isacharparenright}{\isacharcomma}{\isacharparenleft}{\isacharquery}A{\isacharprime}\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharcomma}\ rule\ hoarep{\isachardot}While{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ Z\isanewline
\ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ While\ \isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ c\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ iprover\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharquery}P{\isacharprime}\ Z\ \ {\isasyminter}\ b{\isacharparenright}\ c\ {\isacharparenleft}{\isacharquery}P{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}{\isacharquery}A{\isacharprime}\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ ConseqMGT{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\isanewline
\ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ \ {\isachardoublequoteopen}s{\isasymin}\ {\isacharbraceleft}t{\isachardot}\ {\isacharparenleft}Z{\isacharcomma}\ t{\isacharparenright}\ {\isasymin}\ {\isacharquery}unroll\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}e{\isachardot}\ {\isacharparenleft}Z{\isacharcomma}e{\isacharparenright}{\isasymin}{\isacharquery}unroll\ {\isasymlongrightarrow}\ e{\isasymin}b\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}u{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}Abrupt\ u\ {\isasymlongrightarrow}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ u{\isacharparenright}{\isacharparenright}{\isacharbraceright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasyminter}\ b{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ \isanewline
\ \ \ \ \ \ \ \ \ \ Z{\isacharunderscore}s{\isacharunderscore}unroll{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}Z{\isacharcomma}s{\isacharparenright}\ {\isasymin}\ {\isacharquery}unroll{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ \ \ \ \ \ \ noabort{\isacharcolon}{\isachardoublequoteopen}{\isasymforall}e{\isachardot}\ {\isacharparenleft}Z{\isacharcomma}e{\isacharparenright}{\isasymin}{\isacharquery}unroll\ {\isasymlongrightarrow}\ e{\isasymin}b\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}u{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}Abrupt\ u\ {\isasymlongrightarrow}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ u{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ \ \ \ \ \ \ s{\isacharunderscore}in{\isacharunderscore}b{\isacharcolon}\ {\isachardoublequoteopen}s{\isasymin}b{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}s\ {\isasymin}\ {\isacharbraceleft}t{\isachardot}\ t\ {\isacharequal}\ s\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ t{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}\ {\isasymlongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ t\ {\isasymin}\ {\isacharbraceleft}t{\isachardot}\ {\isacharparenleft}Z{\isacharcomma}\ t{\isacharparenright}\ {\isasymin}\ {\isacharquery}unroll\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}e{\isachardot}\ {\isacharparenleft}Z{\isacharcomma}e{\isacharparenright}{\isasymin}{\isacharquery}unroll\ {\isasymlongrightarrow}\ \ e{\isasymin}b\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}u{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}Abrupt\ u\ {\isasymlongrightarrow}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ u{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t\ {\isasymin}\ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}\ {\isasymlongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ t\ {\isasymin}\ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}C{\isadigit{1}}\ {\isasymand}\ {\isacharquery}C{\isadigit{2}}\ {\isasymand}\ {\isacharquery}C{\isadigit{3}}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}intro\ conjI{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ Z{\isacharunderscore}s{\isacharunderscore}unroll\ noabort\ s{\isacharunderscore}in{\isacharunderscore}b\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}C{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{{\isacharbraceleft}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ t\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ s{\isacharunderscore}t{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{moreover}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ Z{\isacharunderscore}s{\isacharunderscore}unroll\ s{\isacharunderscore}t\ s{\isacharunderscore}in{\isacharunderscore}b\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}Z{\isacharcomma}\ t{\isacharparenright}\ {\isasymin}\ {\isacharquery}unroll{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ rtrancl{\isacharunderscore}into{\isacharunderscore}rtrancl{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{note}\isamarkupfalse%
\ noabort\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}Z{\isacharcomma}\ t{\isacharparenright}\ {\isasymin}\ {\isacharquery}unroll\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}e{\isachardot}\ {\isacharparenleft}Z{\isacharcomma}e{\isacharparenright}{\isasymin}{\isacharquery}unroll\ {\isasymlongrightarrow}\ e{\isasymin}b\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}u{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}Abrupt\ u\ {\isasymlongrightarrow}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ u{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ iprover\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{{\isacharbraceright}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}C{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{{\isacharbraceleft}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ t\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ s{\isacharunderscore}t{\isacharcolon}\ \ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ Z{\isacharunderscore}s{\isacharunderscore}unroll\ noabort\ s{\isacharunderscore}t\ s{\isacharunderscore}in{\isacharunderscore}b\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{{\isacharbraceright}}\isamarkupfalse%
\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}C{\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{hence}\isamarkupfalse%
\ WhileNoFault{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}s\ {\isasymin}\ {\isacharquery}P{\isacharprime}\ s\ {\isasymand}\ \isanewline
\ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t{\isasymin}{\isacharparenleft}{\isacharquery}P{\isacharprime}\ s\ {\isasyminter}\ {\isacharminus}\ b{\isacharparenright}{\isasymlongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ t{\isasymin}{\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharparenright}{\isasymand}\isanewline
\ \ \ \ {\isacharparenleft}{\isasymforall}t{\isachardot}\ t{\isasymin}{\isacharquery}A{\isacharprime}\ s\ {\isasymlongrightarrow}\ t{\isasymin}{\isacharquery}A{\isacharprime}\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}intro\ conjI{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{{\isacharbraceleft}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ e\isanewline
\ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}Z{\isacharcomma}e{\isacharparenright}\ {\isasymin}\ {\isacharquery}unroll{\isachardoublequoteclose}\ {\isachardoublequoteopen}e\ {\isasymin}\ b{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ this\ WhileNoFault\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}u{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}Abrupt\ u\ {\isasymlongrightarrow}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ u{\isacharparenright}{\isachardoublequoteclose}\ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isacharquery}Prop\ Z\ e{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct\ rule{\isacharcolon}\ converse{\isacharunderscore}rtrancl{\isacharunderscore}induct\ {\isacharbrackleft}consumes\ {\isadigit{1}}{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ e{\isacharunderscore}in{\isacharunderscore}b{\isacharcolon}\ {\isachardoublequoteopen}e\ {\isasymin}\ b{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ WhileNoFault{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ e{\isacharunderscore}in{\isacharunderscore}b\ WhileNoFault\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ cNoFault{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def\ intro{\isacharcolon}\ exec{\isachardot}intros{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{moreover}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{{\isacharbraceleft}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ u\ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ u{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ e{\isacharunderscore}in{\isacharunderscore}b\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ u{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ exec{\isachardot}intros{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{{\isacharbraceright}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}Prop\ e\ e{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ iprover\isanewline
\ \ \ \ \ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ Z\ r\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ e{\isacharunderscore}in{\isacharunderscore}b{\isacharcolon}\ {\isachardoublequoteopen}e{\isasymin}b{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ WhileNoFault{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ hyp{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}e{\isasymin}b{\isacharsemicolon}{\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ r{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isasymrbrakk}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\ {\isacharquery}Prop\ r\ e{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ Z{\isacharunderscore}r{\isacharcolon}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}{\isacharparenleft}Z{\isacharcomma}\ r{\isacharparenright}\ {\isasymin}\ {\isacharbraceleft}{\isacharparenleft}Z{\isacharcomma}\ r{\isacharparenright}{\isachardot}\ Z\ {\isasymin}\ b\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ r{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ WhileNoFault\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ r{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def\ intro{\isacharcolon}\ exec{\isachardot}intros{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ hyp\ {\isacharbrackleft}OF\ e{\isacharunderscore}in{\isacharunderscore}b\ this{\isacharbrackright}\ \isacommand{obtain}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ cNoFault{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ Abrupt{\isacharunderscore}r{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}u{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ u\ {\isasymlongrightarrow}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ r{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ u{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \ \ \ \ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{{\isacharbraceleft}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ u\ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ e{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ u{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ Abrupt{\isacharunderscore}r\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ r{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ u{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{from}\isamarkupfalse%
\ \ Z{\isacharunderscore}r\ \isacommand{obtain}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}Z\ {\isasymin}\ b{\isachardoublequoteclose}\ \ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ r{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ u{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ exec{\isachardot}intros{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{{\isacharbraceright}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ cNoFault\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharquery}Prop\ Z\ e{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ iprover\isanewline
\ \ \ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{{\isacharbraceright}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ P\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}s\ {\isasymin}\ {\isacharquery}P{\isacharprime}\ s{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{{\isacharbraceleft}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ t\isanewline
\ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}termination{\isachardoublequoteclose}{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ b{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}Z{\isacharcomma}\ t{\isacharparenright}\ {\isasymin}\ {\isacharquery}unroll{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct\ rule{\isacharcolon}\ converse{\isacharunderscore}rtrancl{\isacharunderscore}induct\ {\isacharbrackleft}consumes\ {\isadigit{1}}{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ {\isachardoublequoteopen}termination{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ t{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ exec{\isachardot}WhileFalse{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ Z\ r\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ first{\isacharunderscore}body{\isacharcolon}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}{\isacharparenleft}Z{\isacharcomma}\ r{\isacharparenright}\ {\isasymin}\ {\isacharbraceleft}{\isacharparenleft}s{\isacharcomma}\ t{\isacharparenright}{\isachardot}\ s\ {\isasymin}\ b\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}r{\isacharcomma}\ t{\isacharparenright}\ {\isasymin}\ {\isacharquery}unroll{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ rest{\isacharunderscore}loop{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}\ Normal\ r{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ first{\isacharunderscore}body\ \isacommand{obtain}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}Z\ {\isasymin}\ b{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ r{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{moreover}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ rest{\isacharunderscore}loop\ \isacommand{have}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ r{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ fast\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ exec{\isachardot}WhileTrue{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{{\isacharbraceright}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ P\isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\isasymforall}t{\isachardot}\ t{\isasymin}{\isacharparenleft}{\isacharquery}P{\isacharprime}\ s\ {\isasyminter}\ {\isacharminus}\ b{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}t{\isasymin}{\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}While\ b\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ P\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}t{\isachardot}\ t{\isasymin}{\isacharquery}A{\isacharprime}\ s\ {\isasymlongrightarrow}\ t{\isasymin}{\isacharquery}A{\isacharprime}\ Z{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Call\ p{\isacharparenright}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}P\ {\isacharequal}\ {\isachardoublequoteopen}{\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ noStuck{\isacharunderscore}Call\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}s\ {\isasymin}\ {\isacharquery}P{\isachardot}\ p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}fastforce\ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def\ {\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharquery}P\ {\isacharparenleft}Call\ p{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseq{\isacharunderscore}extract{\isacharunderscore}state{\isacharunderscore}indep{\isacharunderscore}prop{\isacharparenright}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ p{\isacharunderscore}definied{\isacharcolon}\ {\isachardoublequoteopen}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ MGT{\isacharunderscore}Calls\ \isacommand{show}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}Call\ p{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ \ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto{\isacharparenright}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}DynCom\ c{\isacharparenright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ hyp{\isacharcolon}\ \isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymAnd}s{\isacharprime}{\isachardot}\ {\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub {\isacharbraceleft}s{\isachardot}\ s\ {\isacharequal}\ Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c\ s{\isacharprime}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ c\ s{\isacharprime}\isanewline
\ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c\ s{\isacharprime}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}{\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c\ s{\isacharprime}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ DynCom\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ hyp{\isacharprime}{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub {\isacharbraceleft}s{\isachardot}\ s\ {\isacharequal}\ Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}DynCom\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ c\ Z\isanewline
\ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}DynCom\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}{\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}DynCom\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ ConseqMGT\ {\isacharbrackleft}OF\ hyp{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}fastforce\ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def\ intro{\isacharcolon}\ exec{\isachardot}intros{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub {\isacharbraceleft}s{\isachardot}\ s\ {\isacharequal}\ Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}DynCom\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DynCom\ c\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}DynCom\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}DynCom\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoarep{\isachardot}DynCom{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}clarsimp{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hyp{\isacharprime}\ {\isacharbrackleft}simplified{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\ \ \isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Guard\ f\ g\ c{\isacharparenright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ hyp{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ c\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Guard\ \isacommand{by}\isamarkupfalse%
\ iprover\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ {\isachardoublequoteopen}f\ {\isasymin}\ F{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ True\ \isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ hyp{\isacharunderscore}c\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\ \isactrlesub {\isacharparenleft}g\ {\isasyminter}\ {\isacharbraceleft}s{\isachardot}\ s\ {\isacharequal}\ Z\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Guard\ f\ g\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}\ F{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ c\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Guard\ f\ g\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Guard\ f\ g\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ConseqMGT{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}insert\ True{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def\ intro{\isacharcolon}\ exec{\isachardot}intros{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ True\ this\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \ \ \ \ \ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPre\ {\isacharbrackleft}OF\ Guarantee{\isacharbrackright}{\isacharparenright}\ auto\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ hyp{\isacharunderscore}c\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ \isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}g\ {\isasyminter}\ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Guard\ f\ g\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ c\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Guard\ f\ g\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Guard\ f\ g\ c{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ConseqMGT{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ clarify\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}frule\ Guard{\isacharunderscore}noFaultStuckD\ {\isacharbrackleft}OF\ {\isacharunderscore}\ False{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def\ intro{\isacharcolon}\ exec{\isachardot}intros{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPre\ {\isacharbrackleft}OF\ hoarep{\isachardot}Guard{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ clarify\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}frule\ Guard{\isacharunderscore}noFaultStuckD\ {\isacharbrackleft}OF\ {\isacharunderscore}\ False{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ Throw\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s\ {\isacharequal}\ Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Throw{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ Throw\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Throw{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Throw{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ conseqPre\ {\isacharbrackleft}OF\ hoarep{\isachardot}Throw{\isacharbrackright}{\isacharparenright}\ {\isacharparenleft}blast\ intro{\isacharcolon}\ exec{\isachardot}intros{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Catch\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s\ {\isacharequal}\ Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c\isactrlsub {\isadigit{1}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ c\isactrlsub {\isadigit{1}}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c\isactrlsub {\isadigit{1}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c\isactrlsub {\isadigit{1}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Catch{\isachardot}hyps\ \isacommand{by}\isamarkupfalse%
\ iprover\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s\ {\isacharequal}\ Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Catch\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ c\isactrlsub {\isadigit{1}}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Catch\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c\isactrlsub {\isadigit{1}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Catch\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ ConseqMGT{\isacharparenright}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}fastforce\ intro{\isacharcolon}\ exec{\isachardot}intros\ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c\isactrlsub {\isadigit{2}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ c\isactrlsub {\isadigit{2}}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c\isactrlsub {\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c\isactrlsub {\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Catch{\isachardot}hyps\ \isacommand{by}\isamarkupfalse%
\ iprover\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub {\isacharbraceleft}s{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c\isactrlsub {\isadigit{1}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}Abrupt\ s\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Catch\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c\isactrlsub {\isadigit{2}}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Catch\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Catch\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ ConseqMGT{\isacharparenright}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}fastforce\ intro{\isacharcolon}\ exec{\isachardot}intros\ \ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s\ {\isacharequal}\ Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Catch\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Catch\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Catch\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Catch\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoarep{\isachardot}Catch{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ MGT{\isacharunderscore}Calls{\isacharcolon}\ \isanewline
\ {\isachardoublequoteopen}{\isasymforall}p{\isasymin}dom\ {\isasymGamma}{\isachardot}\ {\isasymforall}Z{\isachardot}\ \isanewline
\ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}Call\ p{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{{\isacharbraceleft}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ p\ Z\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ defined{\isacharcolon}\ {\isachardoublequoteopen}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ \isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isacharparenleft}{\isasymUnion}p{\isasymin}dom\ {\isasymGamma}{\isachardot}\ {\isasymUnion}Z{\isachardot}\ \isanewline
\ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}{\isacharparenleft}{\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ p{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isacharparenright}{\isacharbraceright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ {\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub {\isacharbraceleft}s{\isachardot}\ s\ {\isacharequal}\ Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ {\isacharparenleft}\isakeyword{is}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isacharquery}{\isasymTheta}\ {\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharquery}Pre\ p\ Z{\isacharparenright}\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}{\isacharquery}Post\ p\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}{\isacharquery}Abr\ p\ Z{\isacharparenright}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ MGT{\isacharunderscore}Calls{\isacharcolon}\isanewline
\ \ \ \ \ \ \ {\isachardoublequoteopen}{\isasymforall}p{\isasymin}dom\ {\isasymGamma}{\isachardot}\ {\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isacharquery}{\isasymTheta}\ {\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ \isanewline
\ \ \ \ \ \ \ \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\isanewline
\ \ \ \ \ \ \ \ \ {\isacharparenleft}Call\ p{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}intro\ ballI\ allI{\isacharcomma}\ rule\ HoarePartialDef{\isachardot}Asm{\isacharcomma}auto{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isacharquery}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}\ {\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault{\isacharbackquote}{\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ MGT{\isacharunderscore}lemma\ {\isacharbrackleft}OF\ MGT{\isacharunderscore}Calls{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{thus}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isacharquery}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}{\isacharquery}Pre\ p\ Z{\isacharparenright}\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}{\isacharquery}Post\ p\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}{\isacharquery}Abr\ p\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ConseqMGT{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}clarify{\isacharcomma}safe{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ defined\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}fastforce\ simp\ add{\isacharcolon}\ final{\isacharunderscore}notin{\isacharunderscore}def\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ intro{\isacharcolon}\ exec{\isachardot}intros{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ t\isanewline
\ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ defined\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}Normal\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ \ {\isacharparenleft}auto\ intro{\isacharcolon}\ exec{\isachardot}Call{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ t\isanewline
\ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ defined\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}Abrupt\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ \ {\isacharparenleft}auto\ intro{\isacharcolon}\ exec{\isachardot}Call{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{{\isacharbraceright}}\isamarkupfalse%
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}intro\ ballI\ allI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ CallRec{\isacharprime}\ {\isacharbrackleft}\isakeyword{where}\ Procs{\isacharequal}{\isachardoublequoteopen}dom\ {\isasymGamma}{\isachardoublequoteclose}\ \ \isakeyword{and}\ \isanewline
\ \ \ \ \ \ P{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}p\ Z{\isachardot}\ {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}Z\ {\isasymand}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}{\isasymnotin}{\isacharparenleft}{\isacharbraceleft}Stuck{\isacharbraceright}\ {\isasymunion}\ Fault\ {\isacharbackquote}\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isakeyword{and}\isanewline
\ \ \ \ \ \ Q{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}p\ Z{\isachardot}\ \isanewline
\ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Normal\ t{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ \ \ A{\isacharequal}{\isachardoublequoteopen}{\isasymlambda}p\ Z{\isachardot}\ \isanewline
\ \ \ \ \ \ \ \ {\isacharbraceleft}t{\isachardot}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ Z{\isasymrangle}\ {\isasymRightarrow}\ Abrupt\ t{\isacharbraceright}{\isachardoublequoteclose}{\isacharbrackright}\ {\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{theorem}\isamarkupfalse%
\ hoare{\isacharunderscore}complete{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ MGT{\isacharunderscore}implies{\isacharunderscore}complete\ MGT{\isacharunderscore}lemma\ {\isacharbrackleft}OF\ MGT{\isacharunderscore}Calls{\isacharbrackright}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ cvalid{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ \ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ {\isachardoublequoteopen}{\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ True\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharparenright}\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\ \isactrlesub P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}augment{\isacharunderscore}context{\isacharparenright}\ simp\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ False\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ cvalid\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ ExFalso{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\ \ \isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ hoare{\isacharunderscore}strip{\isacharunderscore}{\isasymGamma}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ p\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ F{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}F{\isacharprime}\ {\isasymsubseteq}\ {\isacharminus}F{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}strip\ F{\isacharprime}\ {\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ p\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ hoare{\isacharunderscore}sound\ {\isacharbrackleft}OF\ deriv{\isacharbrackright}\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ p\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ cvalid{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ this\ F{\isacharprime}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}strip\ F{\isacharprime}\ {\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ p\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ valid{\isacharunderscore}to{\isacharunderscore}valid{\isacharunderscore}strip{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{And Now: Some Useful Rules%
}
\isamarkuptrue%
%
\isamarkupsubsubsection{Consequence%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ LiberalConseq{\isacharunderscore}sound{\isacharcolon}\isanewline
\isakeyword{fixes}\ F{\isacharcolon}{\isacharcolon}{\isachardoublequoteopen}{\isacharprime}f\ set{\isachardoublequoteclose}\ \isanewline
\isakeyword{assumes}\ cons{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ {\isasymin}\ P{\isachardot}\ {\isasymforall}{\isacharparenleft}t{\isacharcolon}{\isacharcolon}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}f{\isacharparenright}\ xstate{\isacharparenright}{\isachardot}\ {\isasymexists}P{\isacharprime}\ Q{\isacharprime}\ A{\isacharprime}{\isachardot}\ {\isacharparenleft}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ c\ Q{\isacharprime}{\isacharcomma}A{\isacharprime}{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isacharparenleft}s\ {\isasymin}\ P{\isacharprime}\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q{\isacharprime}\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}{\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ P\ cons\ \isacommand{obtain}\isamarkupfalse%
\ P{\isacharprime}\ Q{\isacharprime}\ A{\isacharprime}\ \isakeyword{where}\isanewline
\ \ \ \ \ \ spec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ c\ Q{\isacharprime}{\isacharcomma}A{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ \ \ adapt{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}s\ {\isasymin}\ P{\isacharprime}\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q{\isacharprime}\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}drule\ {\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ bspec{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule{\isacharunderscore}tac\ x{\isacharequal}t\ \isakeyword{in}\ allE{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}elim\ exE\ conjE{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ iprover\isanewline
\ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ exec\ spec\ ctxt\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isacharprime}\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q{\isacharprime}\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ cnvalid{\isacharunderscore}def\ nvalid{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ adapt\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ LiberalConseq{\isacharcolon}\isanewline
\isakeyword{fixes}\ F{\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharprime}f\ set{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ cons{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ {\isasymin}\ P{\isachardot}\ \ {\isasymforall}{\isacharparenleft}t{\isacharcolon}{\isacharcolon}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}f{\isacharparenright}\ xstate{\isacharparenright}{\isachardot}\ {\isasymexists}P{\isacharprime}\ Q{\isacharprime}\ A{\isacharprime}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ c\ Q{\isacharprime}{\isacharcomma}A{\isacharprime}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isacharparenleft}s\ {\isasymin}\ P{\isacharprime}\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q{\isacharprime}\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ LiberalConseq{\isacharunderscore}sound{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ cons\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}clarify{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}drule\ {\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ bspec{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule{\isacharunderscore}tac\ x{\isacharequal}t\ \isakeyword{in}\ allE{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ clarify\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}P{\isacharprime}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}Q{\isacharprime}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}A{\isacharprime}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ conjI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ assumption\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}s\ {\isasymin}\ P{\isachardot}\ {\isasymexists}P{\isacharprime}\ Q{\isacharprime}\ A{\isacharprime}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ c\ Q{\isacharprime}{\isacharcomma}A{\isacharprime}\ {\isasymand}\ s\ {\isasymin}\ P{\isacharprime}\ {\isasymand}\ Q{\isacharprime}\ {\isasymsubseteq}\ Q\ {\isasymand}\ A{\isacharprime}\ {\isasymsubseteq}\ A\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ LiberalConseq{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ballI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}drule\ {\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ bspec{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ clarify\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}P{\isacharprime}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}Q{\isacharprime}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}A{\isacharprime}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\isanewline
\isakeyword{fixes}\ F{\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharprime}f\ set{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ cons{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ {\isasymin}\ P{\isachardot}\ \ {\isasymexists}P{\isacharprime}\ Q{\isacharprime}\ A{\isacharprime}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ c\ Q{\isacharprime}{\isacharcomma}A{\isacharprime}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}{\isacharparenleft}t{\isacharcolon}{\isacharcolon}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}f{\isacharparenright}\ xstate{\isacharparenright}{\isachardot}\ {\isacharparenleft}s\ {\isasymin}\ P{\isacharprime}\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q{\isacharprime}\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Conseq{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ballI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}insert\ cons{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}drule\ {\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ bspec{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ clarify\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}P{\isacharprime}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}Q{\isacharprime}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}A{\isacharprime}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ conjI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ \ assumption\isanewline
\ \ \isanewline
\ \ \isacommand{oops}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ LiberalConseq{\isacharprime}{\isacharcolon}\isanewline
\isakeyword{fixes}\ F{\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharprime}f\ set{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ cons{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ {\isasymin}\ P{\isachardot}\ \ {\isasymexists}P{\isacharprime}\ Q{\isacharprime}\ A{\isacharprime}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P{\isacharprime}\ c\ Q{\isacharprime}{\isacharcomma}A{\isacharprime}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}{\isacharparenleft}t{\isacharcolon}{\isacharcolon}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}f{\isacharparenright}\ xstate{\isacharparenright}{\isachardot}\ {\isacharparenleft}s\ {\isasymin}\ P{\isacharprime}\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q{\isacharprime}\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ LiberalConseq{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ballI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}insert\ cons{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}drule\ {\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ bspec{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ clarify\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}P{\isacharprime}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}Q{\isacharprime}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}A{\isacharprime}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ iprover\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ LiberalConseq{\isacharprime}{\isacharprime}{\isacharcolon}\isanewline
\isakeyword{fixes}\ F{\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharprime}f\ set{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ spec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ c\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ cons{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ {\isacharparenleft}t{\isacharcolon}{\isacharcolon}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}f{\isacharparenright}\ xstate{\isacharparenright}{\isachardot}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}Z{\isachardot}\ s\ {\isasymin}\ P{\isacharprime}\ Z\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q{\isacharprime}\ Z\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isacharprime}\ Z{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ {\isacharparenleft}s\ {\isasymin}\ P\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ LiberalConseq{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ballI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}insert\ cons{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule{\isacharunderscore}tac\ x{\isacharequal}s\ \isakeyword{in}\ allE{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule{\isacharunderscore}tac\ x{\isacharequal}t\ \isakeyword{in}\ allE{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}insert\ spec{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ iprover\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{primrec}\isamarkupfalse%
\ procs{\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}p{\isacharcomma}{\isacharprime}f{\isacharparenright}\ com\ {\isasymRightarrow}\ {\isacharprime}p\ set{\isachardoublequoteclose}\isanewline
\isakeyword{where}\isanewline
{\isachardoublequoteopen}procs\ Skip\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}procs\ {\isacharparenleft}Basic\ f{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}procs\ {\isacharparenleft}Seq\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharparenright}\ \ {\isacharequal}\ {\isacharparenleft}procs\ c\isactrlsub {\isadigit{1}}\ {\isasymunion}\ procs\ c\isactrlsub {\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}procs\ {\isacharparenleft}Cond\ b\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}procs\ c\isactrlsub {\isadigit{1}}\ {\isasymunion}\ procs\ c\isactrlsub {\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}procs\ {\isacharparenleft}While\ b\ c{\isacharparenright}\ {\isacharequal}\ procs\ c{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}procs\ {\isacharparenleft}Call\ p{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}p{\isacharbraceright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}procs\ {\isacharparenleft}DynCom\ c{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}{\isasymUnion}s{\isachardot}\ procs\ {\isacharparenleft}c\ s{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}procs\ {\isacharparenleft}Guard\ f\ g\ c{\isacharparenright}\ {\isacharequal}\ procs\ c{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}procs\ Throw\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}procs\ {\isacharparenleft}Catch\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}procs\ c\isactrlsub {\isadigit{1}}\ {\isasymunion}\ procs\ c\isactrlsub {\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{primrec}\isamarkupfalse%
\ noSpec{\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharprime}s{\isacharcomma}{\isacharprime}p{\isacharcomma}{\isacharprime}f{\isacharparenright}\ com\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\isanewline
\isakeyword{where}\isanewline
{\isachardoublequoteopen}noSpec\ Skip\ {\isacharequal}\ True{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}noSpec\ {\isacharparenleft}Basic\ f{\isacharparenright}\ {\isacharequal}\ True{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}noSpec\ {\isacharparenleft}Spec\ r{\isacharparenright}\ {\isacharequal}\ False{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}noSpec\ {\isacharparenleft}Seq\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharparenright}\ \ {\isacharequal}\ {\isacharparenleft}noSpec\ c\isactrlsub {\isadigit{1}}\ {\isasymand}\ noSpec\ c\isactrlsub {\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}noSpec\ {\isacharparenleft}Cond\ b\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}noSpec\ c\isactrlsub {\isadigit{1}}\ {\isasymand}\ noSpec\ c\isactrlsub {\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}noSpec\ {\isacharparenleft}While\ b\ c{\isacharparenright}\ {\isacharequal}\ noSpec\ c{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}noSpec\ {\isacharparenleft}Call\ p{\isacharparenright}\ {\isacharequal}\ True{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}noSpec\ {\isacharparenleft}DynCom\ c{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}{\isasymforall}s{\isachardot}\ noSpec\ {\isacharparenleft}c\ s{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}noSpec\ {\isacharparenleft}Guard\ f\ g\ c{\isacharparenright}\ {\isacharequal}\ noSpec\ c{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}noSpec\ Throw\ {\isacharequal}\ True{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}noSpec\ {\isacharparenleft}Catch\ c\isactrlsub {\isadigit{1}}\ c\isactrlsub {\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}noSpec\ c\isactrlsub {\isadigit{1}}\ {\isasymand}\ noSpec\ c\isactrlsub {\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ exec{\isacharunderscore}noSpec{\isacharunderscore}no{\isacharunderscore}Stuck{\isacharcolon}\isanewline
\ \isakeyword{assumes}\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}s{\isasymrangle}\ {\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \isakeyword{assumes}\ noSpec{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}noSpec\ c{\isachardoublequoteclose}\isanewline
\ \isakeyword{assumes}\ noSpec{\isacharunderscore}{\isasymGamma}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardot}\ noSpec\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \isakeyword{assumes}\ procs{\isacharunderscore}subset{\isacharcolon}\ {\isachardoublequoteopen}procs\ c\ {\isasymsubseteq}\ dom\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
\ \isakeyword{assumes}\ procs{\isacharunderscore}subset{\isacharunderscore}{\isasymGamma}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardot}\ procs\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ {\isasymsubseteq}\ dom\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
\ \isakeyword{assumes}\ s{\isacharunderscore}no{\isacharunderscore}Stuck{\isacharcolon}\ {\isachardoublequoteopen}s{\isasymnoteq}Stuck{\isachardoublequoteclose}\isanewline
\ \isakeyword{shows}\ {\isachardoublequoteopen}t{\isasymnoteq}Stuck{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ exec\ noSpec{\isacharunderscore}c\ procs{\isacharunderscore}subset\ s{\isacharunderscore}no{\isacharunderscore}Stuck\ \isacommand{proof}\isamarkupfalse%
\ induct\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Call\ p\ bdy\ s\ t{\isacharparenright}\ \isacommand{with}\isamarkupfalse%
\ noSpec{\isacharunderscore}{\isasymGamma}\ procs{\isacharunderscore}subset{\isacharunderscore}{\isasymGamma}\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ dest{\isacharbang}{\isacharcolon}\ bspec\ {\isacharbrackleft}of\ {\isacharunderscore}\ {\isacharunderscore}\ p{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}DynCom\ c\ s\ t{\isacharparenright}\ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \isacommand{by}\isamarkupfalse%
\ auto\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ execn{\isacharunderscore}noSpec{\isacharunderscore}no{\isacharunderscore}Stuck{\isacharcolon}\isanewline
\ \isakeyword{assumes}\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \isakeyword{assumes}\ noSpec{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}noSpec\ c{\isachardoublequoteclose}\isanewline
\ \isakeyword{assumes}\ noSpec{\isacharunderscore}{\isasymGamma}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardot}\ noSpec\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \isakeyword{assumes}\ procs{\isacharunderscore}subset{\isacharcolon}\ {\isachardoublequoteopen}procs\ c\ {\isasymsubseteq}\ dom\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
\ \isakeyword{assumes}\ procs{\isacharunderscore}subset{\isacharunderscore}{\isasymGamma}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardot}\ procs\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ {\isasymsubseteq}\ dom\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
\ \isakeyword{assumes}\ s{\isacharunderscore}no{\isacharunderscore}Stuck{\isacharcolon}\ {\isachardoublequoteopen}s{\isasymnoteq}Stuck{\isachardoublequoteclose}\isanewline
\ \isakeyword{shows}\ {\isachardoublequoteopen}t{\isasymnoteq}Stuck{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ exec\ noSpec{\isacharunderscore}c\ procs{\isacharunderscore}subset\ s{\isacharunderscore}no{\isacharunderscore}Stuck\ \isacommand{proof}\isamarkupfalse%
\ induct\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Call\ p\ bdy\ n\ s\ t{\isacharparenright}\ \isacommand{with}\isamarkupfalse%
\ noSpec{\isacharunderscore}{\isasymGamma}\ procs{\isacharunderscore}subset{\isacharunderscore}{\isasymGamma}\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ dest{\isacharbang}{\isacharcolon}\ bspec\ {\isacharbrackleft}of\ {\isacharunderscore}\ {\isacharunderscore}\ p{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}DynCom\ c\ s\ t{\isacharparenright}\ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ LiberalConseq{\isacharunderscore}noguards{\isacharunderscore}nothrows{\isacharunderscore}sound{\isacharcolon}\isanewline
\isakeyword{assumes}\ spec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ c\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ cons{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ {\isacharparenleft}{\isasymforall}Z{\isachardot}\ s\ {\isasymin}\ P{\isacharprime}\ Z\ {\isasymlongrightarrow}\ t\ {\isasymin}\ \ Q{\isacharprime}\ Z\ {\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ {\isacharparenleft}s\ {\isasymin}\ P\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Q\ {\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ noguards{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}noguards\ c{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ noguards{\isacharunderscore}{\isasymGamma}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardot}\ noguards\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ nothrows{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}nothrows\ c{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ nothrows{\isacharunderscore}{\isasymGamma}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardot}\ nothrows\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ noSpec{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}noSpec\ c{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ noSpec{\isacharunderscore}{\isasymGamma}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardot}\ noSpec\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ procs{\isacharunderscore}subset{\isacharcolon}\ {\isachardoublequoteopen}procs\ c\ {\isasymsubseteq}\ dom\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ procs{\isacharunderscore}subset{\isacharunderscore}{\isasymGamma}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardot}\ procs\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ {\isasymsubseteq}\ dom\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}{\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ execn{\isacharunderscore}noguards{\isacharunderscore}no{\isacharunderscore}Fault\ {\isacharbrackleft}OF\ exec\ noguards{\isacharunderscore}c\ noguards{\isacharunderscore}{\isasymGamma}{\isacharbrackright}\isanewline
\ \ \ \ \ execn{\isacharunderscore}nothrows{\isacharunderscore}no{\isacharunderscore}Abrupt\ {\isacharbrackleft}OF\ exec\ nothrows{\isacharunderscore}c\ nothrows{\isacharunderscore}{\isasymGamma}\ {\isacharbrackright}\isanewline
\ \ \ \ \ execn{\isacharunderscore}noSpec{\isacharunderscore}no{\isacharunderscore}Stuck\ {\isacharbrackleft}OF\ exec\ \ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ noSpec{\isacharunderscore}c\ \ noSpec{\isacharunderscore}{\isasymGamma}\ procs{\isacharunderscore}subset\ \isanewline
\ \ \ \ \ \ procs{\isacharunderscore}subset{\isacharunderscore}{\isasymGamma}{\isacharbrackright}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isanewline
\ \ \ \ \isacommand{obtain}\isamarkupfalse%
\ t{\isacharprime}\ \isakeyword{where}\ t{\isacharcolon}\ {\isachardoublequoteopen}t{\isacharequal}Normal\ t{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}cases\ t{\isacharparenright}\ auto\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec\ spec\ ctxt\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\isasymforall}Z{\isachardot}\ s\ {\isasymin}\ P{\isacharprime}\ Z\ {\isasymlongrightarrow}\ t{\isacharprime}\ {\isasymin}\ \ Q{\isacharprime}\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}unfold\ \ cnvalid{\isacharunderscore}def\ nvalid{\isacharunderscore}def{\isacharparenright}\ blast\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ cons\ P\ t\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ LiberalConseq{\isacharunderscore}noguards{\isacharunderscore}nothrows{\isacharcolon}\isanewline
\isakeyword{assumes}\ spec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharparenleft}P{\isacharprime}\ Z{\isacharparenright}\ c\ {\isacharparenleft}Q{\isacharprime}\ Z{\isacharparenright}{\isacharcomma}{\isacharparenleft}A{\isacharprime}\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ cons{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ {\isacharparenleft}{\isasymforall}Z{\isachardot}\ s\ {\isasymin}\ P{\isacharprime}\ Z\ {\isasymlongrightarrow}\ t\ {\isasymin}\ \ Q{\isacharprime}\ Z\ {\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ {\isacharparenleft}s\ {\isasymin}\ P\ {\isasymlongrightarrow}\ t\ {\isasymin}\ Q\ {\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ noguards{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}noguards\ c{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ noguards{\isacharunderscore}{\isasymGamma}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardot}\ noguards\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ nothrows{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}nothrows\ c{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ nothrows{\isacharunderscore}{\isasymGamma}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardot}\ nothrows\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ noSpec{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}noSpec\ c{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ noSpec{\isacharunderscore}{\isasymGamma}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardot}\ noSpec\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ procs{\isacharunderscore}subset{\isacharcolon}\ {\isachardoublequoteopen}procs\ c\ {\isasymsubseteq}\ dom\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ procs{\isacharunderscore}subset{\isacharunderscore}{\isasymGamma}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardot}\ procs\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ {\isasymsubseteq}\ dom\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A\ {\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ LiberalConseq{\isacharunderscore}noguards{\isacharunderscore}nothrows{\isacharunderscore}sound\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbrackleft}OF\ {\isacharunderscore}\ cons\ noguards{\isacharunderscore}c\ noguards{\isacharunderscore}{\isasymGamma}\ nothrows{\isacharunderscore}c\ nothrows{\isacharunderscore}{\isasymGamma}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ noSpec{\isacharunderscore}c\ noSpec{\isacharunderscore}{\isasymGamma}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ procs{\isacharunderscore}subset\ procs{\isacharunderscore}subset{\isacharunderscore}{\isasymGamma}{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}insert\ spec{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}intro\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}erule{\isacharunderscore}tac\ x{\isacharequal}Z\ \isakeyword{in}\ allE{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}cnvalid{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ \isanewline
\isakeyword{assumes}\ spec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}Z{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}fst\ Z\ {\isasymand}\ P\ s\ {\isacharparenleft}snd\ Z{\isacharparenright}{\isacharbraceright}\ c\ {\isacharbraceleft}t{\isachardot}\ Q\ {\isacharparenleft}fst\ Z{\isacharparenright}\ {\isacharparenleft}snd\ Z{\isacharparenright}\ t{\isacharbraceright}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ noguards{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}noguards\ c{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ noguards{\isacharunderscore}{\isasymGamma}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardot}\ noguards\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ nothrows{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}nothrows\ c{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ nothrows{\isacharunderscore}{\isasymGamma}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardot}\ nothrows\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ noSpec{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}noSpec\ c{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ noSpec{\isacharunderscore}{\isasymGamma}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardot}\ noSpec\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ procs{\isacharunderscore}subset{\isacharcolon}\ {\isachardoublequoteopen}procs\ c\ {\isasymsubseteq}\ dom\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ procs{\isacharunderscore}subset{\isacharunderscore}{\isasymGamma}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}p\ {\isasymin}\ dom\ {\isasymGamma}{\isachardot}\ procs\ {\isacharparenleft}the\ {\isacharparenleft}{\isasymGamma}\ p{\isacharparenright}{\isacharparenright}\ {\isasymsubseteq}\ dom\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub {\isacharbraceleft}s{\isachardot}\ s{\isacharequal}{\isasymsigma}{\isacharbraceright}\ c\ {\isacharbraceleft}t{\isachardot}\ {\isasymforall}l{\isachardot}\ P\ {\isasymsigma}\ l\ {\isasymlongrightarrow}\ Q\ {\isasymsigma}\ l\ t{\isacharbraceright}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ LiberalConseq{\isacharunderscore}noguards{\isacharunderscore}nothrows\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharbrackleft}OF\ spec\ {\isacharunderscore}\ noguards{\isacharunderscore}c\ noguards{\isacharunderscore}{\isasymGamma}\ nothrows{\isacharunderscore}c\ nothrows{\isacharunderscore}{\isasymGamma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ noSpec{\isacharunderscore}c\ noSpec{\isacharunderscore}{\isasymGamma}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ procs{\isacharunderscore}subset\ procs{\isacharunderscore}subset{\isacharunderscore}{\isasymGamma}{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsubsection{Modify Return%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ ProcModifyReturn{\isacharunderscore}sound{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ valid{\isacharunderscore}call{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ call\ init\ p\ return{\isacharprime}\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ valid{\isacharunderscore}modif{\isacharcolon}\ \isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}UNIV\isactrlesub \ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ Call\ p\ {\isacharparenleft}Modif\ {\isasymsigma}{\isacharparenright}{\isacharcomma}{\isacharparenleft}ModifAbr\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ ret{\isacharunderscore}modif{\isacharcolon}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ Modif\ {\isacharparenleft}init\ s{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ ret{\isacharunderscore}modifAbr{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ ModifAbr\ {\isacharparenleft}init\ s{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}call\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ ctxt{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}UNIV\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ nvalid{\isacharunderscore}augment{\isacharunderscore}Faults{\isacharparenright}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ p\ return\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ exec\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}\ execn{\isacharunderscore}call{\isacharunderscore}Normal{\isacharunderscore}elim{\isacharparenright}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ bdy\ m\ t{\isacharprime}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ p\ {\isacharequal}\ Some\ bdy{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}body{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}bdy{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}m{\isasymRightarrow}\ Normal\ t{\isacharprime}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c\ s\ t{\isacharprime}{\isacharcomma}Normal\ {\isacharparenleft}return\ s\ t{\isacharprime}{\isacharparenright}{\isasymrangle}\ {\isacharequal}Suc\ m{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ n{\isacharcolon}\ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ exec{\isacharunderscore}body\ n\ bdy\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ Normal\ t{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ intro{\isacharcolon}\ execn{\isachardot}Call{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}modif\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharcomma}\ of\ n\ {\isachardoublequoteopen}init\ s{\isachardoublequoteclose}{\isacharbrackright}\ ctxt{\isacharprime}\ this{\isacharbrackright}\ P\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymin}\ Modif\ {\isacharparenleft}init\ s{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ ret{\isacharunderscore}modif\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Normal\ {\isacharparenleft}return{\isacharprime}\ s\ t{\isacharprime}{\isacharparenright}\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ Normal\ {\isacharparenleft}return\ s\ t{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec{\isacharunderscore}body\ exec{\isacharunderscore}c\ bdy\ n\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ p\ return{\isacharprime}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}call{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}call\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ this{\isacharbrackright}\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ bdy\ m\ t{\isacharprime}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ p\ {\isacharequal}\ Some\ bdy{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}body{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}bdy{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}m{\isasymRightarrow}\ Abrupt\ t{\isacharprime}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ n{\isacharcolon}\ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isacharequal}\ Abrupt\ {\isacharparenleft}return\ s\ t{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{from}\isamarkupfalse%
\ exec{\isacharunderscore}body\ n\ bdy\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ Abrupt\ t{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ intro{\isacharcolon}\ execn{\isachardot}intros{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}modif\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharcomma}\ of\ n\ {\isachardoublequoteopen}init\ s{\isachardoublequoteclose}{\isacharbrackright}\ ctxt{\isacharprime}\ this{\isacharbrackright}\ P\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymin}\ ModifAbr\ {\isacharparenleft}init\ s{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ ret{\isacharunderscore}modifAbr\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Abrupt\ {\isacharparenleft}return\ s\ t{\isacharprime}{\isacharparenright}\ {\isacharequal}\ Abrupt\ {\isacharparenleft}return{\isacharprime}\ s\ t{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isacharequal}\ Abrupt\ {\isacharparenleft}return{\isacharprime}\ s\ t{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\ \ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec{\isacharunderscore}body\ bdy\ n\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ p\ return{\isacharprime}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}callAbrupt{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}call\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ this{\isacharbrackright}\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ bdy\ m\ f\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ p\ {\isacharequal}\ Some\ bdy{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}bdy{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}m{\isasymRightarrow}\ Fault\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}t\ {\isacharequal}\ Fault\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ bdy\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ p\ return{\isacharprime}\ c\ {\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}callFault{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}call\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ this\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ bdy\ m\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ p\ {\isacharequal}\ Some\ bdy{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}bdy{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}m{\isasymRightarrow}\ Stuck{\isachardoublequoteclose}\ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}t\ {\isacharequal}\ Stuck{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ bdy\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ p\ return{\isacharprime}\ c\ {\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}callStuck{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}call\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ this\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ m\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}\ p\ {\isacharequal}\ None{\isachardoublequoteclose}\isanewline
\ \ \ \ \isakeyword{and}\ \ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\ {\isachardoublequoteopen}t\ {\isacharequal}\ Stuck{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ p\ return{\isacharprime}\ c\ {\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}callUndefined{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}call\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ this\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcModifyReturn{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ spec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}call\ init\ p\ return{\isacharprime}\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ result{\isacharunderscore}conform{\isacharcolon}\isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ Modif\ {\isacharparenleft}init\ s{\isacharparenright}\ {\isasymlongrightarrow}\ {\isacharparenleft}return{\isacharprime}\ s\ t{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}return\ s\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ return{\isacharunderscore}conform{\isacharcolon}\isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ ModifAbr\ {\isacharparenleft}init\ s{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ {\isacharparenleft}return{\isacharprime}\ s\ t{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}return\ s\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ modifies{\isacharunderscore}spec{\isacharcolon}\ \ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}UNIV\isactrlesub \ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ Call\ p\ {\isacharparenleft}Modif\ {\isasymsigma}{\isacharparenright}{\isacharcomma}{\isacharparenleft}ModifAbr\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}call\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ProcModifyReturn{\isacharunderscore}sound\ \isanewline
\ \ \ \ \ \ \ \ \ \ {\isacharbrackleft}\isakeyword{where}\ Modif{\isacharequal}Modif\ \isakeyword{and}\ ModifAbr{\isacharequal}ModifAbr{\isacharcomma}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ OF\ {\isacharunderscore}\ {\isacharunderscore}\ result{\isacharunderscore}conform\ return{\isacharunderscore}conform{\isacharbrackright}\ {\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ spec\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ modifies{\isacharunderscore}spec\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcModifyReturnSameFaults{\isacharunderscore}sound{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ valid{\isacharunderscore}call{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ call\ init\ p\ return{\isacharprime}\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ valid{\isacharunderscore}modif{\isacharcolon}\ \isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ Call\ p\ {\isacharparenleft}Modif\ {\isasymsigma}{\isacharparenright}{\isacharcomma}{\isacharparenleft}ModifAbr\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ ret{\isacharunderscore}modif{\isacharcolon}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ Modif\ {\isacharparenleft}init\ s{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ ret{\isacharunderscore}modifAbr{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ ModifAbr\ {\isacharparenleft}init\ s{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}call\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ p\ return\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ exec\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}\ execn{\isacharunderscore}call{\isacharunderscore}Normal{\isacharunderscore}elim{\isacharparenright}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ bdy\ m\ t{\isacharprime}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ p\ {\isacharequal}\ Some\ bdy{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}body{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}bdy{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}m{\isasymRightarrow}\ Normal\ t{\isacharprime}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c\ s\ t{\isacharprime}{\isacharcomma}Normal\ {\isacharparenleft}return\ s\ t{\isacharprime}{\isacharparenright}{\isasymrangle}\ {\isacharequal}Suc\ m{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ n{\isacharcolon}\ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ exec{\isacharunderscore}body\ n\ bdy\ \isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ Normal\ t{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ intro{\isacharcolon}\ execn{\isachardot}intros{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}modif\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharcomma}\ of\ n\ {\isachardoublequoteopen}init\ s{\isachardoublequoteclose}{\isacharbrackright}\ ctxt\ this{\isacharbrackright}\ P\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymin}\ Modif\ {\isacharparenleft}init\ s{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ ret{\isacharunderscore}modif\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Normal\ {\isacharparenleft}return{\isacharprime}\ s\ t{\isacharprime}{\isacharparenright}\ {\isacharequal}\ \isanewline
\ \ \ \ \ \ Normal\ {\isacharparenleft}return\ s\ t{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec{\isacharunderscore}body\ exec{\isacharunderscore}c\ bdy\ n\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ p\ return{\isacharprime}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}call{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}call\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ this{\isacharbrackright}\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ bdy\ m\ t{\isacharprime}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ p\ {\isacharequal}\ Some\ bdy{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}body{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}bdy{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}m{\isasymRightarrow}\ Abrupt\ t{\isacharprime}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ n{\isacharcolon}\ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isacharequal}\ Abrupt\ {\isacharparenleft}return\ s\ t{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ exec{\isacharunderscore}body\ n\ bdy\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ p{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}n\ {\isasymRightarrow}\ Abrupt\ t{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ intro{\isacharcolon}\ execn{\isachardot}intros{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}modif\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharcomma}\ of\ n\ {\isachardoublequoteopen}init\ s{\isachardoublequoteclose}{\isacharbrackright}\ ctxt\ this{\isacharbrackright}\ P\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymin}\ ModifAbr\ {\isacharparenleft}init\ s{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ ret{\isacharunderscore}modifAbr\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Abrupt\ {\isacharparenleft}return\ s\ t{\isacharprime}{\isacharparenright}\ {\isacharequal}\ Abrupt\ {\isacharparenleft}return{\isacharprime}\ s\ t{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isacharequal}\ Abrupt\ {\isacharparenleft}return{\isacharprime}\ s\ t{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec{\isacharunderscore}body\ bdy\ n\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ p\ return{\isacharprime}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}callAbrupt{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}call\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ this{\isacharbrackright}\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ bdy\ m\ f\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ p\ {\isacharequal}\ Some\ bdy{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}bdy{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}m{\isasymRightarrow}\ Fault\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\ \ \isakeyword{and}\isanewline
\ \ \ \ \ \ t{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isacharequal}\ Fault\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ bdy\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ p\ return{\isacharprime}\ c\ {\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}callFault{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}call\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ this\ P{\isacharbrackright}\ t\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ bdy\ m\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ p\ {\isacharequal}\ Some\ bdy{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}bdy{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}m{\isasymRightarrow}\ Stuck{\isachardoublequoteclose}\ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}t\ {\isacharequal}\ Stuck{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ bdy\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ p\ return{\isacharprime}\ c\ {\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}callStuck{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}call\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ this\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ m\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}\ p\ {\isacharequal}\ None{\isachardoublequoteclose}\isanewline
\ \ \ \ \isakeyword{and}\ \ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\ {\isachardoublequoteopen}t\ {\isacharequal}\ Stuck{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ p\ return{\isacharprime}\ c\ {\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}callUndefined{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}call\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ this\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ProcModifyReturnSameFaults{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ spec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}call\ init\ p\ return{\isacharprime}\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ result{\isacharunderscore}conform{\isacharcolon}\isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ Modif\ {\isacharparenleft}init\ s{\isacharparenright}\ {\isasymlongrightarrow}\ {\isacharparenleft}return{\isacharprime}\ s\ t{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}return\ s\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ return{\isacharunderscore}conform{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ ModifAbr\ {\isacharparenleft}init\ s{\isacharparenright}\ {\isasymlongrightarrow}\ {\isacharparenleft}return{\isacharprime}\ s\ t{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}return\ s\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ modifies{\isacharunderscore}spec{\isacharcolon}\ \ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ Call\ p\ {\isacharparenleft}Modif\ {\isasymsigma}{\isacharparenright}{\isacharcomma}{\isacharparenleft}ModifAbr\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}call\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ProcModifyReturnSameFaults{\isacharunderscore}sound\ \isanewline
\ \ \ \ \ \ \ \ \ \ {\isacharbrackleft}\isakeyword{where}\ Modif{\isacharequal}Modif\ \isakeyword{and}\ ModifAbr{\isacharequal}ModifAbr{\isacharcomma}\ \isanewline
\ \ \ \ \ \ \ \ \ OF\ {\isacharunderscore}\ {\isacharunderscore}\ result{\isacharunderscore}conform\ return{\isacharunderscore}conform{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ spec\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ modifies{\isacharunderscore}spec\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsubsection{DynCall%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ dynProcModifyReturn{\isacharunderscore}sound{\isacharcolon}\isanewline
\isakeyword{assumes}\ valid{\isacharunderscore}call{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ dynCall\ init\ p\ return{\isacharprime}\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ valid{\isacharunderscore}modif{\isacharcolon}\ \isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}s\ {\isasymin}\ P{\isachardot}\ {\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymforall}n{\isachardot}\ \isanewline
\ \ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}UNIV\isactrlesub \ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ Call\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharparenleft}Modif\ {\isasymsigma}{\isacharparenright}{\isacharcomma}{\isacharparenleft}ModifAbr\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\isakeyword{assumes}\ ret{\isacharunderscore}modif{\isacharcolon}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ Modif\ {\isacharparenleft}init\ s{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ ret{\isacharunderscore}modifAbr{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ ModifAbr\ {\isacharparenleft}init\ s{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}dynCall\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ ctxt{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}UNIV\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ nvalid{\isacharunderscore}augment{\isacharunderscore}Faults{\isacharparenright}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}dynCall\ init\ p\ return\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ valid{\isacharunderscore}modif\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ valid{\isacharunderscore}modif{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymforall}n{\isachardot}\ \isanewline
\ \ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}UNIV\isactrlesub \ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ Call\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharparenleft}Modif\ {\isasymsigma}{\isacharparenright}{\isacharcomma}{\isacharparenleft}ModifAbr\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ exec\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ {\isacharparenleft}p\ s{\isacharparenright}\ return\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}\ execn{\isacharunderscore}dynCall{\isacharunderscore}Normal{\isacharunderscore}elim{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}\ execn{\isacharunderscore}call{\isacharunderscore}Normal{\isacharunderscore}elim{\isacharparenright}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ bdy\ m\ t{\isacharprime}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharequal}\ Some\ bdy{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}body{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}bdy{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}m{\isasymRightarrow}\ Normal\ t{\isacharprime}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c\ s\ t{\isacharprime}{\isacharcomma}Normal\ {\isacharparenleft}return\ s\ t{\isacharprime}{\isacharparenright}{\isasymrangle}\ {\isacharequal}Suc\ m{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ n{\isacharcolon}\ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ exec{\isacharunderscore}body\ n\ bdy\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ Normal\ t{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ intro{\isacharcolon}\ execn{\isachardot}intros{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}modif{\isacharprime}\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharcomma}\ of\ n\ {\isachardoublequoteopen}init\ s{\isachardoublequoteclose}{\isacharbrackright}\ ctxt{\isacharprime}\ this{\isacharbrackright}\ P\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymin}\ Modif\ {\isacharparenleft}init\ s{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ ret{\isacharunderscore}modif\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Normal\ {\isacharparenleft}return{\isacharprime}\ s\ t{\isacharprime}{\isacharparenright}\ {\isacharequal}\ Normal\ {\isacharparenleft}return\ s\ t{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec{\isacharunderscore}body\ exec{\isacharunderscore}c\ bdy\ n\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ {\isacharparenleft}p\ s{\isacharparenright}\ return{\isacharprime}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}call{\isacharparenright}\isanewline
\ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ execn{\isacharunderscore}dynCall{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}call\ ctxt\ this{\isacharbrackright}\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ bdy\ m\ t{\isacharprime}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharequal}\ Some\ bdy{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}body{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}bdy{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}m{\isasymRightarrow}\ Abrupt\ t{\isacharprime}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ n{\isacharcolon}\ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isacharequal}\ Abrupt\ {\isacharparenleft}return\ s\ t{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{from}\isamarkupfalse%
\ exec{\isacharunderscore}body\ n\ bdy\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ Abrupt\ t{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ intro{\isacharcolon}\ execn{\isachardot}intros{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}modif{\isacharprime}\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharcomma}\ of\ n\ {\isachardoublequoteopen}init\ s{\isachardoublequoteclose}{\isacharbrackright}\ ctxt{\isacharprime}\ this{\isacharbrackright}\ P\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymin}\ ModifAbr\ {\isacharparenleft}init\ s{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ ret{\isacharunderscore}modifAbr\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Abrupt\ {\isacharparenleft}return\ s\ t{\isacharprime}{\isacharparenright}\ {\isacharequal}\ Abrupt\ {\isacharparenleft}return{\isacharprime}\ s\ t{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isacharequal}\ Abrupt\ {\isacharparenleft}return{\isacharprime}\ s\ t{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec{\isacharunderscore}body\ bdy\ n\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ {\isacharparenleft}p\ s{\isacharparenright}\ return{\isacharprime}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}callAbrupt{\isacharparenright}\isanewline
\ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ execn{\isacharunderscore}dynCall{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}call\ ctxt\ this{\isacharbrackright}\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ bdy\ m\ f\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharequal}\ Some\ bdy{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}bdy{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}m{\isasymRightarrow}\ Fault\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}t\ {\isacharequal}\ Fault\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ bdy\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ {\isacharparenleft}p\ s{\isacharparenright}\ return{\isacharprime}\ c\ {\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}callFault{\isacharparenright}\isanewline
\ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ execn{\isacharunderscore}dynCall{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}call\ ctxt\ this\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ bdy\ m\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharequal}\ Some\ bdy{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}bdy{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}m{\isasymRightarrow}\ Stuck{\isachardoublequoteclose}\ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}t\ {\isacharequal}\ Stuck{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ bdy\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ {\isacharparenleft}p\ s{\isacharparenright}\ return{\isacharprime}\ c\ {\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}callStuck{\isacharparenright}\isanewline
\ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ execn{\isacharunderscore}dynCall{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}call\ ctxt\ this\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ m\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharequal}\ None{\isachardoublequoteclose}\isanewline
\ \ \ \ \isakeyword{and}\ \ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\ {\isachardoublequoteopen}t\ {\isacharequal}\ Stuck{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ {\isacharparenleft}p\ s{\isacharparenright}\ return{\isacharprime}\ c\ {\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}callUndefined{\isacharparenright}\isanewline
\ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ execn{\isacharunderscore}dynCall{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}call\ ctxt\ this\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ dynProcModifyReturn{\isacharcolon}\isanewline
\isakeyword{assumes}\ dyn{\isacharunderscore}call{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ dynCall\ init\ p\ return{\isacharprime}\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ ret{\isacharunderscore}modif{\isacharcolon}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ Modif\ {\isacharparenleft}init\ s{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ ret{\isacharunderscore}modifAbr{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ ModifAbr\ {\isacharparenleft}init\ s{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ modif{\isacharcolon}\ \isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}s\ {\isasymin}\ P{\isachardot}\ {\isasymforall}{\isasymsigma}{\isachardot}\ \ \isanewline
\ \ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}UNIV\isactrlesub \ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ Call\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharparenleft}Modif\ {\isasymsigma}{\isacharparenright}{\isacharcomma}{\isacharparenleft}ModifAbr\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}dynCall\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ dynProcModifyReturn{\isacharunderscore}sound\ {\isacharbrackleft}\isakeyword{where}\ Modif{\isacharequal}Modif\ \isakeyword{and}\ ModifAbr{\isacharequal}ModifAbr{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ OF\ hoare{\isacharunderscore}cnvalid\ {\isacharbrackleft}OF\ dyn{\isacharunderscore}call{\isacharbrackright}\ {\isacharunderscore}\ ret{\isacharunderscore}modif\ ret{\isacharunderscore}modifAbr{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}intro\ ballI\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}cnvalid\ {\isacharbrackleft}OF\ modif\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ assumption\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ dynProcModifyReturnSameFaults{\isacharunderscore}sound{\isacharcolon}\isanewline
\isakeyword{assumes}\ valid{\isacharunderscore}call{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ dynCall\ init\ p\ return{\isacharprime}\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ valid{\isacharunderscore}modif{\isacharcolon}\ \isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}s\ {\isasymin}\ P{\isachardot}\ {\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymforall}n{\isachardot}\ \isanewline
\ \ \ \ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ Call\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharparenleft}Modif\ {\isasymsigma}{\isacharparenright}{\isacharcomma}{\isacharparenleft}ModifAbr\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\isakeyword{assumes}\ ret{\isacharunderscore}modif{\isacharcolon}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ Modif\ {\isacharparenleft}init\ s{\isacharparenright}\ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ ret{\isacharunderscore}modifAbr{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ ModifAbr\ {\isacharparenleft}init\ s{\isacharparenright}\ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}dynCall\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}dynCall\ init\ p\ return\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ valid{\isacharunderscore}modif\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ valid{\isacharunderscore}modif{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymforall}n{\isachardot}\ \isanewline
\ \ \ \ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ Call\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharparenleft}Modif\ {\isasymsigma}{\isacharparenright}{\isacharcomma}{\isacharparenleft}ModifAbr\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ exec\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ {\isacharparenleft}p\ s{\isacharparenright}\ return\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}\ execn{\isacharunderscore}dynCall{\isacharunderscore}Normal{\isacharunderscore}elim{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}\ execn{\isacharunderscore}call{\isacharunderscore}Normal{\isacharunderscore}elim{\isacharparenright}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ bdy\ m\ t{\isacharprime}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharequal}\ Some\ bdy{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}body{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}bdy{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}m{\isasymRightarrow}\ Normal\ t{\isacharprime}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c\ s\ t{\isacharprime}{\isacharcomma}Normal\ {\isacharparenleft}return\ s\ t{\isacharprime}{\isacharparenright}{\isasymrangle}\ {\isacharequal}Suc\ m{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ n{\isacharcolon}\ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ exec{\isacharunderscore}body\ n\ bdy\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}n\ {\isasymRightarrow}\ Normal\ t{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ intro{\isacharcolon}\ execn{\isachardot}Call{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}modif{\isacharprime}\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharcomma}\ of\ n\ {\isachardoublequoteopen}init\ s{\isachardoublequoteclose}{\isacharbrackright}\ ctxt\ this{\isacharbrackright}\ P\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymin}\ Modif\ {\isacharparenleft}init\ s{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ ret{\isacharunderscore}modif\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Normal\ {\isacharparenleft}return{\isacharprime}\ s\ t{\isacharprime}{\isacharparenright}\ {\isacharequal}\ Normal\ {\isacharparenleft}return\ s\ t{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec{\isacharunderscore}body\ exec{\isacharunderscore}c\ bdy\ n\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ {\isacharparenleft}p\ s{\isacharparenright}\ return{\isacharprime}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}call{\isacharparenright}\isanewline
\ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ execn{\isacharunderscore}dynCall{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}call\ ctxt\ this{\isacharbrackright}\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ bdy\ m\ t{\isacharprime}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharequal}\ Some\ bdy{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}body{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}bdy{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}m{\isasymRightarrow}\ Abrupt\ t{\isacharprime}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ n{\isacharcolon}\ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isacharequal}\ Abrupt\ {\isacharparenleft}return\ s\ t{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{from}\isamarkupfalse%
\ exec{\isacharunderscore}body\ n\ bdy\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}Call\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}n\ {\isasymRightarrow}\ Abrupt\ t{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ intro{\isacharcolon}\ execn{\isachardot}intros{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}modif{\isacharprime}\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharcomma}\ of\ n\ {\isachardoublequoteopen}init\ s{\isachardoublequoteclose}{\isacharbrackright}\ ctxt\ this{\isacharbrackright}\ P\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymin}\ ModifAbr\ {\isacharparenleft}init\ s{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ ret{\isacharunderscore}modifAbr\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Abrupt\ {\isacharparenleft}return\ s\ t{\isacharprime}{\isacharparenright}\ {\isacharequal}\ Abrupt\ {\isacharparenleft}return{\isacharprime}\ s\ t{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isacharequal}\ Abrupt\ {\isacharparenleft}return{\isacharprime}\ s\ t{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec{\isacharunderscore}body\ bdy\ n\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ {\isacharparenleft}p\ s{\isacharparenright}\ return{\isacharprime}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}callAbrupt{\isacharparenright}\isanewline
\ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ execn{\isacharunderscore}dynCall{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}call\ ctxt\ this{\isacharbrackright}\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ bdy\ m\ f\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharequal}\ Some\ bdy{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}bdy{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}m{\isasymRightarrow}\ Fault\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\ \ \isakeyword{and}\isanewline
\ \ \ \ \ \ t{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isacharequal}\ Fault\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ bdy\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ {\isacharparenleft}p\ s{\isacharparenright}\ return{\isacharprime}\ c\ {\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}callFault{\isacharparenright}\isanewline
\ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ execn{\isacharunderscore}dynCall{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}call\ ctxt\ this\ P{\isacharbrackright}\ t\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ bdy\ m\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ bdy{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharequal}\ Some\ bdy{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}bdy{\isacharcomma}Normal\ {\isacharparenleft}init\ s{\isacharparenright}{\isasymrangle}\ {\isacharequal}m{\isasymRightarrow}\ Stuck{\isachardoublequoteclose}\ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}t\ {\isacharequal}\ Stuck{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ bdy\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ {\isacharparenleft}p\ s{\isacharparenright}\ return{\isacharprime}\ c\ {\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}callStuck{\isacharparenright}\isanewline
\ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ execn{\isacharunderscore}dynCall{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}call\ ctxt\ this\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ m\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharequal}\ None{\isachardoublequoteclose}\isanewline
\ \ \ \ \isakeyword{and}\ \ {\isachardoublequoteopen}n\ {\isacharequal}\ Suc\ m{\isachardoublequoteclose}\ {\isachardoublequoteopen}t\ {\isacharequal}\ Stuck{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}call\ init\ {\isacharparenleft}p\ s{\isacharparenright}\ return{\isacharprime}\ c\ {\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}callUndefined{\isacharparenright}\isanewline
\ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}dynCall\ init\ p\ return{\isacharprime}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ execn{\isacharunderscore}dynCall{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}call\ ctxt\ this\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ dynProcModifyReturnSameFaults{\isacharcolon}\isanewline
\isakeyword{assumes}\ dyn{\isacharunderscore}call{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ dynCall\ init\ p\ return{\isacharprime}\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ ret{\isacharunderscore}modif{\isacharcolon}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ Modif\ {\isacharparenleft}init\ s{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ ret{\isacharunderscore}modifAbr{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}s\ t{\isachardot}\ t\ {\isasymin}\ ModifAbr\ {\isacharparenleft}init\ s{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ return{\isacharprime}\ s\ t\ {\isacharequal}\ return\ s\ t{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ modif{\isacharcolon}\ \isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}s\ {\isasymin}\ P{\isachardot}\ {\isasymforall}{\isasymsigma}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ Call\ {\isacharparenleft}p\ s{\isacharparenright}\ {\isacharparenleft}Modif\ {\isasymsigma}{\isacharparenright}{\isacharcomma}{\isacharparenleft}ModifAbr\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}dynCall\ init\ p\ return\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ dynProcModifyReturnSameFaults{\isacharunderscore}sound\ \isanewline
\ \ \ \ \ \ \ \ {\isacharbrackleft}\isakeyword{where}\ Modif{\isacharequal}Modif\ \isakeyword{and}\ ModifAbr{\isacharequal}ModifAbr{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ OF\ hoare{\isacharunderscore}cnvalid\ {\isacharbrackleft}OF\ dyn{\isacharunderscore}call{\isacharbrackright}\ {\isacharunderscore}\ ret{\isacharunderscore}modif\ ret{\isacharunderscore}modifAbr{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}intro\ ballI\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}cnvalid\ {\isacharbrackleft}OF\ modif\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ assumption\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsubsection{Conjunction of Postcondition%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ PostConjI{\isacharunderscore}sound{\isacharcolon}\isanewline
\isakeyword{assumes}\ valid{\isacharunderscore}Q{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\isakeyword{assumes}\ valid{\isacharunderscore}R{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ R{\isacharcomma}B{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ {\isacharparenleft}Q\ {\isasyminter}\ R{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ {\isasyminter}\ B{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}Q\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ exec\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}R\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ exec\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ R\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ B{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ {\isacharparenleft}Q\ {\isasyminter}\ R{\isacharparenright}\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ {\isacharparenleft}A\ {\isasyminter}\ B{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ PostConjI{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}Q{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}R{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ R{\isacharcomma}B{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ {\isacharparenleft}Q\ {\isasyminter}\ R{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ {\isasyminter}\ B{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ PostConjI{\isacharunderscore}sound{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ deriv{\isacharunderscore}Q\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ deriv{\isacharunderscore}R\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Merge{\isacharunderscore}PostConj{\isacharunderscore}sound{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ validF{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ validG{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}G\isactrlesub \ P{\isacharprime}\ c\ R{\isacharcomma}X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ F{\isacharunderscore}G{\isacharcolon}\ {\isachardoublequoteopen}F\ {\isasymsubseteq}\ G{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ P{\isacharunderscore}P{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ P{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ {\isacharparenleft}Q\ {\isasyminter}\ R{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ {\isasyminter}\ X{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ F{\isacharunderscore}G\ \isacommand{have}\isamarkupfalse%
\ ctxt{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}G\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ nvalid{\isacharunderscore}augment{\isacharunderscore}Faults{\isacharparenright}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ P{\isacharunderscore}P{\isacharprime}\ \isacommand{have}\isamarkupfalse%
\ P{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}noFault{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ {\isacharparenleft}Q\ {\isasyminter}\ R{\isacharparenright}\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ {\isacharparenleft}A\ {\isasyminter}\ X{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ validF\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ exec\ P\ t{\isacharunderscore}noFault{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isacharasterisk}{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ G{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ validG\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt{\isacharprime}\ exec\ P{\isacharprime}\ this{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ R\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ X{\isachardoublequoteclose}\ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ {\isacharasterisk}\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Merge{\isacharunderscore}PostConj{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ validF{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ validG{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}G\isactrlesub \ P{\isacharprime}\ c\ R{\isacharcomma}X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ F{\isacharunderscore}G{\isacharcolon}\ {\isachardoublequoteopen}F\ {\isasymsubseteq}\ G{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ P{\isacharunderscore}P{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ P{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ {\isacharparenleft}Q\ {\isasyminter}\ R{\isacharparenright}{\isacharcomma}{\isacharparenleft}A\ {\isasyminter}\ X{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Merge{\isacharunderscore}PostConj{\isacharunderscore}sound\ {\isacharbrackleft}OF\ {\isacharunderscore}\ {\isacharunderscore}\ F{\isacharunderscore}G\ P{\isacharunderscore}P{\isacharprime}{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ validF\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}hoare{\isacharunderscore}cnvalid{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ validG\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}hoare{\isacharunderscore}cnvalid{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsubsection{Weaken Context%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ WeakenContext{\isacharunderscore}sound{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ valid{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isacharprime}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ valid{\isacharunderscore}ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isacharprime}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ valid{\isacharunderscore}ctxt\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ ctxt{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isacharprime}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ cnvalid{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}c\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt{\isacharprime}\ exec\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ WeakenContext{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isacharprime}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}p{\isacharcomma}Q{\isacharcomma}A{\isacharparenright}{\isasymin}{\isasymTheta}{\isacharprime}{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ WeakenContext{\isacharunderscore}sound{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ deriv{\isacharunderscore}c\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ deriv{\isacharunderscore}ctxt\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsubsection{Guards and Guarantees%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ SplitGuards{\isacharunderscore}sound{\isacharcolon}\isanewline
\isakeyword{assumes}\ valid{\isacharunderscore}c{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\isactrlsub {\isadigit{1}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ valid{\isacharunderscore}c{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\isactrlsub {\isadigit{2}}\ UNIV{\isacharcomma}UNIV{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ c{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}c\isactrlsub {\isadigit{1}}\ {\isasyminter}\isactrlsub g\ c\isactrlsub {\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ Some\ c{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}\ {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ t{\isacharparenright}\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ Normal\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ inter{\isacharunderscore}guards{\isacharunderscore}execn{\isacharunderscore}noFault\ {\isacharbrackleft}OF\ c\ exec{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c\isactrlsub {\isadigit{1}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}c{\isadigit{1}}\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ this\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ Abrupt\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ inter{\isacharunderscore}guards{\isacharunderscore}execn{\isacharunderscore}noFault\ {\isacharbrackleft}OF\ c\ exec{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c\isactrlsub {\isadigit{1}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}c{\isadigit{1}}\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ this\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Fault\ f{\isacharparenright}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec\ inter{\isacharunderscore}guards{\isacharunderscore}execn{\isacharunderscore}Fault\ {\isacharbrackleft}OF\ c{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c\isactrlsub {\isadigit{1}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ Fault\ f\ {\isasymor}\ {\isasymGamma}{\isasymturnstile}{\isasymlangle}c\isactrlsub {\isadigit{2}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ Fault\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}\ disjE\ {\isacharbrackleft}consumes\ {\isadigit{1}}{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c\isactrlsub {\isadigit{1}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ Fault\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ Fault\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}c{\isadigit{1}}\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ this\ P{\isacharbrackright}\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c\isactrlsub {\isadigit{2}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ Fault\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ Fault\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}c{\isadigit{2}}\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ this\ P{\isacharbrackright}\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ Stuck\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ inter{\isacharunderscore}guards{\isacharunderscore}execn{\isacharunderscore}noFault\ {\isacharbrackleft}OF\ c\ exec{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c\isactrlsub {\isadigit{1}}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ valid{\isacharunderscore}c{\isadigit{1}}\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ this\ P\ t{\isacharunderscore}notin{\isacharunderscore}F\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidD{\isacharparenright}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ SplitGuards{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ c{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}c\isactrlsub {\isadigit{1}}\ {\isasyminter}\isactrlsub g\ c\isactrlsub {\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ Some\ c{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}c{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\isactrlsub {\isadigit{1}}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}c{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\isactrlsub {\isadigit{2}}\ UNIV{\isacharcomma}UNIV{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ SplitGuards{\isacharunderscore}sound\ {\isacharbrackleft}OF\ {\isacharunderscore}\ {\isacharunderscore}\ c{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ deriv{\isacharunderscore}c{\isadigit{1}}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ deriv{\isacharunderscore}c{\isadigit{2}}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}blast\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ CombineStrip{\isacharunderscore}sound{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ valid{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ valid{\isacharunderscore}strip{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ {\isacharparenleft}strip{\isacharunderscore}guards\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}\ c{\isacharparenright}\ UNIV{\isacharcomma}UNIV{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ ctxt{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ nvalid{\isacharunderscore}augment{\isacharunderscore}Faults{\isacharparenright}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}noFault{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ t{\isacharparenright}\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Normal\ t{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt{\isacharprime}\ exec\ P{\isacharbrackright}\ Normal\ \isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Abrupt\ t{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt{\isacharprime}\ exec\ P{\isacharbrackright}\ Abrupt\ \isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Fault\ f{\isacharparenright}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ {\isachardoublequoteopen}f\ {\isasymin}\ F{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ True\isanewline
\ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymnotin}\ {\isacharminus}F{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ exec\ Fault\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}strip{\isacharunderscore}guards\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ Fault\ f{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ execn{\isacharunderscore}to{\isacharunderscore}execn{\isacharunderscore}strip{\isacharunderscore}guards{\isacharunderscore}Fault{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid{\isacharunderscore}strip\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ this\ P{\isacharbrackright}\ Fault\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{{\isachardot}{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt{\isacharprime}\ exec\ P{\isacharbrackright}\ Fault\isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ Stuck\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt{\isacharprime}\ exec\ P{\isacharbrackright}\ Stuck\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ CombineStrip{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharunderscore}strip{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ {\isacharparenleft}strip{\isacharunderscore}guards\ {\isacharparenleft}{\isacharminus}F{\isacharparenright}\ c{\isacharparenright}\ UNIV{\isacharcomma}UNIV{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ CombineStrip{\isacharunderscore}sound{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid\ {\isacharbrackleft}OF\ deriv{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid\ {\isacharbrackleft}OF\ deriv{\isacharunderscore}strip{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ GuardsFlip{\isacharunderscore}sound{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ valid{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ validFlip{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}{\isacharminus}F\isactrlesub \ P\ c\ UNIV{\isacharcomma}UNIV{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ ctxt{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ nvalid{\isacharunderscore}augment{\isacharunderscore}Faults{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ ctxt\ \isacommand{have}\isamarkupfalse%
\ ctxtFlip{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}{\isacharminus}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ nvalid{\isacharunderscore}augment{\isacharunderscore}Faults{\isacharparenright}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}noFault{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ t{\isacharparenright}\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Normal\ t{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt{\isacharprime}\ exec\ P{\isacharbrackright}\ Normal\ \isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Abrupt\ t{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt{\isacharprime}\ exec\ P{\isacharbrackright}\ Abrupt\ \isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Fault\ f{\isacharparenright}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ {\isachardoublequoteopen}f\ {\isasymin}\ F{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ True\isanewline
\ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymnotin}\ {\isacharminus}F{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ validFlip\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxtFlip\ exec\ P{\isacharbrackright}\ Fault\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{{\isachardot}{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt{\isacharprime}\ exec\ P{\isacharbrackright}\ Fault\isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ Stuck\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt{\isacharprime}\ exec\ P{\isacharbrackright}\ Stuck\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ GuardsFlip{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ derivFlip{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}{\isacharminus}F\isactrlesub \ P\ c\ UNIV{\isacharcomma}UNIV{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ GuardsFlip{\isacharunderscore}sound{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ \ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid\ {\isacharbrackleft}OF\ deriv{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid\ {\isacharbrackleft}OF\ derivFlip{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ MarkGuardsI{\isacharunderscore}sound{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ valid{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ mark{\isacharunderscore}guards\ f\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}mark{\isacharunderscore}guards\ f\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ execn{\isacharunderscore}mark{\isacharunderscore}guards{\isacharunderscore}to{\isacharunderscore}execn\ {\isacharbrackleft}OF\ exec{\isacharbrackright}\ \isacommand{obtain}\isamarkupfalse%
\ t{\isacharprime}\ \isakeyword{where}\isanewline
\ \ \ \ exec{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ t{\isacharprime}{\isacharunderscore}noFault{\isacharcolon}\ {\isachardoublequoteopen}{\isasymnot}\ isFault\ t{\isacharprime}\ {\isasymlongrightarrow}\ t{\isacharprime}\ {\isacharequal}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}noFault{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ exec{\isacharunderscore}c\ P{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ t{\isacharprime}{\isacharunderscore}noFault\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ MarkGuardsI{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ mark{\isacharunderscore}guards\ f\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ MarkGuardsI{\isacharunderscore}sound{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid\ {\isacharbrackleft}OF\ deriv{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ MarkGuardsD{\isacharunderscore}sound{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ valid{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ mark{\isacharunderscore}guards\ f\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}noFault{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ {\isachardoublequoteopen}isFault\ t{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ True\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ execn{\isacharunderscore}to{\isacharunderscore}execn{\isacharunderscore}mark{\isacharunderscore}guards{\isacharunderscore}Fault\ {\isacharbrackleft}OF\ exec\ {\isacharbrackright}\isanewline
\ \ \ \ \isacommand{obtain}\isamarkupfalse%
\ f{\isacharprime}\ \isakeyword{where}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}mark{\isacharunderscore}guards\ f\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ Fault\ f{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}fastforce\ elim{\isacharcolon}\ isFaultE{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ this\ P{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{{\isachardot}{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ execn{\isacharunderscore}to{\isacharunderscore}execn{\isacharunderscore}mark{\isacharunderscore}guards\ {\isacharbrackleft}OF\ exec\ False{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{obtain}\isamarkupfalse%
\ f{\isacharprime}\ \isakeyword{where}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}mark{\isacharunderscore}guards\ f\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ this\ P{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ MarkGuardsD{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ mark{\isacharunderscore}guards\ f\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ MarkGuardsD{\isacharunderscore}sound{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid\ {\isacharbrackleft}OF\ deriv{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ MergeGuardsI{\isacharunderscore}sound{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ valid{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ merge{\isacharunderscore}guards\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharunderscore}merge{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}merge{\isacharunderscore}guards\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ execn{\isacharunderscore}merge{\isacharunderscore}guards{\isacharunderscore}to{\isacharunderscore}execn\ {\isacharbrackleft}OF\ exec{\isacharunderscore}merge{\isacharbrackright}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ exec\ P\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharbrackright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ MergeGuardsI{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ merge{\isacharunderscore}guards\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ MergeGuardsI{\isacharunderscore}sound{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid\ {\isacharbrackleft}OF\ deriv{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ MergeGuardsD{\isacharunderscore}sound{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ valid{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ merge{\isacharunderscore}guards\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ execn{\isacharunderscore}to{\isacharunderscore}execn{\isacharunderscore}merge{\isacharunderscore}guards\ {\isacharbrackleft}OF\ exec{\isacharbrackright}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ exec{\isacharunderscore}merge{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}merge{\isacharunderscore}guards\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ exec{\isacharunderscore}merge\ P\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharbrackright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ MergeGuardsD{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ merge{\isacharunderscore}guards\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ MergeGuardsD{\isacharunderscore}sound{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid\ {\isacharbrackleft}OF\ deriv{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ SubsetGuards{\isacharunderscore}sound{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ c{\isacharunderscore}c{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}c\ {\isasymsubseteq}\isactrlsub g\ c{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ valid{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ c{\isacharprime}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ execn{\isacharunderscore}to{\isacharunderscore}execn{\isacharunderscore}subseteq{\isacharunderscore}guards\ {\isacharbrackleft}OF\ c{\isacharunderscore}c{\isacharprime}\ exec{\isacharbrackright}\ \isacommand{obtain}\isamarkupfalse%
\ t{\isacharprime}\ \isakeyword{where}\isanewline
\ \ \ \ exec{\isacharunderscore}c{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharprime}{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ t{\isacharprime}{\isacharunderscore}noFault{\isacharcolon}\ {\isachardoublequoteopen}{\isasymnot}\ isFault\ t{\isacharprime}\ {\isasymlongrightarrow}\ t{\isacharprime}\ {\isacharequal}\ t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}noFault{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ exec{\isacharunderscore}c{\isacharprime}\ P{\isacharbrackright}\ t{\isacharprime}{\isacharunderscore}noFault\ t{\isacharunderscore}noFault\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ SubsetGuards{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ c{\isacharunderscore}c{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}c\ {\isasymsubseteq}\isactrlsub g\ c{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ c{\isacharprime}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}{\isacharbraceleft}{\isacharbraceright}\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ SubsetGuards{\isacharunderscore}sound\ {\isacharbrackleft}OF\ c{\isacharunderscore}c{\isacharprime}{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid\ {\isacharbrackleft}OF\ deriv{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ NormalizeD{\isacharunderscore}sound{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ valid{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}normalize\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ exec{\isacharunderscore}norm{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}normalize\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ execn{\isacharunderscore}to{\isacharunderscore}execn{\isacharunderscore}normalize{\isacharparenright}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ noFault{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ exec{\isacharunderscore}norm\ P\ noFault{\isacharbrackright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ NormalizeD{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}normalize\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ NormalizeD{\isacharunderscore}sound{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid\ {\isacharbrackleft}OF\ deriv{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ NormalizeI{\isacharunderscore}sound{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ valid{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}n{\isachardot}\ {\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}normalize\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ cnvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isacharparenleft}P{\isacharcomma}\ p{\isacharcomma}\ Q{\isacharcomma}\ A{\isacharparenright}{\isasymin}{\isasymTheta}{\isachardot}\ {\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}Call\ p{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}normalize\ c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ execn{\isacharunderscore}normalize{\isacharunderscore}to{\isacharunderscore}execn{\isacharparenright}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ noFault{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ cnvalidD\ {\isacharbrackleft}OF\ valid\ {\isacharbrackleft}rule{\isacharunderscore}format{\isacharbrackright}\ ctxt\ exec\ P\ noFault{\isacharbrackright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isacommand{{\isachardot}}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ NormalizeI{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ deriv{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isasymTheta}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ {\isacharparenleft}normalize\ c{\isacharparenright}\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharprime}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ allI{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ NormalizeI{\isacharunderscore}sound{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}iprover\ intro{\isacharcolon}\ hoare{\isacharunderscore}cnvalid\ {\isacharbrackleft}OF\ deriv{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsubsection{Restricting the Procedure Environment%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ nvalid{\isacharunderscore}restrict{\isacharunderscore}to{\isacharunderscore}nvalid{\isacharcolon}\isanewline
\isakeyword{assumes}\ valid{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharbar}\isactrlbsub M\isactrlesub {\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymTurnstile}n{\isacharcolon}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ nvalidI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ execn{\isacharunderscore}to{\isacharunderscore}execn{\isacharunderscore}restrict\ {\isacharbrackleft}OF\ exec{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{obtain}\isamarkupfalse%
\ t{\isacharprime}\ \isakeyword{where}\isanewline
\ \ \ \ \ \ exec{\isacharunderscore}res{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharbar}\isactrlbsub M\isactrlesub {\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isacharequal}n{\isasymRightarrow}\ t{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ \ \ t{\isacharunderscore}Fault{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}f{\isachardot}\ t\ {\isacharequal}\ Fault\ f\ {\isasymlongrightarrow}\ t{\isacharprime}\ {\isasymin}\ {\isacharbraceleft}Fault\ f{\isacharcomma}\ Stuck{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ \ \ t{\isacharprime}{\isacharunderscore}notStuck{\isacharcolon}\ {\isachardoublequoteopen}t{\isacharprime}{\isasymnoteq}Stuck\ {\isasymlongrightarrow}\ t{\isacharprime}{\isacharequal}t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ t{\isacharunderscore}Fault\ t{\isacharunderscore}notin{\isacharunderscore}F\ t{\isacharprime}{\isacharunderscore}notStuck\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}cases\ t{\isacharprime}{\isacharparenright}\ auto\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ valid{\isacharunderscore}c\ exec{\isacharunderscore}res\ P\ \isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ nvalid{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ t{\isacharprime}{\isacharunderscore}notStuck\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ valid{\isacharunderscore}restrict{\isacharunderscore}to{\isacharunderscore}valid{\isacharcolon}\isanewline
\isakeyword{assumes}\ valid{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharbar}\isactrlbsub M\isactrlesub {\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymTurnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ validI{\isacharparenright}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ s\ t\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ exec{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ P{\isacharcolon}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ t{\isacharunderscore}notin{\isacharunderscore}F{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}t\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ exec{\isacharunderscore}to{\isacharunderscore}exec{\isacharunderscore}restrict\ {\isacharbrackleft}OF\ exec{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{obtain}\isamarkupfalse%
\ t{\isacharprime}\ \isakeyword{where}\isanewline
\ \ \ \ \ \ exec{\isacharunderscore}res{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharbar}\isactrlbsub M\isactrlesub {\isasymturnstile}{\isasymlangle}c{\isacharcomma}Normal\ s{\isasymrangle}\ {\isasymRightarrow}\ t{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ \ \ t{\isacharunderscore}Fault{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}f{\isachardot}\ t\ {\isacharequal}\ Fault\ f\ {\isasymlongrightarrow}\ t{\isacharprime}\ {\isasymin}\ {\isacharbraceleft}Fault\ f{\isacharcomma}\ Stuck{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ \ \ t{\isacharprime}{\isacharunderscore}notStuck{\isacharcolon}\ {\isachardoublequoteopen}t{\isacharprime}{\isasymnoteq}Stuck\ {\isasymlongrightarrow}\ t{\isacharprime}{\isacharequal}t{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ t{\isacharunderscore}Fault\ t{\isacharunderscore}notin{\isacharunderscore}F\ t{\isacharprime}{\isacharunderscore}notStuck\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymnotin}\ Fault\ {\isacharbackquote}\ F{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}cases\ t{\isacharprime}{\isacharparenright}\ auto\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ valid{\isacharunderscore}c\ exec{\isacharunderscore}res\ P\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}t{\isacharprime}\ {\isasymin}\ Normal\ {\isacharbackquote}\ Q\ {\isasymunion}\ Abrupt\ {\isacharbackquote}\ A{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ valid{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ t{\isacharprime}{\isacharunderscore}notStuck\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ augment{\isacharunderscore}procs{\isacharcolon}\isanewline
\isakeyword{assumes}\ deriv{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharbar}\isactrlbsub M\isactrlesub {\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ valid{\isacharunderscore}restrict{\isacharunderscore}to{\isacharunderscore}valid{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}insert\ hoare{\isacharunderscore}sound\ {\isacharbrackleft}OF\ deriv{\isacharunderscore}c{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ cvalid{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ augment{\isacharunderscore}Faults{\isacharcolon}\isanewline
\isakeyword{assumes}\ deriv{\isacharunderscore}c{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlbsub {\isacharslash}F\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
\isakeyword{assumes}\ F{\isacharcolon}\ {\isachardoublequoteopen}F\ {\isasymsubseteq}\ F{\isacharprime}{\isachardoublequoteclose}\isanewline
\isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharcomma}{\isacharbraceleft}{\isacharbraceright}{\isasymturnstile}\isactrlbsub {\isacharslash}F{\isacharprime}\isactrlesub \ P\ c\ Q{\isacharcomma}A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ hoare{\isacharunderscore}complete{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ valid{\isacharunderscore}augment{\isacharunderscore}Faults\ {\isacharbrackleft}OF\ {\isacharunderscore}\ F{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}insert\ hoare{\isacharunderscore}sound\ {\isacharbrackleft}OF\ deriv{\isacharunderscore}c{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ cvalid{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\end{isabellebody}%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "root"
%%% End:
